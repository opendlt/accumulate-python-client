
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../getting_started/">
      
      
        <link rel="next" href="../examples/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>API Reference - Accumulate Python Client</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Accumulate Python Client" class="md-header__button md-logo" aria-label="Accumulate Python Client" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Accumulate Python Client
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/opendlt/accumulate-python-client" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Accumulate Python Client" class="md-nav__button md-logo" aria-label="Accumulate Python Client" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Accumulate Python Client
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opendlt/accumulate-python-client" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    <span class="md-ellipsis">
      Client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.client" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccumulateClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.faucet" class="md-nav__link">
    <span class="md-ellipsis">
      faucet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.find_service" class="md-nav__link">
    <span class="md-ellipsis">
      find_service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.json_rpc_request" class="md-nav__link">
    <span class="md-ellipsis">
      json_rpc_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.list_snapshots" class="md-nav__link">
    <span class="md-ellipsis">
      list_snapshots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.metrics" class="md-nav__link">
    <span class="md-ellipsis">
      metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.network_status" class="md-nav__link">
    <span class="md-ellipsis">
      network_status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.query_block" class="md-nav__link">
    <span class="md-ellipsis">
      query_block
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.search" class="md-nav__link">
    <span class="md-ellipsis">
      search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.submit" class="md-nav__link">
    <span class="md-ellipsis">
      submit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.validate" class="md-nav__link">
    <span class="md-ellipsis">
      validate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.load_counter" class="md-nav__link">
    <span class="md-ellipsis">
      load_counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.save_counter" class="md-nav__link">
    <span class="md-ellipsis">
      save_counter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-core-context-transport-querier-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      API Core (Context, Transport, Querier, Exceptions)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext" class="md-nav__link">
    <span class="md-ellipsis">
      RequestContext
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RequestContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext.get_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      get_metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext.set_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      set_metadata
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.transport" class="md-nav__link">
    <span class="md-ellipsis">
      transport
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transport">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport" class="md-nav__link">
    <span class="md-ellipsis">
      RoutedTransport
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RoutedTransport">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport.send_request" class="md-nav__link">
    <span class="md-ellipsis">
      send_request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.querier" class="md-nav__link">
    <span class="md-ellipsis">
      querier
    </span>
  </a>
  
    <nav class="md-nav" aria-label="querier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier" class="md-nav__link">
    <span class="md-ellipsis">
      Querier
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Querier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier._deserialize_response" class="md-nav__link">
    <span class="md-ellipsis">
      _deserialize_response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_account" class="md-nav__link">
    <span class="md-ellipsis">
      query_account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_block" class="md-nav__link">
    <span class="md-ellipsis">
      query_block
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_chain" class="md-nav__link">
    <span class="md-ellipsis">
      query_chain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_chain_entries" class="md-nav__link">
    <span class="md-ellipsis">
      query_chain_entries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_events" class="md-nav__link">
    <span class="md-ellipsis">
      query_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_generic" class="md-nav__link">
    <span class="md-ellipsis">
      query_generic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_record" class="md-nav__link">
    <span class="md-ellipsis">
      query_record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      query_transaction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      exceptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.FaucetError" class="md-nav__link">
    <span class="md-ellipsis">
      FaucetError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.QueryError" class="md-nav__link">
    <span class="md-ellipsis">
      QueryError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.SubmissionError" class="md-nav__link">
    <span class="md-ellipsis">
      SubmissionError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.ValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      ValidationError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transactions-models" class="md-nav__link">
    <span class="md-ellipsis">
      Transactions (Models)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.transactions" class="md-nav__link">
    <span class="md-ellipsis">
      transactions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits" class="md-nav__link">
    <span class="md-ellipsis">
      AddCredits
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AddCredits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits._normalize_recipient" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_recipient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.initialize_oracle" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_oracle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens" class="md-nav__link">
    <span class="md-ellipsis">
      BurnTokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BurnTokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens._encode_amount" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_amount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount" class="md-nav__link">
    <span class="md-ellipsis">
      CreateDataAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateDataAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity" class="md-nav__link">
    <span class="md-ellipsis">
      CreateIdentity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateIdentity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyBook" class="md-nav__link">
    <span class="md-ellipsis">
      CreateKeyBook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateKeyBook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyBook.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyBook.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyPage" class="md-nav__link">
    <span class="md-ellipsis">
      CreateKeyPage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateKeyPage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyPage.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyPage.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken" class="md-nav__link">
    <span class="md-ellipsis">
      CreateToken
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateToken">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken._encode_supply_limit" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_supply_limit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      CreateTokenAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateTokenAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens" class="md-nav__link">
    <span class="md-ellipsis">
      IssueTokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IssueTokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens._marshal_recipients" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_recipients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens._unmarshal_recipients" class="md-nav__link">
    <span class="md-ellipsis">
      _unmarshal_recipients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction" class="md-nav__link">
    <span class="md-ellipsis">
      RemoteTransaction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RemoteTransaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens" class="md-nav__link">
    <span class="md-ellipsis">
      SendTokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SendTokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens._marshal_recipients" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_recipients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.add_recipient" class="md-nav__link">
    <span class="md-ellipsis">
      add_recipient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.add_signer" class="md-nav__link">
    <span class="md-ellipsis">
      add_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_body_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_body_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_signer" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.is_remote" class="md-nav__link">
    <span class="md-ellipsis">
      is_remote
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.is_user" class="md-nav__link">
    <span class="md-ellipsis">
      is_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionStatus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionStatus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.add_signer" class="md-nav__link">
    <span class="md-ellipsis">
      add_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.get_signer" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits" class="md-nav__link">
    <span class="md-ellipsis">
      TransferCredits
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransferCredits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateAccountAuth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UpdateAccountAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth._marshal_operation" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_operation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth._marshal_operations" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth._unmarshal_operations" class="md-nav__link">
    <span class="md-ellipsis">
      _unmarshal_operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateKeyPage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UpdateKeyPage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage._marshal_operation" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_operation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage._unmarshal_operations" class="md-nav__link">
    <span class="md-ellipsis">
      _unmarshal_operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData" class="md-nav__link">
    <span class="md-ellipsis">
      WriteData
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WriteData">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.hash_tree" class="md-nav__link">
    <span class="md-ellipsis">
      hash_tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.marshal_without_entry" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_without_entry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries-models" class="md-nav__link">
    <span class="md-ellipsis">
      Queries (Models)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.queries" class="md-nav__link">
    <span class="md-ellipsis">
      queries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="queries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.AnchorSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      AnchorSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnchorSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.AnchorSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.BlockQuery" class="md-nav__link">
    <span class="md-ellipsis">
      BlockQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.BlockQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.BlockQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.ChainQuery" class="md-nav__link">
    <span class="md-ellipsis">
      ChainQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChainQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.ChainQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.ChainQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DataQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DataQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DataQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DefaultQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DefaultQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DefaultQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DefaultQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DelegateSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DelegateSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DelegateSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DelegateSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DirectoryQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DirectoryQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DirectoryQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DirectoryQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DirectoryQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.MessageHashSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      MessageHashSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageHashSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.MessageHashSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PendingQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PendingQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PendingQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PendingQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PendingQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeyHashSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeyHashSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeyHashSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeyHashSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeyHashSearchQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeySearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeySearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery._convert_to_hex" class="md-nav__link">
    <span class="md-ellipsis">
      _convert_to_hex
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.Query" class="md-nav__link">
    <span class="md-ellipsis">
      Query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.Query.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.Query.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      Models &amp; Schemas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.records" class="md-nav__link">
    <span class="md-ellipsis">
      records
    </span>
  </a>
  
    <nav class="md-nav" aria-label="records">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.AccountRecord" class="md-nav__link">
    <span class="md-ellipsis">
      AccountRecord
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountRecord">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.AccountRecord.balance" class="md-nav__link">
    <span class="md-ellipsis">
      balance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainEntryRecord" class="md-nav__link">
    <span class="md-ellipsis">
      ChainEntryRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainRecord" class="md-nav__link">
    <span class="md-ellipsis">
      ChainRecord
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChainRecord">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainRecord.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainRecord.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.KeyRecord" class="md-nav__link">
    <span class="md-ellipsis">
      KeyRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.MessageRecord" class="md-nav__link">
    <span class="md-ellipsis">
      MessageRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.Record" class="md-nav__link">
    <span class="md-ellipsis">
      Record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.RecordRange" class="md-nav__link">
    <span class="md-ellipsis">
      RecordRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.SignatureSetRecord" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureSetRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.TxIDRecord" class="md-nav__link">
    <span class="md-ellipsis">
      TxIDRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.UrlRecord" class="md-nav__link">
    <span class="md-ellipsis">
      UrlRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.range_of" class="md-nav__link">
    <span class="md-ellipsis">
      range_of
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.accounts" class="md-nav__link">
    <span class="md-ellipsis">
      accounts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.Account" class="md-nav__link">
    <span class="md-ellipsis">
      Account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.FullAccount" class="md-nav__link">
    <span class="md-ellipsis">
      FullAccount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.KeyBook" class="md-nav__link">
    <span class="md-ellipsis">
      KeyBook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeyBook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.KeyBook._validate_key_book_url" class="md-nav__link">
    <span class="md-ellipsis">
      _validate_key_book_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteIdentity" class="md-nav__link">
    <span class="md-ellipsis">
      LiteIdentity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LiteIdentity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteIdentity.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteTokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      LiteTokenAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LiteTokenAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteTokenAccount._ensure_url" class="md-nav__link">
    <span class="md-ellipsis">
      _ensure_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.UnknownAccount" class="md-nav__link">
    <span class="md-ellipsis">
      UnknownAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnknownAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.UnknownAccount._ensure_url" class="md-nav__link">
    <span class="md-ellipsis">
      _ensure_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.submission" class="md-nav__link">
    <span class="md-ellipsis">
      submission
    </span>
  </a>
  
    <nav class="md-nav" aria-label="submission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.submission.Submission" class="md-nav__link">
    <span class="md-ellipsis">
      Submission
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.submission.Submission.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.submission.Submission.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.signature_types" class="md-nav__link">
    <span class="md-ellipsis">
      signature_types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signature_types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signature_types.SignatureType" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SignatureType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signature_types.SignatureType.from_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signature_types.SignatureType.to_rpc_format" class="md-nav__link">
    <span class="md-ellipsis">
      to_rpc_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-models-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Models &amp; Schemas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountAuthOperations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountAuthOperation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AddAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AddAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.DisableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      DisableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.EnableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      EnableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.RemoveAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.address" class="md-nav__link">
    <span class="md-ellipsis">
      address
    </span>
  </a>
  
    <nav class="md-nav" aria-label="address">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address" class="md-nav__link">
    <span class="md-ellipsis">
      Address
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Address">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Lite" class="md-nav__link">
    <span class="md-ellipsis">
      Lite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.PrivateKey" class="md-nav__link">
    <span class="md-ellipsis">
      PrivateKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.PublicKey" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.PublicKeyHashAddress" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeyHashAddress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Unknown" class="md-nav__link">
    <span class="md-ellipsis">
      Unknown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.format_address" class="md-nav__link">
    <span class="md-ellipsis">
      format_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.hash_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      hash_public_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.auth" class="md-nav__link">
    <span class="md-ellipsis">
      auth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="auth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.add_authority" class="md-nav__link">
    <span class="md-ellipsis">
      add_authority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.all_authorities_are_disabled" class="md-nav__link">
    <span class="md-ellipsis">
      all_authorities_are_disabled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.get_authority" class="md-nav__link">
    <span class="md-ellipsis">
      get_authority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.key_book" class="md-nav__link">
    <span class="md-ellipsis">
      key_book
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.manager_key_book" class="md-nav__link">
    <span class="md-ellipsis">
      manager_key_book
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.remove_authority" class="md-nav__link">
    <span class="md-ellipsis">
      remove_authority
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AuthorityEntry" class="md-nav__link">
    <span class="md-ellipsis">
      AuthorityEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthorityEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AuthorityEntry.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions" class="md-nav__link">
    <span class="md-ellipsis">
      base_transactions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.ExpireOptions" class="md-nav__link">
    <span class="md-ellipsis">
      ExpireOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExpireOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.ExpireOptions.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.HoldUntilOptions" class="md-nav__link">
    <span class="md-ellipsis">
      HoldUntilOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HoldUntilOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.HoldUntilOptions.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionBodyBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionBodyBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase._format_transaction_type" class="md-nav__link">
    <span class="md-ellipsis">
      _format_transaction_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyFactory" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionBodyFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionBodyFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyFactory.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionHeader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionHeader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.build_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      build_transaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.credits" class="md-nav__link">
    <span class="md-ellipsis">
      credits
    </span>
  </a>
  
    <nav class="md-nav" aria-label="credits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount" class="md-nav__link">
    <span class="md-ellipsis">
      CreditsAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreditsAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.can_debit_credits" class="md-nav__link">
    <span class="md-ellipsis">
      can_debit_credits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.credit_credits" class="md-nav__link">
    <span class="md-ellipsis">
      credit_credits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.debit_credits" class="md-nav__link">
    <span class="md-ellipsis">
      debit_credits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.get_credit_balance" class="md-nav__link">
    <span class="md-ellipsis">
      get_credit_balance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.data_entries" class="md-nav__link">
    <span class="md-ellipsis">
      data_entries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="data_entries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.AccumulateDataEntry" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateDataEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccumulateDataEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.AccumulateDataEntry.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.AccumulateDataEntry.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry" class="md-nav__link">
    <span class="md-ellipsis">
      DataEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.get_data" class="md-nav__link">
    <span class="md-ellipsis">
      get_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntryUtils" class="md-nav__link">
    <span class="md-ellipsis">
      DataEntryUtils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataEntryUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntryUtils.calculate_data_entry_cost" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_data_entry_cost
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntryUtils.check_data_entry_size" class="md-nav__link">
    <span class="md-ellipsis">
      check_data_entry_size
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry" class="md-nav__link">
    <span class="md-ellipsis">
      DoubleHashDataEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DoubleHashDataEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.enums" class="md-nav__link">
    <span class="md-ellipsis">
      enums
    </span>
  </a>
  
    <nav class="md-nav" aria-label="enums">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.AccountAuthOperationType" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperationType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.AccountType" class="md-nav__link">
    <span class="md-ellipsis">
      AccountType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.BookType" class="md-nav__link">
    <span class="md-ellipsis">
      BookType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.DataEntryType" class="md-nav__link">
    <span class="md-ellipsis">
      DataEntryType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.EventType" class="md-nav__link">
    <span class="md-ellipsis">
      EventType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.ExecutorVersion" class="md-nav__link">
    <span class="md-ellipsis">
      ExecutorVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.KeyPageOperationType" class="md-nav__link">
    <span class="md-ellipsis">
      KeyPageOperationType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.KnownPeerStatus" class="md-nav__link">
    <span class="md-ellipsis">
      KnownPeerStatus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.QueryType" class="md-nav__link">
    <span class="md-ellipsis">
      QueryType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.QueryType.from_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.QueryType.to_rpc_format" class="md-nav__link">
    <span class="md-ellipsis">
      to_rpc_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.RecordType" class="md-nav__link">
    <span class="md-ellipsis">
      RecordType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.ServiceType" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType.is_anchor" class="md-nav__link">
    <span class="md-ellipsis">
      is_anchor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType.is_synthetic" class="md-nav__link">
    <span class="md-ellipsis">
      is_synthetic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType.is_user" class="md-nav__link">
    <span class="md-ellipsis">
      is_user
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.VoteType" class="md-nav__link">
    <span class="md-ellipsis">
      VoteType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.enum_from_name" class="md-nav__link">
    <span class="md-ellipsis">
      enum_from_name
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.errors" class="md-nav__link">
    <span class="md-ellipsis">
      errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.EncodingError" class="md-nav__link">
    <span class="md-ellipsis">
      EncodingError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ErrorCode" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorCode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorCode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ErrorCode.from_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ErrorCode.success" class="md-nav__link">
    <span class="md-ellipsis">
      success
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.FailedError" class="md-nav__link">
    <span class="md-ellipsis">
      FailedError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.PanicError" class="md-nav__link">
    <span class="md-ellipsis">
      PanicError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.UnknownError" class="md-nav__link">
    <span class="md-ellipsis">
      UnknownError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      ValidationError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.raise_for_error_code" class="md-nav__link">
    <span class="md-ellipsis">
      raise_for_error_code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.events" class="md-nav__link">
    <span class="md-ellipsis">
      events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.BlockEvent" class="md-nav__link">
    <span class="md-ellipsis">
      BlockEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.BlockEvent.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.BlockEvent.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.ErrorEvent" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.ErrorEvent.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.ErrorEvent.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.GlobalsEvent" class="md-nav__link">
    <span class="md-ellipsis">
      GlobalsEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GlobalsEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.GlobalsEvent.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.GlobalsEvent.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.faucet" class="md-nav__link">
    <span class="md-ellipsis">
      faucet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="faucet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet" class="md-nav__link">
    <span class="md-ellipsis">
      Faucet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Faucet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet._generate_faucet_url" class="md-nav__link">
    <span class="md-ellipsis">
      _generate_faucet_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet.public_key" class="md-nav__link">
    <span class="md-ellipsis">
      public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet.signer" class="md-nav__link">
    <span class="md-ellipsis">
      signer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner" class="md-nav__link">
    <span class="md-ellipsis">
      FaucetSigner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FaucetSigner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.set_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      set_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.sign" class="md-nav__link">
    <span class="md-ellipsis">
      sign
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule" class="md-nav__link">
    <span class="md-ellipsis">
      fee_schedule
    </span>
  </a>
  
    <nav class="md-nav" aria-label="fee_schedule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule.Fee" class="md-nav__link">
    <span class="md-ellipsis">
      Fee
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule.FeeSchedule" class="md-nav__link">
    <span class="md-ellipsis">
      FeeSchedule
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeeSchedule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule.FeeSchedule.compute_transaction_fee" class="md-nav__link">
    <span class="md-ellipsis">
      compute_transaction_fee
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.general" class="md-nav__link">
    <span class="md-ellipsis">
      general
    </span>
  </a>
  
    <nav class="md-nav" aria-label="general">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.AccountAuth" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.AnchorMetadata" class="md-nav__link">
    <span class="md-ellipsis">
      AnchorMetadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.AuthorityEntry" class="md-nav__link">
    <span class="md-ellipsis">
      AuthorityEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.BlockEntry" class="md-nav__link">
    <span class="md-ellipsis">
      BlockEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient" class="md-nav__link">
    <span class="md-ellipsis">
      CreditRecipient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreditRecipient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.FeeSchedule" class="md-nav__link">
    <span class="md-ellipsis">
      FeeSchedule
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.IndexEntry" class="md-nav__link">
    <span class="md-ellipsis">
      IndexEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.NetworkGlobals" class="md-nav__link">
    <span class="md-ellipsis">
      NetworkGlobals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.NetworkLimits" class="md-nav__link">
    <span class="md-ellipsis">
      NetworkLimits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.Object" class="md-nav__link">
    <span class="md-ellipsis">
      Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.TokenRecipient" class="md-nav__link">
    <span class="md-ellipsis">
      TokenRecipient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenRecipient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.TokenRecipient.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.key_management" class="md-nav__link">
    <span class="md-ellipsis">
      key_management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="key_management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.AddKeyOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AddKeyOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage" class="md-nav__link">
    <span class="md-ellipsis">
      KeyPage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeyPage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.add_key_spec" class="md-nav__link">
    <span class="md-ellipsis">
      add_key_spec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.entry_by_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      entry_by_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.get_m_of_n" class="md-nav__link">
    <span class="md-ellipsis">
      get_m_of_n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.remove_key_spec_at" class="md-nav__link">
    <span class="md-ellipsis">
      remove_key_spec_at
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.set_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      set_threshold
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpec" class="md-nav__link">
    <span class="md-ellipsis">
      KeySpec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeySpec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpec.get_last_used_on" class="md-nav__link">
    <span class="md-ellipsis">
      get_last_used_on
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpec.set_last_used_on" class="md-nav__link">
    <span class="md-ellipsis">
      set_last_used_on
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpecParams" class="md-nav__link">
    <span class="md-ellipsis">
      KeySpecParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeySpecParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpecParams.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpecParams.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.RemoveKeyOperation" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveKeyOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.SetRejectThresholdKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      SetRejectThresholdKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.SetResponseThresholdKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      SetResponseThresholdKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.SetThresholdKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      SetThresholdKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.UpdateAllowedKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateAllowedKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.UpdateKeyOperation" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateKeyOperation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.key_signature" class="md-nav__link">
    <span class="md-ellipsis">
      key_signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="key_signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature" class="md-nav__link">
    <span class="md-ellipsis">
      KeySignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeySignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_signature" class="md-nav__link">
    <span class="md-ellipsis">
      get_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_signer_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      get_timestamp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.node_info" class="md-nav__link">
    <span class="md-ellipsis">
      node_info
    </span>
  </a>
  
    <nav class="md-nav" aria-label="node_info">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.node_info.NodeInfo" class="md-nav__link">
    <span class="md-ellipsis">
      NodeInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NodeInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.node_info.NodeInfo.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.node_info.NodeInfo.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.options" class="md-nav__link">
    <span class="md-ellipsis">
      options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.FaucetOptions" class="md-nav__link">
    <span class="md-ellipsis">
      FaucetOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.RangeOptions" class="md-nav__link">
    <span class="md-ellipsis">
      RangeOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RangeOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.RangeOptions.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ReceiptOptions" class="md-nav__link">
    <span class="md-ellipsis">
      ReceiptOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReceiptOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ReceiptOptions.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ReceiptOptions.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.SubmitOptions" class="md-nav__link">
    <span class="md-ellipsis">
      SubmitOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.SubscribeOptions" class="md-nav__link">
    <span class="md-ellipsis">
      SubscribeOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ValidateOptions" class="md-nav__link">
    <span class="md-ellipsis">
      ValidateOptions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.protocol" class="md-nav__link">
    <span class="md-ellipsis">
      protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AccountWithTokens" class="md-nav__link">
    <span class="md-ellipsis">
      AccountWithTokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AddAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AddAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions" class="md-nav__link">
    <span class="md-ellipsis">
      AllowedTransactions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AllowedTransactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.clear" class="md-nav__link">
    <span class="md-ellipsis">
      clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.get_enum_value" class="md-nav__link">
    <span class="md-ellipsis">
      get_enum_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.is_set" class="md-nav__link">
    <span class="md-ellipsis">
      is_set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.set_enum_value" class="md-nav__link">
    <span class="md-ellipsis">
      set_enum_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.unpack" class="md-nav__link">
    <span class="md-ellipsis">
      unpack
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.DisableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      DisableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.EnableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      EnableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.LiteTokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      LiteTokenAccount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt" class="md-nav__link">
    <span class="md-ellipsis">
      Receipt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Receipt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt._validate_iso8601" class="md-nav__link">
    <span class="md-ellipsis">
      _validate_iso8601
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.RemoveAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.TokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      TokenAccount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.TokenIssuer" class="md-nav__link">
    <span class="md-ellipsis">
      TokenIssuer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.acme_url" class="md-nav__link">
    <span class="md-ellipsis">
      acme_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.lite_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      lite_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.lite_token_address" class="md-nav__link">
    <span class="md-ellipsis">
      lite_token_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.normalize_acc_url" class="md-nav__link">
    <span class="md-ellipsis">
      normalize_acc_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.parse_lite_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_lite_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.unknown_url" class="md-nav__link">
    <span class="md-ellipsis">
      unknown_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.responses" class="md-nav__link">
    <span class="md-ellipsis">
      responses
    </span>
  </a>
  
    <nav class="md-nav" aria-label="responses">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.SubmissionResponse" class="md-nav__link">
    <span class="md-ellipsis">
      SubmissionResponse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SubmissionResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.SubmissionResponse.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.SubmissionResponse.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionResultSet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionResultSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet.add_result" class="md-nav__link">
    <span class="md-ellipsis">
      add_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.search" class="md-nav__link">
    <span class="md-ellipsis">
      search
    </span>
  </a>
  
    <nav class="md-nav" aria-label="search">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.AnchorSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      AnchorSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnchorSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.AnchorSearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.DelegateSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DelegateSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DelegateSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.DelegateSearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.PublicKeySearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeySearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeySearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.PublicKeySearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      SearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.service" class="md-nav__link">
    <span class="md-ellipsis">
      service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceOptions" class="md-nav__link">
    <span class="md-ellipsis">
      FindServiceOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FindServiceOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceOptions.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceOptions.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceResult" class="md-nav__link">
    <span class="md-ellipsis">
      FindServiceResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FindServiceResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceResult.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceResult.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceAddress
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceAddress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.parse_service_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_service_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.unpack_address" class="md-nav__link">
    <span class="md-ellipsis">
      unpack_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.signatures" class="md-nav__link">
    <span class="md-ellipsis">
      signatures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signatures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.AuthoritySignature" class="md-nav__link">
    <span class="md-ellipsis">
      AuthoritySignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthoritySignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.AuthoritySignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.DelegatedSignature" class="md-nav__link">
    <span class="md-ellipsis">
      DelegatedSignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DelegatedSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.DelegatedSignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature" class="md-nav__link">
    <span class="md-ellipsis">
      ECDSA_SHA256Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ECDSA_SHA256Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature.sign" class="md-nav__link">
    <span class="md-ellipsis">
      sign
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature.verify" class="md-nav__link">
    <span class="md-ellipsis">
      verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ED25519Signature" class="md-nav__link">
    <span class="md-ellipsis">
      ED25519Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ED25519Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ED25519Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ED25519Signature.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.EIP712Signature" class="md-nav__link">
    <span class="md-ellipsis">
      EIP712Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EIP712Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.EIP712Signature._encode_typed_data" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_typed_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.EIP712Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature" class="md-nav__link">
    <span class="md-ellipsis">
      ETHSignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ETHSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.get_signature" class="md-nav__link">
    <span class="md-ellipsis">
      get_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.verify" class="md-nav__link">
    <span class="md-ellipsis">
      verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite" class="md-nav__link">
    <span class="md-ellipsis">
      Lite
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite.get_bytes" class="md-nav__link">
    <span class="md-ellipsis">
      get_bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite.get_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey" class="md-nav__link">
    <span class="md-ellipsis">
      PrivateKey
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrivateKey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.get_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKey
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeyHash
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeyHash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.RCD1Signature" class="md-nav__link">
    <span class="md-ellipsis">
      RCD1Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RCD1Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.RCD1Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.RCD1Signature.verify" class="md-nav__link">
    <span class="md-ellipsis">
      verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Signature" class="md-nav__link">
    <span class="md-ellipsis">
      Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Signature.encode" class="md-nav__link">
    <span class="md-ellipsis">
      encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.SignatureFactory" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureFactory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.TypedDataSignature" class="md-nav__link">
    <span class="md-ellipsis">
      TypedDataSignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TypedDataSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.TypedDataSignature._encode_typed_data" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_typed_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.TypedDataSignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.do_btc_hash" class="md-nav__link">
    <span class="md-ellipsis">
      do_btc_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.do_eth_hash" class="md-nav__link">
    <span class="md-ellipsis">
      do_eth_hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results" class="md-nav__link">
    <span class="md-ellipsis">
      transaction_results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transaction_results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.AddCreditsResult" class="md-nav__link">
    <span class="md-ellipsis">
      AddCreditsResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.EmptyResult" class="md-nav__link">
    <span class="md-ellipsis">
      EmptyResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.TransactionResult" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.WriteDataResult" class="md-nav__link">
    <span class="md-ellipsis">
      WriteDataResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.copy_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      copy_transaction_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.deserialize_json" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.equal_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      equal_transaction_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.new_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      new_transaction_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.unmarshal_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_transaction_result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.txid" class="md-nav__link">
    <span class="md-ellipsis">
      txid
    </span>
  </a>
  
    <nav class="md-nav" aria-label="txid">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID" class="md-nav__link">
    <span class="md-ellipsis">
      TxID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TxID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.account" class="md-nav__link">
    <span class="md-ellipsis">
      account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.as_url" class="md-nav__link">
    <span class="md-ellipsis">
      as_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.json" class="md-nav__link">
    <span class="md-ellipsis">
      json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.txid_set" class="md-nav__link">
    <span class="md-ellipsis">
      txid_set
    </span>
  </a>
  
    <nav class="md-nav" aria-label="txid_set">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet" class="md-nav__link">
    <span class="md-ellipsis">
      TxIdSet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TxIdSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet.contains_hash" class="md-nav__link">
    <span class="md-ellipsis">
      contains_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet.remove" class="md-nav__link">
    <span class="md-ellipsis">
      remove
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.types" class="md-nav__link">
    <span class="md-ellipsis">
      types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.types.AtomicSlice" class="md-nav__link">
    <span class="md-ellipsis">
      AtomicSlice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AtomicSlice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.types.AtomicSlice.compare" class="md-nav__link">
    <span class="md-ellipsis">
      compare
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.types.AtomicUint" class="md-nav__link">
    <span class="md-ellipsis">
      AtomicUint
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" class="md-nav__link">
    <span class="md-ellipsis">
      Utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.conversion" class="md-nav__link">
    <span class="md-ellipsis">
      conversion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="conversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.conversion.camel_to_snake" class="md-nav__link">
    <span class="md-ellipsis">
      camel_to_snake
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.address_from" class="md-nav__link">
    <span class="md-ellipsis">
      address_from
    </span>
  </a>
  
    <nav class="md-nav" aria-label="address_from">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ecdsa_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ecdsa_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ecdsa_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ecdsa_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ed25519_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ed25519_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ed25519_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ed25519_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_eth_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_eth_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_private_key_bytes" class="md-nav__link">
    <span class="md-ellipsis">
      from_private_key_bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_rsa_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_rsa_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_rsa_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_rsa_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.generate_ed25519_keypair" class="md-nav__link">
    <span class="md-ellipsis">
      generate_ed25519_keypair
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.encoding" class="md-nav__link">
    <span class="md-ellipsis">
      encoding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="encoding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.consume" class="md-nav__link">
    <span class="md-ellipsis">
      consume
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.decode_uvarint" class="md-nav__link">
    <span class="md-ellipsis">
      decode_uvarint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode" class="md-nav__link">
    <span class="md-ellipsis">
      encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode_compact_int" class="md-nav__link">
    <span class="md-ellipsis">
      encode_compact_int
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode_uvarint" class="md-nav__link">
    <span class="md-ellipsis">
      encode_uvarint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode_value" class="md-nav__link">
    <span class="md-ellipsis">
      encode_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.field_marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      field_marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.read_uvarint" class="md-nav__link">
    <span class="md-ellipsis">
      read_uvarint
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions" class="md-nav__link">
    <span class="md-ellipsis">
      hash_functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="hash_functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.LiteAuthorityForHash" class="md-nav__link">
    <span class="md-ellipsis">
      LiteAuthorityForHash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.LiteAuthorityForKey" class="md-nav__link">
    <span class="md-ellipsis">
      LiteAuthorityForKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.btc_address" class="md-nav__link">
    <span class="md-ellipsis">
      btc_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.compute_hash" class="md-nav__link">
    <span class="md-ellipsis">
      compute_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.eth_address" class="md-nav__link">
    <span class="md-ellipsis">
      eth_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.hash_data" class="md-nav__link">
    <span class="md-ellipsis">
      hash_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      public_key_hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-utils" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse" class="md-nav__link">
    <span class="md-ellipsis">
      address_parse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="address_parse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.is_wif_key" class="md-nav__link">
    <span class="md-ellipsis">
      is_wif_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_ac_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_ac_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_as_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_as_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_btc_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_btc_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_eth_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_eth_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_fa_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_fa_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_fs_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_fs_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_mh_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_mh_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_wif" class="md-nav__link">
    <span class="md-ellipsis">
      parse_wif
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_with_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      parse_with_checksum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_with_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      parse_with_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.verify_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      verify_checksum
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config" class="md-nav__link">
    <span class="md-ellipsis">
      Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.get_initial_oracle_value" class="md-nav__link">
    <span class="md-ellipsis">
      get_initial_oracle_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.get_network_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_network_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.initial_acme_oracle" class="md-nav__link">
    <span class="md-ellipsis">
      initial_acme_oracle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.is_testnet" class="md-nav__link">
    <span class="md-ellipsis">
      is_testnet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.eip712" class="md-nav__link">
    <span class="md-ellipsis">
      eip712
    </span>
  </a>
  
    <nav class="md-nav" aria-label="eip712">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.eip712.eth_chain_id" class="md-nav__link">
    <span class="md-ellipsis">
      eth_chain_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.eip712.hash_eip712" class="md-nav__link">
    <span class="md-ellipsis">
      hash_eip712
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.eip712.marshal_eip712" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_eip712
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.fields" class="md-nav__link">
    <span class="md-ellipsis">
      fields
    </span>
  </a>
  
    <nav class="md-nav" aria-label="fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.BoolField" class="md-nav__link">
    <span class="md-ellipsis">
      BoolField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DateTimeField" class="md-nav__link">
    <span class="md-ellipsis">
      DateTimeField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField" class="md-nav__link">
    <span class="md-ellipsis">
      DurationField
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DurationField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field" class="md-nav__link">
    <span class="md-ellipsis">
      Field
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Field">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.FloatField" class="md-nav__link">
    <span class="md-ellipsis">
      FloatField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.IntField" class="md-nav__link">
    <span class="md-ellipsis">
      IntField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor" class="md-nav__link">
    <span class="md-ellipsis">
      ReadOnlyAccessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReadOnlyAccessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.copy_to" class="md-nav__link">
    <span class="md-ellipsis">
      copy_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.equal" class="md-nav__link">
    <span class="md-ellipsis">
      equal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.read_from" class="md-nav__link">
    <span class="md-ellipsis">
      read_from
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.write_to" class="md-nav__link">
    <span class="md-ellipsis">
      write_to
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.StringField" class="md-nav__link">
    <span class="md-ellipsis">
      StringField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.TimeAccessor" class="md-nav__link">
    <span class="md-ellipsis">
      TimeAccessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimeAccessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.TimeAccessor.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.formatting" class="md-nav__link">
    <span class="md-ellipsis">
      formatting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="formatting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._calculate_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      _calculate_checksum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._format_with_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      _format_with_checksum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._format_with_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      _format_with_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._hash_with_algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      _hash_with_algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_ac1" class="md-nav__link">
    <span class="md-ellipsis">
      format_ac1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_ac2" class="md-nav__link">
    <span class="md-ellipsis">
      format_ac2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_ac3" class="md-nav__link">
    <span class="md-ellipsis">
      format_ac3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_as1" class="md-nav__link">
    <span class="md-ellipsis">
      format_as1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_as2" class="md-nav__link">
    <span class="md-ellipsis">
      format_as2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_as3" class="md-nav__link">
    <span class="md-ellipsis">
      format_as3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_btc" class="md-nav__link">
    <span class="md-ellipsis">
      format_btc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_eth" class="md-nav__link">
    <span class="md-ellipsis">
      format_eth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_fa" class="md-nav__link">
    <span class="md-ellipsis">
      format_fa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_fs" class="md-nav__link">
    <span class="md-ellipsis">
      format_fs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_mh" class="md-nav__link">
    <span class="md-ellipsis">
      format_mh
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      import_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="import_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers.get_signer" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers.is_lite_account_lazy" class="md-nav__link">
    <span class="md-ellipsis">
      is_lite_account_lazy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers.query_signer_version" class="md-nav__link">
    <span class="md-ellipsis">
      query_signer_version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.protocols" class="md-nav__link">
    <span class="md-ellipsis">
      protocols
    </span>
  </a>
  
    <nav class="md-nav" aria-label="protocols">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue" class="md-nav__link">
    <span class="md-ellipsis">
      BinaryValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BinaryValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.copy_as_interface" class="md-nav__link">
    <span class="md-ellipsis">
      copy_as_interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.unmarshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.unmarshal_binary_from" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_binary_from
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.UnionValue" class="md-nav__link">
    <span class="md-ellipsis">
      UnionValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnionValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.UnionValue.unmarshal_fields_from" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_fields_from
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.rational" class="md-nav__link">
    <span class="md-ellipsis">
      rational
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rational">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.rational.Rational" class="md-nav__link">
    <span class="md-ellipsis">
      Rational
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rational">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.rational.Rational.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.rational.Rational.threshold" class="md-nav__link">
    <span class="md-ellipsis">
      threshold
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.union" class="md-nav__link">
    <span class="md-ellipsis">
      union
    </span>
  </a>
  
    <nav class="md-nav" aria-label="union">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue" class="md-nav__link">
    <span class="md-ellipsis">
      UnionValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnionValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.copy" class="md-nav__link">
    <span class="md-ellipsis">
      copy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.marshal_json" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.unmarshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.unmarshal_json" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.url" class="md-nav__link">
    <span class="md-ellipsis">
      url
    </span>
  </a>
  
    <nav class="md-nav" aria-label="url">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.InvalidHashError" class="md-nav__link">
    <span class="md-ellipsis">
      InvalidHashError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.MissingHashError" class="md-nav__link">
    <span class="md-ellipsis">
      MissingHashError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.MissingHostError" class="md-nav__link">
    <span class="md-ellipsis">
      MissingHostError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="URL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.__lt__" class="md-nav__link">
    <span class="md-ellipsis">
      __lt__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL._normalize_path" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.account_id" class="md-nav__link">
    <span class="md-ellipsis">
      account_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.identity" class="md-nav__link">
    <span class="md-ellipsis">
      identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.identity_id" class="md-nav__link">
    <span class="md-ellipsis">
      identity_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.is_key_page_url" class="md-nav__link">
    <span class="md-ellipsis">
      is_key_page_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.root_identity" class="md-nav__link">
    <span class="md-ellipsis">
      root_identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.strip_extras" class="md-nav__link">
    <span class="md-ellipsis">
      strip_extras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.valid_utf8" class="md-nav__link">
    <span class="md-ellipsis">
      valid_utf8
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.with_path" class="md-nav__link">
    <span class="md-ellipsis">
      with_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.with_query" class="md-nav__link">
    <span class="md-ellipsis">
      with_query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.with_user_info" class="md-nav__link">
    <span class="md-ellipsis">
      with_user_info
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URLParseError" class="md-nav__link">
    <span class="md-ellipsis">
      URLParseError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.WrongSchemeError" class="md-nav__link">
    <span class="md-ellipsis">
      WrongSchemeError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.validation" class="md-nav__link">
    <span class="md-ellipsis">
      validation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.is_lite_account" class="md-nav__link">
    <span class="md-ellipsis">
      is_lite_account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.is_reserved_url" class="md-nav__link">
    <span class="md-ellipsis">
      is_reserved_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.is_valid_adi_url" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid_adi_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.process_signer_url" class="md-nav__link">
    <span class="md-ellipsis">
      process_signer_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.validate_accumulate_url" class="md-nav__link">
    <span class="md-ellipsis">
      validate_accumulate_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing" class="md-nav__link">
    <span class="md-ellipsis">
      Signing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.builder" class="md-nav__link">
    <span class="md-ellipsis">
      builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder" class="md-nav__link">
    <span class="md-ellipsis">
      Builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder._create_signature" class="md-nav__link">
    <span class="md-ellipsis">
      _create_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.initiate" class="md-nav__link">
    <span class="md-ellipsis">
      initiate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.prepare" class="md-nav__link">
    <span class="md-ellipsis">
      prepare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.set_signer" class="md-nav__link">
    <span class="md-ellipsis">
      set_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.sign" class="md-nav__link">
    <span class="md-ellipsis">
      sign
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler" class="md-nav__link">
    <span class="md-ellipsis">
      signature_handler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signature_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SignatureHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.btc_address" class="md-nav__link">
    <span class="md-ellipsis">
      btc_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.create_authority_signature" class="md-nav__link">
    <span class="md-ellipsis">
      create_authority_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.eth_address" class="md-nav__link">
    <span class="md-ellipsis">
      eth_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_btc" class="md-nav__link">
    <span class="md-ellipsis">
      sign_btc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_delegated_signature" class="md-nav__link">
    <span class="md-ellipsis">
      sign_delegated_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_ecdsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      sign_ecdsa_sha256
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_ed25519" class="md-nav__link">
    <span class="md-ellipsis">
      sign_ed25519
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_eth" class="md-nav__link">
    <span class="md-ellipsis">
      sign_eth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_rsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      sign_rsa_sha256
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_typed_data" class="md-nav__link">
    <span class="md-ellipsis">
      sign_typed_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_authority_signature" class="md-nav__link">
    <span class="md-ellipsis">
      verify_authority_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_btc" class="md-nav__link">
    <span class="md-ellipsis">
      verify_btc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_delegated_signature" class="md-nav__link">
    <span class="md-ellipsis">
      verify_delegated_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_ecdsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      verify_ecdsa_sha256
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_ed25519" class="md-nav__link">
    <span class="md-ellipsis">
      verify_ed25519
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_eth" class="md-nav__link">
    <span class="md-ellipsis">
      verify_eth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_merkle_hash" class="md-nav__link">
    <span class="md-ellipsis">
      verify_merkle_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_rsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      verify_rsa_sha256
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.signer" class="md-nav__link">
    <span class="md-ellipsis">
      signer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer" class="md-nav__link">
    <span class="md-ellipsis">
      Signer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.calculate_metadata_hash" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_metadata_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.get_signature_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_signature_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.sign_and_submit_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      sign_and_submit_transaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.sign_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      sign_transaction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      timestamp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="timestamp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.Timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timestamp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.Timestamp.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromValue" class="md-nav__link">
    <span class="md-ellipsis">
      TimestampFromValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimestampFromValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromValue.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromVariable" class="md-nav__link">
    <span class="md-ellipsis">
      TimestampFromVariable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimestampFromVariable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromVariable.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromVariable.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    <span class="md-ellipsis">
      Client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.client" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccumulateClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.faucet" class="md-nav__link">
    <span class="md-ellipsis">
      faucet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.find_service" class="md-nav__link">
    <span class="md-ellipsis">
      find_service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.json_rpc_request" class="md-nav__link">
    <span class="md-ellipsis">
      json_rpc_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.list_snapshots" class="md-nav__link">
    <span class="md-ellipsis">
      list_snapshots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.metrics" class="md-nav__link">
    <span class="md-ellipsis">
      metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.network_status" class="md-nav__link">
    <span class="md-ellipsis">
      network_status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.query_block" class="md-nav__link">
    <span class="md-ellipsis">
      query_block
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.search" class="md-nav__link">
    <span class="md-ellipsis">
      search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.submit" class="md-nav__link">
    <span class="md-ellipsis">
      submit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.AccumulateClient.validate" class="md-nav__link">
    <span class="md-ellipsis">
      validate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.load_counter" class="md-nav__link">
    <span class="md-ellipsis">
      load_counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.client.save_counter" class="md-nav__link">
    <span class="md-ellipsis">
      save_counter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-core-context-transport-querier-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      API Core (Context, Transport, Querier, Exceptions)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext" class="md-nav__link">
    <span class="md-ellipsis">
      RequestContext
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RequestContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext.get_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      get_metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.context.RequestContext.set_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      set_metadata
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.transport" class="md-nav__link">
    <span class="md-ellipsis">
      transport
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transport">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport" class="md-nav__link">
    <span class="md-ellipsis">
      RoutedTransport
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RoutedTransport">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.transport.RoutedTransport.send_request" class="md-nav__link">
    <span class="md-ellipsis">
      send_request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.querier" class="md-nav__link">
    <span class="md-ellipsis">
      querier
    </span>
  </a>
  
    <nav class="md-nav" aria-label="querier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier" class="md-nav__link">
    <span class="md-ellipsis">
      Querier
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Querier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier._deserialize_response" class="md-nav__link">
    <span class="md-ellipsis">
      _deserialize_response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_account" class="md-nav__link">
    <span class="md-ellipsis">
      query_account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_block" class="md-nav__link">
    <span class="md-ellipsis">
      query_block
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_chain" class="md-nav__link">
    <span class="md-ellipsis">
      query_chain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_chain_entries" class="md-nav__link">
    <span class="md-ellipsis">
      query_chain_entries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_events" class="md-nav__link">
    <span class="md-ellipsis">
      query_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_generic" class="md-nav__link">
    <span class="md-ellipsis">
      query_generic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_record" class="md-nav__link">
    <span class="md-ellipsis">
      query_record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.querier.Querier.query_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      query_transaction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.api.exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      exceptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.FaucetError" class="md-nav__link">
    <span class="md-ellipsis">
      FaucetError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.QueryError" class="md-nav__link">
    <span class="md-ellipsis">
      QueryError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.SubmissionError" class="md-nav__link">
    <span class="md-ellipsis">
      SubmissionError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.api.exceptions.ValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      ValidationError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transactions-models" class="md-nav__link">
    <span class="md-ellipsis">
      Transactions (Models)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.transactions" class="md-nav__link">
    <span class="md-ellipsis">
      transactions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits" class="md-nav__link">
    <span class="md-ellipsis">
      AddCredits
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AddCredits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits._normalize_recipient" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_recipient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.initialize_oracle" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_oracle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.AddCredits.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens" class="md-nav__link">
    <span class="md-ellipsis">
      BurnTokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BurnTokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens._encode_amount" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_amount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.BurnTokens.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount" class="md-nav__link">
    <span class="md-ellipsis">
      CreateDataAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateDataAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateDataAccount.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity" class="md-nav__link">
    <span class="md-ellipsis">
      CreateIdentity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateIdentity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateIdentity.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyBook" class="md-nav__link">
    <span class="md-ellipsis">
      CreateKeyBook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateKeyBook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyBook.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyBook.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyPage" class="md-nav__link">
    <span class="md-ellipsis">
      CreateKeyPage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateKeyPage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyPage.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateKeyPage.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken" class="md-nav__link">
    <span class="md-ellipsis">
      CreateToken
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateToken">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken._encode_supply_limit" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_supply_limit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateToken.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      CreateTokenAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreateTokenAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.CreateTokenAccount.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens" class="md-nav__link">
    <span class="md-ellipsis">
      IssueTokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IssueTokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens._marshal_recipients" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_recipients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens._unmarshal_recipients" class="md-nav__link">
    <span class="md-ellipsis">
      _unmarshal_recipients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.IssueTokens.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction" class="md-nav__link">
    <span class="md-ellipsis">
      RemoteTransaction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RemoteTransaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.RemoteTransaction.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens" class="md-nav__link">
    <span class="md-ellipsis">
      SendTokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SendTokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens._marshal_recipients" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_recipients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.add_recipient" class="md-nav__link">
    <span class="md-ellipsis">
      add_recipient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.SendTokens.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.add_signer" class="md-nav__link">
    <span class="md-ellipsis">
      add_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_body_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_body_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.get_signer" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.is_remote" class="md-nav__link">
    <span class="md-ellipsis">
      is_remote
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.is_user" class="md-nav__link">
    <span class="md-ellipsis">
      is_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.Transaction.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionStatus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionStatus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.add_signer" class="md-nav__link">
    <span class="md-ellipsis">
      add_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.get_signer" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransactionStatus.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits" class="md-nav__link">
    <span class="md-ellipsis">
      TransferCredits
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransferCredits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.TransferCredits.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateAccountAuth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UpdateAccountAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth._marshal_operation" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_operation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth._marshal_operations" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth._unmarshal_operations" class="md-nav__link">
    <span class="md-ellipsis">
      _unmarshal_operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateAccountAuth.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateKeyPage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UpdateKeyPage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage._marshal_operation" class="md-nav__link">
    <span class="md-ellipsis">
      _marshal_operation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage._unmarshal_operations" class="md-nav__link">
    <span class="md-ellipsis">
      _unmarshal_operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.UpdateKeyPage.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData" class="md-nav__link">
    <span class="md-ellipsis">
      WriteData
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WriteData">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.hash_tree" class="md-nav__link">
    <span class="md-ellipsis">
      hash_tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.marshal_without_entry" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_without_entry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transactions.WriteData.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries-models" class="md-nav__link">
    <span class="md-ellipsis">
      Queries (Models)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.queries" class="md-nav__link">
    <span class="md-ellipsis">
      queries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="queries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.AnchorSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      AnchorSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnchorSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.AnchorSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.BlockQuery" class="md-nav__link">
    <span class="md-ellipsis">
      BlockQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.BlockQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.BlockQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.ChainQuery" class="md-nav__link">
    <span class="md-ellipsis">
      ChainQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChainQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.ChainQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.ChainQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DataQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DataQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DataQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DefaultQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DefaultQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DefaultQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DefaultQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DelegateSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DelegateSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DelegateSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DelegateSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DirectoryQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DirectoryQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DirectoryQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DirectoryQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.DirectoryQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.MessageHashSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      MessageHashSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MessageHashSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.MessageHashSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PendingQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PendingQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PendingQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PendingQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PendingQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeyHashSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeyHashSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeyHashSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeyHashSearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeyHashSearchQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeySearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeySearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery._convert_to_hex" class="md-nav__link">
    <span class="md-ellipsis">
      _convert_to_hex
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.PublicKeySearchQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.Query" class="md-nav__link">
    <span class="md-ellipsis">
      Query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.Query.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.queries.Query.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      Models &amp; Schemas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.records" class="md-nav__link">
    <span class="md-ellipsis">
      records
    </span>
  </a>
  
    <nav class="md-nav" aria-label="records">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.AccountRecord" class="md-nav__link">
    <span class="md-ellipsis">
      AccountRecord
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountRecord">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.AccountRecord.balance" class="md-nav__link">
    <span class="md-ellipsis">
      balance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainEntryRecord" class="md-nav__link">
    <span class="md-ellipsis">
      ChainEntryRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainRecord" class="md-nav__link">
    <span class="md-ellipsis">
      ChainRecord
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChainRecord">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainRecord.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.ChainRecord.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.KeyRecord" class="md-nav__link">
    <span class="md-ellipsis">
      KeyRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.MessageRecord" class="md-nav__link">
    <span class="md-ellipsis">
      MessageRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.Record" class="md-nav__link">
    <span class="md-ellipsis">
      Record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.RecordRange" class="md-nav__link">
    <span class="md-ellipsis">
      RecordRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.SignatureSetRecord" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureSetRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.TxIDRecord" class="md-nav__link">
    <span class="md-ellipsis">
      TxIDRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.UrlRecord" class="md-nav__link">
    <span class="md-ellipsis">
      UrlRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.records.range_of" class="md-nav__link">
    <span class="md-ellipsis">
      range_of
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.accounts" class="md-nav__link">
    <span class="md-ellipsis">
      accounts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.Account" class="md-nav__link">
    <span class="md-ellipsis">
      Account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.FullAccount" class="md-nav__link">
    <span class="md-ellipsis">
      FullAccount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.KeyBook" class="md-nav__link">
    <span class="md-ellipsis">
      KeyBook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeyBook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.KeyBook._validate_key_book_url" class="md-nav__link">
    <span class="md-ellipsis">
      _validate_key_book_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteIdentity" class="md-nav__link">
    <span class="md-ellipsis">
      LiteIdentity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LiteIdentity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteIdentity.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteTokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      LiteTokenAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LiteTokenAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.LiteTokenAccount._ensure_url" class="md-nav__link">
    <span class="md-ellipsis">
      _ensure_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.UnknownAccount" class="md-nav__link">
    <span class="md-ellipsis">
      UnknownAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnknownAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.accounts.UnknownAccount._ensure_url" class="md-nav__link">
    <span class="md-ellipsis">
      _ensure_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.submission" class="md-nav__link">
    <span class="md-ellipsis">
      submission
    </span>
  </a>
  
    <nav class="md-nav" aria-label="submission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.submission.Submission" class="md-nav__link">
    <span class="md-ellipsis">
      Submission
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Submission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.submission.Submission.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.submission.Submission.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.signature_types" class="md-nav__link">
    <span class="md-ellipsis">
      signature_types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signature_types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signature_types.SignatureType" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SignatureType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signature_types.SignatureType.from_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signature_types.SignatureType.to_rpc_format" class="md-nav__link">
    <span class="md-ellipsis">
      to_rpc_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-models-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Models &amp; Schemas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountAuthOperations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountAuthOperation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.AddAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AddAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.DisableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      DisableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.EnableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      EnableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.AccountAuthOperations.RemoveAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.address" class="md-nav__link">
    <span class="md-ellipsis">
      address
    </span>
  </a>
  
    <nav class="md-nav" aria-label="address">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address" class="md-nav__link">
    <span class="md-ellipsis">
      Address
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Address">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Address.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Lite" class="md-nav__link">
    <span class="md-ellipsis">
      Lite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.PrivateKey" class="md-nav__link">
    <span class="md-ellipsis">
      PrivateKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.PublicKey" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.PublicKeyHashAddress" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeyHashAddress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.Unknown" class="md-nav__link">
    <span class="md-ellipsis">
      Unknown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.format_address" class="md-nav__link">
    <span class="md-ellipsis">
      format_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.address.hash_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      hash_public_key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.auth" class="md-nav__link">
    <span class="md-ellipsis">
      auth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="auth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuth
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccountAuth">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.add_authority" class="md-nav__link">
    <span class="md-ellipsis">
      add_authority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.all_authorities_are_disabled" class="md-nav__link">
    <span class="md-ellipsis">
      all_authorities_are_disabled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.get_authority" class="md-nav__link">
    <span class="md-ellipsis">
      get_authority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.key_book" class="md-nav__link">
    <span class="md-ellipsis">
      key_book
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.manager_key_book" class="md-nav__link">
    <span class="md-ellipsis">
      manager_key_book
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AccountAuth.remove_authority" class="md-nav__link">
    <span class="md-ellipsis">
      remove_authority
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AuthorityEntry" class="md-nav__link">
    <span class="md-ellipsis">
      AuthorityEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthorityEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.auth.AuthorityEntry.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions" class="md-nav__link">
    <span class="md-ellipsis">
      base_transactions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_transactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.ExpireOptions" class="md-nav__link">
    <span class="md-ellipsis">
      ExpireOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExpireOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.ExpireOptions.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.HoldUntilOptions" class="md-nav__link">
    <span class="md-ellipsis">
      HoldUntilOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HoldUntilOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.HoldUntilOptions.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionBodyBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionBodyBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase._format_transaction_type" class="md-nav__link">
    <span class="md-ellipsis">
      _format_transaction_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.fields_to_encode" class="md-nav__link">
    <span class="md-ellipsis">
      fields_to_encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyBase.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyFactory" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionBodyFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionBodyFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionBodyFactory.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionHeader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionHeader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.build_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      build_transaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.base_transactions.TransactionHeader.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.credits" class="md-nav__link">
    <span class="md-ellipsis">
      credits
    </span>
  </a>
  
    <nav class="md-nav" aria-label="credits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount" class="md-nav__link">
    <span class="md-ellipsis">
      CreditsAccount
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreditsAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.can_debit_credits" class="md-nav__link">
    <span class="md-ellipsis">
      can_debit_credits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.credit_credits" class="md-nav__link">
    <span class="md-ellipsis">
      credit_credits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.debit_credits" class="md-nav__link">
    <span class="md-ellipsis">
      debit_credits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.credits.CreditsAccount.get_credit_balance" class="md-nav__link">
    <span class="md-ellipsis">
      get_credit_balance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.data_entries" class="md-nav__link">
    <span class="md-ellipsis">
      data_entries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="data_entries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.AccumulateDataEntry" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateDataEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AccumulateDataEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.AccumulateDataEntry.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.AccumulateDataEntry.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry" class="md-nav__link">
    <span class="md-ellipsis">
      DataEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.get_data" class="md-nav__link">
    <span class="md-ellipsis">
      get_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntry.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntryUtils" class="md-nav__link">
    <span class="md-ellipsis">
      DataEntryUtils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DataEntryUtils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntryUtils.calculate_data_entry_cost" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_data_entry_cost
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DataEntryUtils.check_data_entry_size" class="md-nav__link">
    <span class="md-ellipsis">
      check_data_entry_size
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry" class="md-nav__link">
    <span class="md-ellipsis">
      DoubleHashDataEntry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DoubleHashDataEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.data_entries.DoubleHashDataEntry.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.enums" class="md-nav__link">
    <span class="md-ellipsis">
      enums
    </span>
  </a>
  
    <nav class="md-nav" aria-label="enums">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.AccountAuthOperationType" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperationType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.AccountType" class="md-nav__link">
    <span class="md-ellipsis">
      AccountType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.BookType" class="md-nav__link">
    <span class="md-ellipsis">
      BookType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.DataEntryType" class="md-nav__link">
    <span class="md-ellipsis">
      DataEntryType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.EventType" class="md-nav__link">
    <span class="md-ellipsis">
      EventType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.ExecutorVersion" class="md-nav__link">
    <span class="md-ellipsis">
      ExecutorVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.KeyPageOperationType" class="md-nav__link">
    <span class="md-ellipsis">
      KeyPageOperationType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.KnownPeerStatus" class="md-nav__link">
    <span class="md-ellipsis">
      KnownPeerStatus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.QueryType" class="md-nav__link">
    <span class="md-ellipsis">
      QueryType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.QueryType.from_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.QueryType.to_rpc_format" class="md-nav__link">
    <span class="md-ellipsis">
      to_rpc_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.RecordType" class="md-nav__link">
    <span class="md-ellipsis">
      RecordType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.ServiceType" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType.is_anchor" class="md-nav__link">
    <span class="md-ellipsis">
      is_anchor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType.is_synthetic" class="md-nav__link">
    <span class="md-ellipsis">
      is_synthetic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.TransactionType.is_user" class="md-nav__link">
    <span class="md-ellipsis">
      is_user
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.VoteType" class="md-nav__link">
    <span class="md-ellipsis">
      VoteType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.enums.enum_from_name" class="md-nav__link">
    <span class="md-ellipsis">
      enum_from_name
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.errors" class="md-nav__link">
    <span class="md-ellipsis">
      errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.AccumulateError" class="md-nav__link">
    <span class="md-ellipsis">
      AccumulateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.EncodingError" class="md-nav__link">
    <span class="md-ellipsis">
      EncodingError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ErrorCode" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorCode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorCode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ErrorCode.from_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ErrorCode.success" class="md-nav__link">
    <span class="md-ellipsis">
      success
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.FailedError" class="md-nav__link">
    <span class="md-ellipsis">
      FailedError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.PanicError" class="md-nav__link">
    <span class="md-ellipsis">
      PanicError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.UnknownError" class="md-nav__link">
    <span class="md-ellipsis">
      UnknownError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.ValidationError" class="md-nav__link">
    <span class="md-ellipsis">
      ValidationError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.errors.raise_for_error_code" class="md-nav__link">
    <span class="md-ellipsis">
      raise_for_error_code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.events" class="md-nav__link">
    <span class="md-ellipsis">
      events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.BlockEvent" class="md-nav__link">
    <span class="md-ellipsis">
      BlockEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.BlockEvent.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.BlockEvent.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.ErrorEvent" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ErrorEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.ErrorEvent.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.ErrorEvent.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.GlobalsEvent" class="md-nav__link">
    <span class="md-ellipsis">
      GlobalsEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GlobalsEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.GlobalsEvent.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.events.GlobalsEvent.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.faucet" class="md-nav__link">
    <span class="md-ellipsis">
      faucet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="faucet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet" class="md-nav__link">
    <span class="md-ellipsis">
      Faucet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Faucet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet._generate_faucet_url" class="md-nav__link">
    <span class="md-ellipsis">
      _generate_faucet_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet.public_key" class="md-nav__link">
    <span class="md-ellipsis">
      public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.Faucet.signer" class="md-nav__link">
    <span class="md-ellipsis">
      signer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner" class="md-nav__link">
    <span class="md-ellipsis">
      FaucetSigner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FaucetSigner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.set_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      set_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.sign" class="md-nav__link">
    <span class="md-ellipsis">
      sign
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.faucet.FaucetSigner.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule" class="md-nav__link">
    <span class="md-ellipsis">
      fee_schedule
    </span>
  </a>
  
    <nav class="md-nav" aria-label="fee_schedule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule.Fee" class="md-nav__link">
    <span class="md-ellipsis">
      Fee
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule.FeeSchedule" class="md-nav__link">
    <span class="md-ellipsis">
      FeeSchedule
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeeSchedule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.fee_schedule.FeeSchedule.compute_transaction_fee" class="md-nav__link">
    <span class="md-ellipsis">
      compute_transaction_fee
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.general" class="md-nav__link">
    <span class="md-ellipsis">
      general
    </span>
  </a>
  
    <nav class="md-nav" aria-label="general">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.AccountAuth" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.AnchorMetadata" class="md-nav__link">
    <span class="md-ellipsis">
      AnchorMetadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.AuthorityEntry" class="md-nav__link">
    <span class="md-ellipsis">
      AuthorityEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.BlockEntry" class="md-nav__link">
    <span class="md-ellipsis">
      BlockEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient" class="md-nav__link">
    <span class="md-ellipsis">
      CreditRecipient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CreditRecipient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.CreditRecipient.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.FeeSchedule" class="md-nav__link">
    <span class="md-ellipsis">
      FeeSchedule
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.IndexEntry" class="md-nav__link">
    <span class="md-ellipsis">
      IndexEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.NetworkGlobals" class="md-nav__link">
    <span class="md-ellipsis">
      NetworkGlobals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.NetworkLimits" class="md-nav__link">
    <span class="md-ellipsis">
      NetworkLimits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.Object" class="md-nav__link">
    <span class="md-ellipsis">
      Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.TokenRecipient" class="md-nav__link">
    <span class="md-ellipsis">
      TokenRecipient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenRecipient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.general.TokenRecipient.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.key_management" class="md-nav__link">
    <span class="md-ellipsis">
      key_management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="key_management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.AddKeyOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AddKeyOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage" class="md-nav__link">
    <span class="md-ellipsis">
      KeyPage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeyPage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.add_key_spec" class="md-nav__link">
    <span class="md-ellipsis">
      add_key_spec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.entry_by_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      entry_by_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.get_m_of_n" class="md-nav__link">
    <span class="md-ellipsis">
      get_m_of_n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.remove_key_spec_at" class="md-nav__link">
    <span class="md-ellipsis">
      remove_key_spec_at
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeyPage.set_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      set_threshold
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpec" class="md-nav__link">
    <span class="md-ellipsis">
      KeySpec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeySpec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpec.get_last_used_on" class="md-nav__link">
    <span class="md-ellipsis">
      get_last_used_on
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpec.set_last_used_on" class="md-nav__link">
    <span class="md-ellipsis">
      set_last_used_on
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpecParams" class="md-nav__link">
    <span class="md-ellipsis">
      KeySpecParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeySpecParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpecParams.marshal" class="md-nav__link">
    <span class="md-ellipsis">
      marshal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.KeySpecParams.unmarshal" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.RemoveKeyOperation" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveKeyOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.SetRejectThresholdKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      SetRejectThresholdKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.SetResponseThresholdKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      SetResponseThresholdKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.SetThresholdKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      SetThresholdKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.UpdateAllowedKeyPageOperation" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateAllowedKeyPageOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_management.UpdateKeyOperation" class="md-nav__link">
    <span class="md-ellipsis">
      UpdateKeyOperation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.key_signature" class="md-nav__link">
    <span class="md-ellipsis">
      key_signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="key_signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature" class="md-nav__link">
    <span class="md-ellipsis">
      KeySignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KeySignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_signature" class="md-nav__link">
    <span class="md-ellipsis">
      get_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_signer_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.key_signature.KeySignature.get_timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      get_timestamp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.node_info" class="md-nav__link">
    <span class="md-ellipsis">
      node_info
    </span>
  </a>
  
    <nav class="md-nav" aria-label="node_info">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.node_info.NodeInfo" class="md-nav__link">
    <span class="md-ellipsis">
      NodeInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NodeInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.node_info.NodeInfo.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.node_info.NodeInfo.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.options" class="md-nav__link">
    <span class="md-ellipsis">
      options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.FaucetOptions" class="md-nav__link">
    <span class="md-ellipsis">
      FaucetOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.RangeOptions" class="md-nav__link">
    <span class="md-ellipsis">
      RangeOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RangeOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.RangeOptions.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ReceiptOptions" class="md-nav__link">
    <span class="md-ellipsis">
      ReceiptOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReceiptOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ReceiptOptions.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ReceiptOptions.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.SubmitOptions" class="md-nav__link">
    <span class="md-ellipsis">
      SubmitOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.SubscribeOptions" class="md-nav__link">
    <span class="md-ellipsis">
      SubscribeOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.options.ValidateOptions" class="md-nav__link">
    <span class="md-ellipsis">
      ValidateOptions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.protocol" class="md-nav__link">
    <span class="md-ellipsis">
      protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AccountWithTokens" class="md-nav__link">
    <span class="md-ellipsis">
      AccountWithTokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AddAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      AddAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions" class="md-nav__link">
    <span class="md-ellipsis">
      AllowedTransactions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AllowedTransactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.clear" class="md-nav__link">
    <span class="md-ellipsis">
      clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.get_enum_value" class="md-nav__link">
    <span class="md-ellipsis">
      get_enum_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.is_set" class="md-nav__link">
    <span class="md-ellipsis">
      is_set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.set_enum_value" class="md-nav__link">
    <span class="md-ellipsis">
      set_enum_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.AllowedTransactions.unpack" class="md-nav__link">
    <span class="md-ellipsis">
      unpack
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.DisableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      DisableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.EnableAccountAuthOperation" class="md-nav__link">
    <span class="md-ellipsis">
      EnableAccountAuthOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.LiteTokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      LiteTokenAccount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt" class="md-nav__link">
    <span class="md-ellipsis">
      Receipt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Receipt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt._validate_iso8601" class="md-nav__link">
    <span class="md-ellipsis">
      _validate_iso8601
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.Receipt.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.RemoveAccountAuthorityOperation" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveAccountAuthorityOperation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.TokenAccount" class="md-nav__link">
    <span class="md-ellipsis">
      TokenAccount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.TokenIssuer" class="md-nav__link">
    <span class="md-ellipsis">
      TokenIssuer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.acme_url" class="md-nav__link">
    <span class="md-ellipsis">
      acme_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.lite_data_address" class="md-nav__link">
    <span class="md-ellipsis">
      lite_data_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.lite_token_address" class="md-nav__link">
    <span class="md-ellipsis">
      lite_token_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.normalize_acc_url" class="md-nav__link">
    <span class="md-ellipsis">
      normalize_acc_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.parse_lite_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_lite_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.protocol.unknown_url" class="md-nav__link">
    <span class="md-ellipsis">
      unknown_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.responses" class="md-nav__link">
    <span class="md-ellipsis">
      responses
    </span>
  </a>
  
    <nav class="md-nav" aria-label="responses">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.SubmissionResponse" class="md-nav__link">
    <span class="md-ellipsis">
      SubmissionResponse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SubmissionResponse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.SubmissionResponse.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.SubmissionResponse.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionResultSet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TransactionResultSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet.add_result" class="md-nav__link">
    <span class="md-ellipsis">
      add_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.responses.TransactionResultSet.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.search" class="md-nav__link">
    <span class="md-ellipsis">
      search
    </span>
  </a>
  
    <nav class="md-nav" aria-label="search">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.AnchorSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      AnchorSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnchorSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.AnchorSearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.DelegateSearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      DelegateSearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DelegateSearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.DelegateSearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.PublicKeySearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeySearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeySearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.PublicKeySearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery" class="md-nav__link">
    <span class="md-ellipsis">
      SearchQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SearchQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery.is_valid" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.search.SearchQuery.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.service" class="md-nav__link">
    <span class="md-ellipsis">
      service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceOptions" class="md-nav__link">
    <span class="md-ellipsis">
      FindServiceOptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FindServiceOptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceOptions.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceOptions.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceResult" class="md-nav__link">
    <span class="md-ellipsis">
      FindServiceResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FindServiceResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceResult.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.FindServiceResult.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress" class="md-nav__link">
    <span class="md-ellipsis">
      ServiceAddress
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ServiceAddress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.parse_service_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_service_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.service.ServiceAddress.unpack_address" class="md-nav__link">
    <span class="md-ellipsis">
      unpack_address
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.signatures" class="md-nav__link">
    <span class="md-ellipsis">
      signatures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signatures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.AuthoritySignature" class="md-nav__link">
    <span class="md-ellipsis">
      AuthoritySignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AuthoritySignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.AuthoritySignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.DelegatedSignature" class="md-nav__link">
    <span class="md-ellipsis">
      DelegatedSignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DelegatedSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.DelegatedSignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature" class="md-nav__link">
    <span class="md-ellipsis">
      ECDSA_SHA256Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ECDSA_SHA256Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature.sign" class="md-nav__link">
    <span class="md-ellipsis">
      sign
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ECDSA_SHA256Signature.verify" class="md-nav__link">
    <span class="md-ellipsis">
      verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ED25519Signature" class="md-nav__link">
    <span class="md-ellipsis">
      ED25519Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ED25519Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ED25519Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ED25519Signature.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.EIP712Signature" class="md-nav__link">
    <span class="md-ellipsis">
      EIP712Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EIP712Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.EIP712Signature._encode_typed_data" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_typed_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.EIP712Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature" class="md-nav__link">
    <span class="md-ellipsis">
      ETHSignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ETHSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.get_signature" class="md-nav__link">
    <span class="md-ellipsis">
      get_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.ETHSignature.verify" class="md-nav__link">
    <span class="md-ellipsis">
      verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite" class="md-nav__link">
    <span class="md-ellipsis">
      Lite
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite.get_bytes" class="md-nav__link">
    <span class="md-ellipsis">
      get_bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Lite.get_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey" class="md-nav__link">
    <span class="md-ellipsis">
      PrivateKey
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrivateKey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.get_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PrivateKey.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKey
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.get_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKey.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash" class="md-nav__link">
    <span class="md-ellipsis">
      PublicKeyHash
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PublicKeyHash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash.get_public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_public_key_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.PublicKeyHash.get_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.RCD1Signature" class="md-nav__link">
    <span class="md-ellipsis">
      RCD1Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RCD1Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.RCD1Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.RCD1Signature.verify" class="md-nav__link">
    <span class="md-ellipsis">
      verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Signature" class="md-nav__link">
    <span class="md-ellipsis">
      Signature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Signature.encode" class="md-nav__link">
    <span class="md-ellipsis">
      encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.Signature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.SignatureFactory" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureFactory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.TypedDataSignature" class="md-nav__link">
    <span class="md-ellipsis">
      TypedDataSignature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TypedDataSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.TypedDataSignature._encode_typed_data" class="md-nav__link">
    <span class="md-ellipsis">
      _encode_typed_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.TypedDataSignature.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.do_btc_hash" class="md-nav__link">
    <span class="md-ellipsis">
      do_btc_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.signatures.do_eth_hash" class="md-nav__link">
    <span class="md-ellipsis">
      do_eth_hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results" class="md-nav__link">
    <span class="md-ellipsis">
      transaction_results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transaction_results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.AddCreditsResult" class="md-nav__link">
    <span class="md-ellipsis">
      AddCreditsResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.EmptyResult" class="md-nav__link">
    <span class="md-ellipsis">
      EmptyResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.TransactionResult" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.WriteDataResult" class="md-nav__link">
    <span class="md-ellipsis">
      WriteDataResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.copy_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      copy_transaction_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.deserialize_json" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.equal_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      equal_transaction_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.new_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      new_transaction_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.transaction_results.unmarshal_transaction_result" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_transaction_result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.txid" class="md-nav__link">
    <span class="md-ellipsis">
      txid
    </span>
  </a>
  
    <nav class="md-nav" aria-label="txid">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID" class="md-nav__link">
    <span class="md-ellipsis">
      TxID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TxID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.account" class="md-nav__link">
    <span class="md-ellipsis">
      account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.as_url" class="md-nav__link">
    <span class="md-ellipsis">
      as_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.json" class="md-nav__link">
    <span class="md-ellipsis">
      json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid.TxID.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.txid_set" class="md-nav__link">
    <span class="md-ellipsis">
      txid_set
    </span>
  </a>
  
    <nav class="md-nav" aria-label="txid_set">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet" class="md-nav__link">
    <span class="md-ellipsis">
      TxIdSet
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TxIdSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet.add" class="md-nav__link">
    <span class="md-ellipsis">
      add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet.contains_hash" class="md-nav__link">
    <span class="md-ellipsis">
      contains_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.txid_set.TxIdSet.remove" class="md-nav__link">
    <span class="md-ellipsis">
      remove
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.models.types" class="md-nav__link">
    <span class="md-ellipsis">
      types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.types.AtomicSlice" class="md-nav__link">
    <span class="md-ellipsis">
      AtomicSlice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AtomicSlice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.models.types.AtomicSlice.compare" class="md-nav__link">
    <span class="md-ellipsis">
      compare
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.models.types.AtomicUint" class="md-nav__link">
    <span class="md-ellipsis">
      AtomicUint
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" class="md-nav__link">
    <span class="md-ellipsis">
      Utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.conversion" class="md-nav__link">
    <span class="md-ellipsis">
      conversion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="conversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.conversion.camel_to_snake" class="md-nav__link">
    <span class="md-ellipsis">
      camel_to_snake
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.address_from" class="md-nav__link">
    <span class="md-ellipsis">
      address_from
    </span>
  </a>
  
    <nav class="md-nav" aria-label="address_from">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ecdsa_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ecdsa_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ecdsa_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ecdsa_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ed25519_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ed25519_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_ed25519_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_ed25519_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_eth_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_eth_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_private_key_bytes" class="md-nav__link">
    <span class="md-ellipsis">
      from_private_key_bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_rsa_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_rsa_private_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.from_rsa_public_key" class="md-nav__link">
    <span class="md-ellipsis">
      from_rsa_public_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_from.generate_ed25519_keypair" class="md-nav__link">
    <span class="md-ellipsis">
      generate_ed25519_keypair
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.encoding" class="md-nav__link">
    <span class="md-ellipsis">
      encoding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="encoding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.consume" class="md-nav__link">
    <span class="md-ellipsis">
      consume
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.decode_uvarint" class="md-nav__link">
    <span class="md-ellipsis">
      decode_uvarint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode" class="md-nav__link">
    <span class="md-ellipsis">
      encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode_compact_int" class="md-nav__link">
    <span class="md-ellipsis">
      encode_compact_int
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode_uvarint" class="md-nav__link">
    <span class="md-ellipsis">
      encode_uvarint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.encode_value" class="md-nav__link">
    <span class="md-ellipsis">
      encode_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.field_marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      field_marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.encoding.read_uvarint" class="md-nav__link">
    <span class="md-ellipsis">
      read_uvarint
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions" class="md-nav__link">
    <span class="md-ellipsis">
      hash_functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="hash_functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.LiteAuthorityForHash" class="md-nav__link">
    <span class="md-ellipsis">
      LiteAuthorityForHash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.LiteAuthorityForKey" class="md-nav__link">
    <span class="md-ellipsis">
      LiteAuthorityForKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.btc_address" class="md-nav__link">
    <span class="md-ellipsis">
      btc_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.compute_hash" class="md-nav__link">
    <span class="md-ellipsis">
      compute_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.eth_address" class="md-nav__link">
    <span class="md-ellipsis">
      eth_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.hash_data" class="md-nav__link">
    <span class="md-ellipsis">
      hash_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.hash_functions.public_key_hash" class="md-nav__link">
    <span class="md-ellipsis">
      public_key_hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-utils" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse" class="md-nav__link">
    <span class="md-ellipsis">
      address_parse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="address_parse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.is_wif_key" class="md-nav__link">
    <span class="md-ellipsis">
      is_wif_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_ac_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_ac_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_as_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_as_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_btc_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_btc_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_eth_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_eth_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_fa_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_fa_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_fs_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_fs_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_mh_address" class="md-nav__link">
    <span class="md-ellipsis">
      parse_mh_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_wif" class="md-nav__link">
    <span class="md-ellipsis">
      parse_wif
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_with_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      parse_with_checksum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.parse_with_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      parse_with_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.address_parse.verify_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      verify_checksum
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config" class="md-nav__link">
    <span class="md-ellipsis">
      Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.get_initial_oracle_value" class="md-nav__link">
    <span class="md-ellipsis">
      get_initial_oracle_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.get_network_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_network_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.initial_acme_oracle" class="md-nav__link">
    <span class="md-ellipsis">
      initial_acme_oracle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.config.Config.is_testnet" class="md-nav__link">
    <span class="md-ellipsis">
      is_testnet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.eip712" class="md-nav__link">
    <span class="md-ellipsis">
      eip712
    </span>
  </a>
  
    <nav class="md-nav" aria-label="eip712">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.eip712.eth_chain_id" class="md-nav__link">
    <span class="md-ellipsis">
      eth_chain_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.eip712.hash_eip712" class="md-nav__link">
    <span class="md-ellipsis">
      hash_eip712
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.eip712.marshal_eip712" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_eip712
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.fields" class="md-nav__link">
    <span class="md-ellipsis">
      fields
    </span>
  </a>
  
    <nav class="md-nav" aria-label="fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.BoolField" class="md-nav__link">
    <span class="md-ellipsis">
      BoolField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DateTimeField" class="md-nav__link">
    <span class="md-ellipsis">
      DateTimeField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField" class="md-nav__link">
    <span class="md-ellipsis">
      DurationField
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DurationField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.DurationField.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field" class="md-nav__link">
    <span class="md-ellipsis">
      Field
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Field">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.Field.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.FloatField" class="md-nav__link">
    <span class="md-ellipsis">
      FloatField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.IntField" class="md-nav__link">
    <span class="md-ellipsis">
      IntField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor" class="md-nav__link">
    <span class="md-ellipsis">
      ReadOnlyAccessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReadOnlyAccessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.copy_to" class="md-nav__link">
    <span class="md-ellipsis">
      copy_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.equal" class="md-nav__link">
    <span class="md-ellipsis">
      equal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.read_from" class="md-nav__link">
    <span class="md-ellipsis">
      read_from
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.ReadOnlyAccessor.write_to" class="md-nav__link">
    <span class="md-ellipsis">
      write_to
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.StringField" class="md-nav__link">
    <span class="md-ellipsis">
      StringField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.TimeAccessor" class="md-nav__link">
    <span class="md-ellipsis">
      TimeAccessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimeAccessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.fields.TimeAccessor.to_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.formatting" class="md-nav__link">
    <span class="md-ellipsis">
      formatting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="formatting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._calculate_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      _calculate_checksum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._format_with_checksum" class="md-nav__link">
    <span class="md-ellipsis">
      _format_with_checksum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._format_with_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      _format_with_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting._hash_with_algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      _hash_with_algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_ac1" class="md-nav__link">
    <span class="md-ellipsis">
      format_ac1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_ac2" class="md-nav__link">
    <span class="md-ellipsis">
      format_ac2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_ac3" class="md-nav__link">
    <span class="md-ellipsis">
      format_ac3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_as1" class="md-nav__link">
    <span class="md-ellipsis">
      format_as1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_as2" class="md-nav__link">
    <span class="md-ellipsis">
      format_as2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_as3" class="md-nav__link">
    <span class="md-ellipsis">
      format_as3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_btc" class="md-nav__link">
    <span class="md-ellipsis">
      format_btc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_eth" class="md-nav__link">
    <span class="md-ellipsis">
      format_eth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_fa" class="md-nav__link">
    <span class="md-ellipsis">
      format_fa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_fs" class="md-nav__link">
    <span class="md-ellipsis">
      format_fs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.formatting.format_mh" class="md-nav__link">
    <span class="md-ellipsis">
      format_mh
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      import_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="import_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers.get_signer" class="md-nav__link">
    <span class="md-ellipsis">
      get_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers.is_lite_account_lazy" class="md-nav__link">
    <span class="md-ellipsis">
      is_lite_account_lazy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.import_helpers.query_signer_version" class="md-nav__link">
    <span class="md-ellipsis">
      query_signer_version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.protocols" class="md-nav__link">
    <span class="md-ellipsis">
      protocols
    </span>
  </a>
  
    <nav class="md-nav" aria-label="protocols">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue" class="md-nav__link">
    <span class="md-ellipsis">
      BinaryValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BinaryValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.copy_as_interface" class="md-nav__link">
    <span class="md-ellipsis">
      copy_as_interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.unmarshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.BinaryValue.unmarshal_binary_from" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_binary_from
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.UnionValue" class="md-nav__link">
    <span class="md-ellipsis">
      UnionValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnionValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.protocols.UnionValue.unmarshal_fields_from" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_fields_from
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.rational" class="md-nav__link">
    <span class="md-ellipsis">
      rational
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rational">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.rational.Rational" class="md-nav__link">
    <span class="md-ellipsis">
      Rational
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rational">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.rational.Rational.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.rational.Rational.threshold" class="md-nav__link">
    <span class="md-ellipsis">
      threshold
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.union" class="md-nav__link">
    <span class="md-ellipsis">
      union
    </span>
  </a>
  
    <nav class="md-nav" aria-label="union">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue" class="md-nav__link">
    <span class="md-ellipsis">
      UnionValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnionValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.copy" class="md-nav__link">
    <span class="md-ellipsis">
      copy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.marshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.marshal_json" class="md-nav__link">
    <span class="md-ellipsis">
      marshal_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.unmarshal_binary" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_binary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.union.UnionValue.unmarshal_json" class="md-nav__link">
    <span class="md-ellipsis">
      unmarshal_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.url" class="md-nav__link">
    <span class="md-ellipsis">
      url
    </span>
  </a>
  
    <nav class="md-nav" aria-label="url">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.InvalidHashError" class="md-nav__link">
    <span class="md-ellipsis">
      InvalidHashError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.MissingHashError" class="md-nav__link">
    <span class="md-ellipsis">
      MissingHashError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.MissingHostError" class="md-nav__link">
    <span class="md-ellipsis">
      MissingHostError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="URL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.__lt__" class="md-nav__link">
    <span class="md-ellipsis">
      __lt__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL._normalize_path" class="md-nav__link">
    <span class="md-ellipsis">
      _normalize_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.account_id" class="md-nav__link">
    <span class="md-ellipsis">
      account_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.hash" class="md-nav__link">
    <span class="md-ellipsis">
      hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.identity" class="md-nav__link">
    <span class="md-ellipsis">
      identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.identity_id" class="md-nav__link">
    <span class="md-ellipsis">
      identity_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.is_key_page_url" class="md-nav__link">
    <span class="md-ellipsis">
      is_key_page_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.root_identity" class="md-nav__link">
    <span class="md-ellipsis">
      root_identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.strip_extras" class="md-nav__link">
    <span class="md-ellipsis">
      strip_extras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.valid_utf8" class="md-nav__link">
    <span class="md-ellipsis">
      valid_utf8
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.with_path" class="md-nav__link">
    <span class="md-ellipsis">
      with_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.with_query" class="md-nav__link">
    <span class="md-ellipsis">
      with_query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URL.with_user_info" class="md-nav__link">
    <span class="md-ellipsis">
      with_user_info
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.URLParseError" class="md-nav__link">
    <span class="md-ellipsis">
      URLParseError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.url.WrongSchemeError" class="md-nav__link">
    <span class="md-ellipsis">
      WrongSchemeError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.utils.validation" class="md-nav__link">
    <span class="md-ellipsis">
      validation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="validation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.is_lite_account" class="md-nav__link">
    <span class="md-ellipsis">
      is_lite_account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.is_reserved_url" class="md-nav__link">
    <span class="md-ellipsis">
      is_reserved_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.is_valid_adi_url" class="md-nav__link">
    <span class="md-ellipsis">
      is_valid_adi_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.process_signer_url" class="md-nav__link">
    <span class="md-ellipsis">
      process_signer_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.utils.validation.validate_accumulate_url" class="md-nav__link">
    <span class="md-ellipsis">
      validate_accumulate_url
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing" class="md-nav__link">
    <span class="md-ellipsis">
      Signing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.builder" class="md-nav__link">
    <span class="md-ellipsis">
      builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder" class="md-nav__link">
    <span class="md-ellipsis">
      Builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder._create_signature" class="md-nav__link">
    <span class="md-ellipsis">
      _create_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.initiate" class="md-nav__link">
    <span class="md-ellipsis">
      initiate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.prepare" class="md-nav__link">
    <span class="md-ellipsis">
      prepare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.set_signer" class="md-nav__link">
    <span class="md-ellipsis">
      set_signer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.builder.Builder.sign" class="md-nav__link">
    <span class="md-ellipsis">
      sign
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler" class="md-nav__link">
    <span class="md-ellipsis">
      signature_handler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signature_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler" class="md-nav__link">
    <span class="md-ellipsis">
      SignatureHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SignatureHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.btc_address" class="md-nav__link">
    <span class="md-ellipsis">
      btc_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.create_authority_signature" class="md-nav__link">
    <span class="md-ellipsis">
      create_authority_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.eth_address" class="md-nav__link">
    <span class="md-ellipsis">
      eth_address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_btc" class="md-nav__link">
    <span class="md-ellipsis">
      sign_btc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_delegated_signature" class="md-nav__link">
    <span class="md-ellipsis">
      sign_delegated_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_ecdsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      sign_ecdsa_sha256
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_ed25519" class="md-nav__link">
    <span class="md-ellipsis">
      sign_ed25519
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_eth" class="md-nav__link">
    <span class="md-ellipsis">
      sign_eth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_rsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      sign_rsa_sha256
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.sign_typed_data" class="md-nav__link">
    <span class="md-ellipsis">
      sign_typed_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_authority_signature" class="md-nav__link">
    <span class="md-ellipsis">
      verify_authority_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_btc" class="md-nav__link">
    <span class="md-ellipsis">
      verify_btc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_delegated_signature" class="md-nav__link">
    <span class="md-ellipsis">
      verify_delegated_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_ecdsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      verify_ecdsa_sha256
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_ed25519" class="md-nav__link">
    <span class="md-ellipsis">
      verify_ed25519
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_eth" class="md-nav__link">
    <span class="md-ellipsis">
      verify_eth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_merkle_hash" class="md-nav__link">
    <span class="md-ellipsis">
      verify_merkle_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signature_handler.SignatureHandler.verify_rsa_sha256" class="md-nav__link">
    <span class="md-ellipsis">
      verify_rsa_sha256
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.signer" class="md-nav__link">
    <span class="md-ellipsis">
      signer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer" class="md-nav__link">
    <span class="md-ellipsis">
      Signer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.calculate_metadata_hash" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_metadata_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.get_signature_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_signature_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.sign_and_submit_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      sign_and_submit_transaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.signer.Signer.sign_transaction" class="md-nav__link">
    <span class="md-ellipsis">
      sign_transaction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      timestamp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="timestamp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.Timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timestamp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.Timestamp.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromValue" class="md-nav__link">
    <span class="md-ellipsis">
      TimestampFromValue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimestampFromValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromValue.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromVariable" class="md-nav__link">
    <span class="md-ellipsis">
      TimestampFromVariable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TimestampFromVariable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromVariable.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accumulate.signing.timestamp.TimestampFromVariable.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<p>Detailed auto-generated reference for <strong>Accumulate Python Client</strong>.</p>
<hr />
<h2 id="client">Client<a class="headerlink" href="#client" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.api.client" class="doc doc-heading">
            <code>client</code>


<a href="#accumulate.api.client" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.api.client.AccumulateClient" class="doc doc-heading">
            <code>AccumulateClient</code>


<a href="#accumulate.api.client.AccumulateClient" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Client for interacting with the Accumulate JSON-RPC API with a persistent auto-incrementing request ID.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\client.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccumulateClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Client for interacting with the Accumulate JSON-RPC API with a persistent auto-incrementing request ID.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="ow">or</span> <span class="n">get_accumulate_rpc_url</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="n">RoutedTransport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_counter</span> <span class="o">=</span> <span class="n">load_counter</span><span class="p">()</span>  <span class="c1"># Load last used ID</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">json_rpc_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a JSON-RPC request with an auto-incrementing ID stored persistently.&quot;&quot;&quot;</span>
        <span class="n">rpc_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_counter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">save_counter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id_counter</span><span class="p">)</span>  <span class="c1"># Save new counter value</span>

        <span class="n">json_rpc_payload</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
            <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span> <span class="ow">or</span> <span class="p">{},</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">rpc_id</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RPC Request: </span><span class="si">{</span><span class="n">json_rpc_payload</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;v3&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json_rpc_payload</span><span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RPC Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON-RPC request failed (</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Unknown error&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON-RPC request failed (</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON-RPC request failed (</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">envelope</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Submit a transaction to the Accumulate network.</span>

<span class="sd">        Args:</span>
<span class="sd">            envelope (Dict[str, Any]): The transaction envelope containing transactions and signatures.</span>
<span class="sd">            verify (bool, optional): If True, verifies the envelope before submission. Defaults to True.</span>
<span class="sd">            wait (bool, optional): If True, blocks until submission is confirmed or rejected. Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: The API response containing transaction details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Envelope must be a dictionary.&quot;</span><span class="p">)</span>

        <span class="c1">#  Ensure the envelope has &quot;signatures&quot; (FIRST in order)</span>
        <span class="k">if</span> <span class="s2">&quot;signatures&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">envelope</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Envelope must contain at least one signature in a list.&quot;</span><span class="p">)</span>

        <span class="c1">#  Ensure &quot;transaction&quot; is correctly structured (SECOND in order)</span>
        <span class="k">if</span> <span class="s2">&quot;transaction&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">envelope</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Envelope must contain at least one transaction in a list.&quot;</span><span class="p">)</span>

        <span class="c1">#  Validate transaction structure</span>
        <span class="k">for</span> <span class="n">txn</span> <span class="ow">in</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each transaction must be a dictionary.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;header&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">txn</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">[</span><span class="s2">&quot;header&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each transaction must contain a &#39;header&#39; as a dictionary.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;body&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">txn</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each transaction must contain a &#39;body&#39; as a dictionary.&quot;</span><span class="p">)</span>

            <span class="c1">#  Ensure transactionHash (if exists) is properly formatted</span>
            <span class="k">if</span> <span class="s2">&quot;transactionHash&quot;</span> <span class="ow">in</span> <span class="n">txn</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">[</span><span class="s2">&quot;transactionHash&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction hash must be a raw hex string.&quot;</span><span class="p">)</span>

        <span class="c1">#  Order envelope fields correctly</span>
        <span class="n">ordered_envelope</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;signatures&quot;</span><span class="p">:</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">],</span>  <span class="c1"># Signatures First</span>
            <span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">],</span>  <span class="c1"># Transactions Second</span>
        <span class="p">}</span>

        <span class="c1">#  Include messages if they exist (LAST in order)</span>
        <span class="k">if</span> <span class="s2">&quot;messages&quot;</span> <span class="ow">in</span> <span class="n">envelope</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">ordered_envelope</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;envelope&quot;</span><span class="p">:</span> <span class="n">ordered_envelope</span><span class="p">,</span>
            <span class="s2">&quot;verify&quot;</span><span class="p">:</span> <span class="n">verify</span><span class="p">,</span>
            <span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="n">wait</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1">#  Debugging Before JSON Serialization</span>
        <span class="k">for</span> <span class="n">sig</span> <span class="ow">in</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutine</span><span class="p">(</span><span class="n">sig</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Signature contains an unawaited coroutine: </span><span class="si">{</span><span class="n">sig</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">json_params</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Convert Python dict to JSON string</span>
        <span class="n">formatted_params</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_params</span><span class="p">)</span>  <span class="c1"># Convert JSON string back to dict (ensures double quotes)</span>

        <span class="c1">#  Log the final envelope before submission</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; Debug: Final Submission Payload&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">formatted_params</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="n">formatted_params</span><span class="p">)</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">envelope</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">full</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate a transaction envelope against the Accumulate network using JSON-RPC&quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;envelope&quot;</span><span class="p">:</span> <span class="n">envelope</span><span class="p">,</span> <span class="s2">&quot;full&quot;</span><span class="p">:</span> <span class="n">full</span><span class="p">}</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;validate&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query a minor or major block.</span>

<span class="sd">        Args:</span>
<span class="sd">            block_type (str): Either &quot;minor&quot; or &quot;major&quot;</span>
<span class="sd">            index (Optional[int]): Block index (if querying a specific block)</span>
<span class="sd">            start (Optional[int]): Start index for range queries</span>
<span class="sd">            count (Optional[int]): Number of blocks to retrieve in range queries</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: JSON response from the API</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">block_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;minor&quot;</span><span class="p">,</span> <span class="s2">&quot;major&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid block type. Must be &#39;minor&#39; or &#39;major&#39;.&quot;</span><span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">#  Query a specific minor or major block</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/block/</span><span class="si">{</span><span class="n">block_type</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">block_type</span> <span class="o">==</span> <span class="s2">&quot;major&quot;</span><span class="p">:</span>
                <span class="c1">#  Fetch the first 3 minor blocks within the major block</span>
                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;minor_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;minor_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;omit_empty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Exclude empty minor blocks</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#  Query a block range</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/block/</span><span class="si">{</span><span class="n">block_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">start</span>
            <span class="k">if</span> <span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">params</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; HTTP Request: GET </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> with params </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; API request returned no response.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block query failed: No response received.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; API request failed: </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block query failed: </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="s1">&#39;message&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Record</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Submit a query to the Accumulate network using JSON-RPC.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid query.&quot;</span><span class="p">)</span>

        <span class="c1"># Convert query to dictionary</span>
        <span class="n">query_dict</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">query_dict</span><span class="p">[</span><span class="s2">&quot;queryType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">()</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="n">scope</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query_dict</span><span class="p">}</span>

        <span class="c1">#  DEBUG: Log raw API request</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Sending Query Request: </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

        <span class="c1">#  DEBUG: Log raw API response</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Raw API Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2"> (Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="c1">#  If response is a string, try parsing it as JSON</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Decoded String Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API returned an invalid JSON string: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Ensure response is a dictionary</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected API response format: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2"> (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="c1">#  Convert API response keys from camelCase to snake_case</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="n">camel_to_snake</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

        <span class="k">if</span> <span class="s2">&quot;record_type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response format: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">record_type</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;record_type&quot;</span><span class="p">]</span>

        <span class="c1">#  Ensure consistency with RecordType enum</span>
        <span class="n">record_mapping</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">ACCOUNT</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">AccountRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">CHAIN</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">ChainRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">MESSAGE</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">MessageRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">CHAIN_ENTRY</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">ChainEntryRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">KEY</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">KeyRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">SIGNATURE_SET</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">SignatureSetRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">URL</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">UrlRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">TX_ID</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">TxIDRecord</span><span class="p">,</span>
            <span class="n">RecordType</span><span class="o">.</span><span class="n">RANGE</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">RecordRange</span><span class="p">,</span>
            <span class="s2">&quot;directory&quot;</span><span class="p">:</span> <span class="n">RecordRange</span><span class="p">,</span>  <span class="c1"># Some APIs might return this as &#39;directory&#39;</span>
        <span class="p">}</span>

        <span class="n">record_cls</span> <span class="o">=</span> <span class="n">record_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record_type</span><span class="p">,</span> <span class="n">Record</span><span class="p">)</span>  <span class="c1"># Default to Record if unknown</span>

        <span class="c1">#  Ensure return type is correct</span>
        <span class="n">record_obj</span> <span class="o">=</span> <span class="n">record_cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Processed Query Response: </span><span class="si">{</span><span class="n">record_obj</span><span class="si">}</span><span class="s2"> (Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">record_obj</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">record_obj</span>  <span class="c1"># This should return an object with is_valid()</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Search an account for an anchor, public key, or delegate using JSON-RPC.</span>

<span class="sd">        Args:</span>
<span class="sd">            account_id (str): The account ID to search within.</span>
<span class="sd">            search_type (str): The type of search. Must be &#39;anchor&#39;, &#39;publicKey&#39;, or &#39;delegate&#39;.</span>
<span class="sd">            value (str): The value to search for (anchor hash, public key, or delegate URL).</span>
<span class="sd">            extra_params (Optional[Dict[str, Any]]): Additional query parameters.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: JSON response from the API.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">search_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;publicKey&quot;</span><span class="p">,</span> <span class="s2">&quot;delegate&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid search type. Must be &#39;anchor&#39;, &#39;publicKey&#39;, or &#39;delegate&#39;.&quot;</span><span class="p">)</span>

        <span class="c1">#  Ensure correct JSON-RPC format</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="n">account_id</span><span class="p">,</span>
            <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="n">search_type</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">#  Merge optional parameters if provided</span>
        <span class="k">if</span> <span class="n">extra_params</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra_params</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; RPC Request: </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;search&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; API request returned no response.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Search query failed: No response received.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">network_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch the current network status from the Accumulate blockchain.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: JSON response containing network status details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;network-status&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Network status query returned no response.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Network status query failed: No response received.&quot;</span><span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Network Status Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to fetch network status: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Network status query failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">faucet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">token_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Submission</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Request tokens from the Accumulate faucet using JSON-RPC&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">account</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Account URL must be provided&quot;</span><span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="n">account</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">token_url</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">token_url</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;faucet&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">response</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">FindServiceOptions</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">FindServiceResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find available services on the Accumulate network using JSON-RPC&quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>  <span class="c1"># Converts to correct JSON-RPC format</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;find-service&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">FindServiceResult</span><span class="p">(</span>
            <span class="n">peer_id</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peer_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">status</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">addresses</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;addresses&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">)</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve network metrics such as transactions per second using JSON-RPC&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;metrics&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_snapshots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List available blockchain snapshots using JSON-RPC&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;list-snapshots&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the transport connection&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;🔌 Closing AccumulateClient transport connection&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.close" class="doc doc-heading">
            <code class=" language-python"><span class="n">close</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.close" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Close the transport connection</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Close the transport connection&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;🔌 Closing AccumulateClient transport connection&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.faucet" class="doc doc-heading">
            <code class=" language-python"><span class="n">faucet</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">token_url</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.faucet" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Request tokens from the Accumulate faucet using JSON-RPC</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">faucet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">token_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Submission</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Request tokens from the Accumulate faucet using JSON-RPC&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">account</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Account URL must be provided&quot;</span><span class="p">)</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="n">account</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">token_url</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;token&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">token_url</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;faucet&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Submission</span><span class="p">(</span><span class="o">**</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.find_service" class="doc doc-heading">
            <code class=" language-python"><span class="n">find_service</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.find_service" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Find available services on the Accumulate network using JSON-RPC</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">find_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">FindServiceOptions</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">FindServiceResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find available services on the Accumulate network using JSON-RPC&quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>  <span class="c1"># Converts to correct JSON-RPC format</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;find-service&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">FindServiceResult</span><span class="p">(</span>
        <span class="n">peer_id</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peer_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">status</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">addresses</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;addresses&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="p">)</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">response</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.json_rpc_request" class="doc doc-heading">
            <code class=" language-python"><span class="n">json_rpc_request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.json_rpc_request" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Send a JSON-RPC request with an auto-incrementing ID stored persistently.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">json_rpc_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a JSON-RPC request with an auto-incrementing ID stored persistently.&quot;&quot;&quot;</span>
    <span class="n">rpc_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_counter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">save_counter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id_counter</span><span class="p">)</span>  <span class="c1"># Save new counter value</span>

    <span class="n">json_rpc_payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span> <span class="ow">or</span> <span class="p">{},</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">rpc_id</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RPC Request: </span><span class="si">{</span><span class="n">json_rpc_payload</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;v3&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json_rpc_payload</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RPC Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON-RPC request failed (</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Unknown error&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON-RPC request failed (</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JSON-RPC request failed (</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.list_snapshots" class="doc doc-heading">
            <code class=" language-python"><span class="n">list_snapshots</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.list_snapshots" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>List available blockchain snapshots using JSON-RPC</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_snapshots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List available blockchain snapshots using JSON-RPC&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;list-snapshots&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.metrics" class="doc doc-heading">
            <code class=" language-python"><span class="n">metrics</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.metrics" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve network metrics such as transactions per second using JSON-RPC</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve network metrics such as transactions per second using JSON-RPC&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;metrics&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.network_status" class="doc doc-heading">
            <code class=" language-python"><span class="n">network_status</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.network_status" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Fetch the current network status from the Accumulate blockchain.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Any]: JSON response containing network status details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">network_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch the current network status from the Accumulate blockchain.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Any]: JSON response containing network status details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;network-status&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Network status query returned no response.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Network status query failed: No response received.&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Network Status Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to fetch network status: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Network status query failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.query" class="doc doc-heading">
            <code class=" language-python"><span class="n">query</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.query" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Submit a query to the Accumulate network using JSON-RPC.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Record</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Submit a query to the Accumulate network using JSON-RPC.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid query.&quot;</span><span class="p">)</span>

    <span class="c1"># Convert query to dictionary</span>
    <span class="n">query_dict</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="n">query_dict</span><span class="p">[</span><span class="s2">&quot;queryType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">()</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="n">scope</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query_dict</span><span class="p">}</span>

    <span class="c1">#  DEBUG: Log raw API request</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Sending Query Request: </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="c1">#  DEBUG: Log raw API response</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Raw API Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2"> (Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="c1">#  If response is a string, try parsing it as JSON</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Decoded String Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API returned an invalid JSON string: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Ensure response is a dictionary</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected API response format: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2"> (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="c1">#  Convert API response keys from camelCase to snake_case</span>
    <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="n">camel_to_snake</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

    <span class="k">if</span> <span class="s2">&quot;record_type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response format: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">record_type</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;record_type&quot;</span><span class="p">]</span>

    <span class="c1">#  Ensure consistency with RecordType enum</span>
    <span class="n">record_mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">ACCOUNT</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">AccountRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">CHAIN</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">ChainRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">MESSAGE</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">MessageRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">CHAIN_ENTRY</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">ChainEntryRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">KEY</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">KeyRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">SIGNATURE_SET</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">SignatureSetRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">URL</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">UrlRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">TX_ID</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">TxIDRecord</span><span class="p">,</span>
        <span class="n">RecordType</span><span class="o">.</span><span class="n">RANGE</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">RecordRange</span><span class="p">,</span>
        <span class="s2">&quot;directory&quot;</span><span class="p">:</span> <span class="n">RecordRange</span><span class="p">,</span>  <span class="c1"># Some APIs might return this as &#39;directory&#39;</span>
    <span class="p">}</span>

    <span class="n">record_cls</span> <span class="o">=</span> <span class="n">record_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record_type</span><span class="p">,</span> <span class="n">Record</span><span class="p">)</span>  <span class="c1"># Default to Record if unknown</span>

    <span class="c1">#  Ensure return type is correct</span>
    <span class="n">record_obj</span> <span class="o">=</span> <span class="n">record_cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Processed Query Response: </span><span class="si">{</span><span class="n">record_obj</span><span class="si">}</span><span class="s2"> (Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">record_obj</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">record_obj</span>  <span class="c1"># This should return an object with is_valid()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.query_block" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_block</span><span class="p">(</span><span class="n">block_type</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.query_block" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query a minor or major block.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>block_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Either "minor" or "major"</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>index</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block index (if querying a specific block)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Start index for range queries</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>count</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of blocks to retrieve in range queries</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JSON response from the API</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Query a minor or major block.</span>

<span class="sd">    Args:</span>
<span class="sd">        block_type (str): Either &quot;minor&quot; or &quot;major&quot;</span>
<span class="sd">        index (Optional[int]): Block index (if querying a specific block)</span>
<span class="sd">        start (Optional[int]): Start index for range queries</span>
<span class="sd">        count (Optional[int]): Number of blocks to retrieve in range queries</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: JSON response from the API</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">block_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;minor&quot;</span><span class="p">,</span> <span class="s2">&quot;major&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid block type. Must be &#39;minor&#39; or &#39;major&#39;.&quot;</span><span class="p">)</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1">#  Query a specific minor or major block</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/block/</span><span class="si">{</span><span class="n">block_type</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">block_type</span> <span class="o">==</span> <span class="s2">&quot;major&quot;</span><span class="p">:</span>
            <span class="c1">#  Fetch the first 3 minor blocks within the major block</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;minor_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;minor_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;omit_empty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Exclude empty minor blocks</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#  Query a block range</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/block/</span><span class="si">{</span><span class="n">block_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">start</span>
        <span class="k">if</span> <span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; HTTP Request: GET </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> with params </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; API request returned no response.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block query failed: No response received.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; API request failed: </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block query failed: </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="s1">&#39;message&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.search" class="doc doc-heading">
            <code class=" language-python"><span class="n">search</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">search_type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">extra_params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.search" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Search an account for an anchor, public key, or delegate using JSON-RPC.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>account_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The account ID to search within.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>search_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of search. Must be 'anchor', 'publicKey', or 'delegate'.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to search for (anchor hash, public key, or delegate URL).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>extra_params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional query parameters.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JSON response from the API.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search an account for an anchor, public key, or delegate using JSON-RPC.</span>

<span class="sd">    Args:</span>
<span class="sd">        account_id (str): The account ID to search within.</span>
<span class="sd">        search_type (str): The type of search. Must be &#39;anchor&#39;, &#39;publicKey&#39;, or &#39;delegate&#39;.</span>
<span class="sd">        value (str): The value to search for (anchor hash, public key, or delegate URL).</span>
<span class="sd">        extra_params (Optional[Dict[str, Any]]): Additional query parameters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: JSON response from the API.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">search_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;publicKey&quot;</span><span class="p">,</span> <span class="s2">&quot;delegate&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid search type. Must be &#39;anchor&#39;, &#39;publicKey&#39;, or &#39;delegate&#39;.&quot;</span><span class="p">)</span>

    <span class="c1">#  Ensure correct JSON-RPC format</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="n">account_id</span><span class="p">,</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="n">search_type</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">#  Merge optional parameters if provided</span>
    <span class="k">if</span> <span class="n">extra_params</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra_params</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; RPC Request: </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;search&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; API request returned no response.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Search query failed: No response received.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.submit" class="doc doc-heading">
            <code class=" language-python"><span class="n">submit</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.submit" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Submit a transaction to the Accumulate network.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>envelope</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The transaction envelope containing transactions and signatures.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verify</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, verifies the envelope before submission. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>wait</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, blocks until submission is confirmed or rejected. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Any]: The API response containing transaction details.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">envelope</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Submit a transaction to the Accumulate network.</span>

<span class="sd">    Args:</span>
<span class="sd">        envelope (Dict[str, Any]): The transaction envelope containing transactions and signatures.</span>
<span class="sd">        verify (bool, optional): If True, verifies the envelope before submission. Defaults to True.</span>
<span class="sd">        wait (bool, optional): If True, blocks until submission is confirmed or rejected. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Any]: The API response containing transaction details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Envelope must be a dictionary.&quot;</span><span class="p">)</span>

    <span class="c1">#  Ensure the envelope has &quot;signatures&quot; (FIRST in order)</span>
    <span class="k">if</span> <span class="s2">&quot;signatures&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">envelope</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Envelope must contain at least one signature in a list.&quot;</span><span class="p">)</span>

    <span class="c1">#  Ensure &quot;transaction&quot; is correctly structured (SECOND in order)</span>
    <span class="k">if</span> <span class="s2">&quot;transaction&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">envelope</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Envelope must contain at least one transaction in a list.&quot;</span><span class="p">)</span>

    <span class="c1">#  Validate transaction structure</span>
    <span class="k">for</span> <span class="n">txn</span> <span class="ow">in</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each transaction must be a dictionary.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;header&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">txn</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">[</span><span class="s2">&quot;header&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each transaction must contain a &#39;header&#39; as a dictionary.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;body&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">txn</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each transaction must contain a &#39;body&#39; as a dictionary.&quot;</span><span class="p">)</span>

        <span class="c1">#  Ensure transactionHash (if exists) is properly formatted</span>
        <span class="k">if</span> <span class="s2">&quot;transactionHash&quot;</span> <span class="ow">in</span> <span class="n">txn</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="p">[</span><span class="s2">&quot;transactionHash&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction hash must be a raw hex string.&quot;</span><span class="p">)</span>

    <span class="c1">#  Order envelope fields correctly</span>
    <span class="n">ordered_envelope</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;signatures&quot;</span><span class="p">:</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">],</span>  <span class="c1"># Signatures First</span>
        <span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;transaction&quot;</span><span class="p">],</span>  <span class="c1"># Transactions Second</span>
    <span class="p">}</span>

    <span class="c1">#  Include messages if they exist (LAST in order)</span>
    <span class="k">if</span> <span class="s2">&quot;messages&quot;</span> <span class="ow">in</span> <span class="n">envelope</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">ordered_envelope</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;envelope&quot;</span><span class="p">:</span> <span class="n">ordered_envelope</span><span class="p">,</span>
        <span class="s2">&quot;verify&quot;</span><span class="p">:</span> <span class="n">verify</span><span class="p">,</span>
        <span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="n">wait</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1">#  Debugging Before JSON Serialization</span>
    <span class="k">for</span> <span class="n">sig</span> <span class="ow">in</span> <span class="n">envelope</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">iscoroutine</span><span class="p">(</span><span class="n">sig</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Signature contains an unawaited coroutine: </span><span class="si">{</span><span class="n">sig</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">json_params</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Convert Python dict to JSON string</span>
    <span class="n">formatted_params</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_params</span><span class="p">)</span>  <span class="c1"># Convert JSON string back to dict (ensures double quotes)</span>

    <span class="c1">#  Log the final envelope before submission</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; Debug: Final Submission Payload&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">formatted_params</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="n">formatted_params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.client.AccumulateClient.validate" class="doc doc-heading">
            <code class=" language-python"><span class="n">validate</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.client.AccumulateClient.validate" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate a transaction envelope against the Accumulate network using JSON-RPC</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">envelope</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">full</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate a transaction envelope against the Accumulate network using JSON-RPC&quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;envelope&quot;</span><span class="p">:</span> <span class="n">envelope</span><span class="p">,</span> <span class="s2">&quot;full&quot;</span><span class="p">:</span> <span class="n">full</span><span class="p">}</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;validate&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.api.client.load_counter" class="doc doc-heading">
            <code class=" language-python"><span class="n">load_counter</span><span class="p">()</span></code>

<a href="#accumulate.api.client.load_counter" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Load the last used request ID from file or start at 1 if missing.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_counter</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load the last used request ID from file or start at 1 if missing.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">ID_COUNTER_FILE</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">ID_COUNTER_FILE</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.api.client.save_counter" class="doc doc-heading">
            <code class=" language-python"><span class="n">save_counter</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span></code>

<a href="#accumulate.api.client.save_counter" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Save the current counter value to the file.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\client.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_counter</span><span class="p">(</span><span class="n">counter</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the current counter value to the file.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">ID_COUNTER_FILE</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">counter</span><span class="p">},</span> <span class="n">f</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="api-core-context-transport-querier-exceptions">API Core (Context, Transport, Querier, Exceptions)<a class="headerlink" href="#api-core-context-transport-querier-exceptions" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.api.context" class="doc doc-heading">
            <code>context</code>


<a href="#accumulate.api.context" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.api.context.RequestContext" class="doc doc-heading">
            <code>RequestContext</code>


<a href="#accumulate.api.context.RequestContext" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents the context for a request, including metadata and optional cancellation tokens.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\context.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RequestContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the context for a request, including metadata and optional cancellation tokens.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the RequestContext with optional metadata.</span>
<span class="sd">        :param metadata: A dictionary containing request-specific metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve a value from the context metadata.</span>
<span class="sd">        :param key: Metadata key.</span>
<span class="sd">        :return: Metadata value or None if the key does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set a value in the context metadata.</span>
<span class="sd">        :param key: Metadata key.</span>
<span class="sd">        :param value: Metadata value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.api.context.RequestContext.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.api.context.RequestContext.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize the RequestContext with optional metadata.
:param metadata: A dictionary containing request-specific metadata.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\context.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the RequestContext with optional metadata.</span>
<span class="sd">    :param metadata: A dictionary containing request-specific metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.context.RequestContext.get_metadata" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_metadata</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.api.context.RequestContext.get_metadata" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve a value from the context metadata.
:param key: Metadata key.
:return: Metadata value or None if the key does not exist.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\context.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve a value from the context metadata.</span>
<span class="sd">    :param key: Metadata key.</span>
<span class="sd">    :return: Metadata value or None if the key does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.context.RequestContext.set_metadata" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_metadata</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.api.context.RequestContext.set_metadata" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set a value in the context metadata.
:param key: Metadata key.
:param value: Metadata value.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\context.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set a value in the context metadata.</span>
<span class="sd">    :param key: Metadata key.</span>
<span class="sd">    :param value: Metadata value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.api.transport" class="doc doc-heading">
            <code>transport</code>


<a href="#accumulate.api.transport" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.api.transport.RoutedTransport" class="doc doc-heading">
            <code>RoutedTransport</code>


<a href="#accumulate.api.transport.RoutedTransport" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Handles HTTP transport for the Accumulate RPC API.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\transport.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RoutedTransport</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles HTTP transport for the Accumulate RPC API.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the transport layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            base_url (str): The base URL of the Accumulate network (e.g., mainnet or testnet).</span>
<span class="sd">            timeout (int): Request timeout in seconds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="n">base_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print the exact JSON-RPC request without sending it if debug mode is enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            endpoint (str): The API endpoint (e.g., &quot;query/{scope}&quot;).</span>
<span class="sd">            method (str): The HTTP method (e.g., &quot;GET&quot;, &quot;POST&quot;).</span>
<span class="sd">            params (Dict[str, Any], optional): Query parameters for the request.</span>
<span class="sd">            data (Dict[str, Any], optional): JSON body for the request.</span>
<span class="sd">            debug (bool): If True, print the JSON request instead of sending it.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: The printed request data as a dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the request fails or the response contains an error.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Construct the exact JSON-RPC request</span>
        <span class="n">rpc_request</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
            <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="n">data</span>
        <span class="p">}</span>

        <span class="c1"># If debug mode is enabled, print the JSON and return without sending</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">formatted_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rpc_request</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Pretty-print JSON</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; RPC Request (Not Sent):</span><span class="se">\n</span><span class="si">{</span><span class="n">formatted_json</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">rpc_request</span>  <span class="c1"># Return the request object instead of sending</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span>
                <span class="n">url</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span>
                <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">httpx</span><span class="o">.</span><span class="n">RequestError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Request failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Request failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">httpx</span><span class="o">.</span><span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; HTTP error </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;HTTP error: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Invalid JSON response: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid JSON response: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the transport client.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">aclose</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.api.transport.RoutedTransport.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span></code>

<a href="#accumulate.api.transport.RoutedTransport.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize the transport layer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>base_url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The base URL of the Accumulate network (e.g., mainnet or testnet).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request timeout in seconds.</p>
              </div>
            </td>
            <td>
                  <code>15</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\transport.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the transport layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        base_url (str): The base URL of the Accumulate network (e.g., mainnet or testnet).</span>
<span class="sd">        timeout (int): Request timeout in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="n">base_url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="n">base_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.transport.RoutedTransport.close" class="doc doc-heading">
            <code class=" language-python"><span class="n">close</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.transport.RoutedTransport.close" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Close the transport client.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\transport.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Close the transport client.&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">aclose</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.transport.RoutedTransport.send_request" class="doc doc-heading">
            <code class=" language-python"><span class="n">send_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.transport.RoutedTransport.send_request" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Print the exact JSON-RPC request without sending it if debug mode is enabled.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The API endpoint (e.g., "query/{scope}").</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The HTTP method (e.g., "GET", "POST").</p>
              </div>
            </td>
            <td>
                  <code>&#39;GET&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>params</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Query parameters for the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JSON body for the request.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, print the JSON request instead of sending it.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Any]: The printed request data as a dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the request fails or the response contains an error.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\transport.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send_request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print the exact JSON-RPC request without sending it if debug mode is enabled.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint (str): The API endpoint (e.g., &quot;query/{scope}&quot;).</span>
<span class="sd">        method (str): The HTTP method (e.g., &quot;GET&quot;, &quot;POST&quot;).</span>
<span class="sd">        params (Dict[str, Any], optional): Query parameters for the request.</span>
<span class="sd">        data (Dict[str, Any], optional): JSON body for the request.</span>
<span class="sd">        debug (bool): If True, print the JSON request instead of sending it.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Any]: The printed request data as a dictionary.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the request fails or the response contains an error.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Construct the exact JSON-RPC request</span>
    <span class="n">rpc_request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
        <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="n">data</span>
    <span class="p">}</span>

    <span class="c1"># If debug mode is enabled, print the JSON and return without sending</span>
    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="n">formatted_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rpc_request</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Pretty-print JSON</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; RPC Request (Not Sent):</span><span class="se">\n</span><span class="si">{</span><span class="n">formatted_json</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rpc_request</span>  <span class="c1"># Return the request object instead of sending</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">except</span> <span class="n">httpx</span><span class="o">.</span><span class="n">RequestError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Request failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Request failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">httpx</span><span class="o">.</span><span class="n">HTTPStatusError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; HTTP error </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;HTTP error: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Invalid JSON response: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid JSON response: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.api.querier" class="doc doc-heading">
            <code>querier</code>


<a href="#accumulate.api.querier" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.api.querier.Querier" class="doc doc-heading">
            <code>Querier</code>


<a href="#accumulate.api.querier.Querier" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Handles queries related to accounts, transactions, records, and events.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\querier.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Querier</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles queries related to accounts, transactions, records, and events.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transport</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Submit a generic query to the Accumulate network.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid query.&quot;</span><span class="p">)</span>

        <span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;Query&quot;</span><span class="p">,</span>
            <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="n">scope</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()},</span>
        <span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Sending query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Query response: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Query failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Submit a query for a specific record type.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying record for scope: </span><span class="si">%s</span><span class="s2">, query: </span><span class="si">%s</span><span class="s2">, result_type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">scope</span><span class="p">),</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>  <span class="c1"># Pass result_type here</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Record query response: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error in query_record: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Record</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query for events.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying events for scope: </span><span class="si">%s</span><span class="s2">, query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">scope</span><span class="p">),</span> <span class="n">query</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Event query response: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

            <span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">Record</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected record type in events: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">record</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">event_type</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">record_type</span>
                <span class="n">event_class_path</span> <span class="o">=</span> <span class="n">EVENT_TYPE_MAPPING</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_type</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">event_class_path</span><span class="p">:</span>
                    <span class="c1"># Log and skip unknown event types</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping unknown event type: </span><span class="si">{</span><span class="n">event_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="c1"># Dynamically resolve the class</span>
                <span class="n">module_name</span><span class="p">,</span> <span class="n">class_name</span> <span class="o">=</span> <span class="n">event_class_path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
                <span class="n">event_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>

                <span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event_class</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()))</span>

            <span class="k">return</span> <span class="n">events</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Error in query_events: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">_deserialize_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize a response into the expected result type.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Deserializing response: </span><span class="si">%s</span><span class="s2"> into type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">result_type</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected RecordRange, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1">#</span>

                <span class="c1"># Use range_of for validation</span>
                <span class="k">return</span> <span class="n">range_of</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;item_type&quot;</span><span class="p">,</span> <span class="n">Record</span><span class="p">))</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">result_type</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected </span><span class="si">{</span><span class="n">result_type</span><span class="si">}</span><span class="s2">, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Deserialization failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deserialization failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_generic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generic query handler.&quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">scope</span><span class="p">),</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>  <span class="c1"># Pass result_type here</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_account</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">account</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountRecord</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query account details.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">account</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">AccountRecord</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">AccountRecord</span><span class="p">):</span> <span class="c1">#</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected AccountRecord)&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="n">result</span> <span class="c1">#</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChainRecord</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query chain details.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">ChainRecord</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">ChainRecord</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected ChainRecord)&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_chain_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordRange</span><span class="p">[</span><span class="n">ChainEntryRecord</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query chain entries.&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">ChainEntryRecord</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">records</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> or invalid nested types&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">txid</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageRecord</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query transaction details.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying transaction for: </span><span class="si">%s</span><span class="s2"> with query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">txid</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="c1">#</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">txid</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">MessageRecord</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">MessageRecord</span><span class="p">):</span> <span class="c1">#</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected MessageRecord)&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="n">result</span> <span class="c1">#</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordRange</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query block details.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying block for: </span><span class="si">%s</span><span class="s2"> with query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="c1">#</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">):</span> <span class="c1">#</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected RecordRange)&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier._deserialize_response" class="doc doc-heading">
            <code class=" language-python"><span class="n">_deserialize_response</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span></code>

<a href="#accumulate.api.querier.Querier._deserialize_response" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a response into the expected result type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_deserialize_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize a response into the expected result type.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Deserializing response: </span><span class="si">%s</span><span class="s2"> into type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">result_type</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected RecordRange, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1">#</span>

            <span class="c1"># Use range_of for validation</span>
            <span class="k">return</span> <span class="n">range_of</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;item_type&quot;</span><span class="p">,</span> <span class="n">Record</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">result_type</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected </span><span class="si">{</span><span class="n">result_type</span><span class="si">}</span><span class="s2">, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Deserialization failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deserialization failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query" class="doc doc-heading">
            <code class=" language-python"><span class="n">query</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Submit a generic query to the Accumulate network.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Submit a generic query to the Accumulate network.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid query.&quot;</span><span class="p">)</span>

    <span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;Query&quot;</span><span class="p">,</span>
        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="n">scope</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()},</span>
    <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Sending query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Query response: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Query failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_account" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_account</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">account</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_account" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query account details.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_account</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">account</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountRecord</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query account details.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">account</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">AccountRecord</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">AccountRecord</span><span class="p">):</span> <span class="c1">#</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected AccountRecord)&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">return</span> <span class="n">result</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_block" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_block</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_block" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query block details.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordRange</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query block details.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying block for: </span><span class="si">%s</span><span class="s2"> with query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="c1">#</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">):</span> <span class="c1">#</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected RecordRange)&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_chain" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_chain</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_chain" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query chain details.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChainRecord</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query chain details.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">ChainRecord</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">ChainRecord</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected ChainRecord)&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_chain_entries" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_chain_entries</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_chain_entries" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query chain entries.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_chain_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RecordRange</span><span class="p">[</span><span class="n">ChainEntryRecord</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query chain entries.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">ChainEntryRecord</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">records</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> or invalid nested types&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_events" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_events</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_events" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query for events.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Record</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query for events.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying events for scope: </span><span class="si">%s</span><span class="s2">, query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">scope</span><span class="p">),</span> <span class="n">query</span><span class="p">,</span> <span class="n">RecordRange</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Event query response: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

        <span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">Record</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected record type in events: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">record</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">event_type</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">record_type</span>
            <span class="n">event_class_path</span> <span class="o">=</span> <span class="n">EVENT_TYPE_MAPPING</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_type</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">event_class_path</span><span class="p">:</span>
                <span class="c1"># Log and skip unknown event types</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping unknown event type: </span><span class="si">{</span><span class="n">event_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># Dynamically resolve the class</span>
            <span class="n">module_name</span><span class="p">,</span> <span class="n">class_name</span> <span class="o">=</span> <span class="n">event_class_path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
            <span class="n">event_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>

            <span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event_class</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()))</span>

        <span class="k">return</span> <span class="n">events</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Error in query_events: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_generic" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_generic</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_generic" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generic query handler.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_generic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic query handler.&quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">scope</span><span class="p">),</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>  <span class="c1"># Pass result_type here</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_record" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_record" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Submit a query for a specific record type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Submit a query for a specific record type.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying record for scope: </span><span class="si">%s</span><span class="s2">, query: </span><span class="si">%s</span><span class="s2">, result_type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">scope</span><span class="p">),</span> <span class="n">query</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>  <span class="c1"># Pass result_type here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Record query response: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">result_type</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error in query_record: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.api.querier.Querier.query_transaction" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_transaction</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">txid</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.api.querier.Querier.query_transaction" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query transaction details.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\api\querier.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">txid</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageRecord</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query transaction details.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Querying transaction for: </span><span class="si">%s</span><span class="s2"> with query: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">txid</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="c1">#</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_record</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">txid</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">MessageRecord</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">MessageRecord</span><span class="p">):</span> <span class="c1">#</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> (expected MessageRecord)&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">return</span> <span class="n">result</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.api.exceptions" class="doc doc-heading">
            <code>exceptions</code>


<a href="#accumulate.api.exceptions" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.api.exceptions.AccumulateError" class="doc doc-heading">
            <code>AccumulateError</code>


<a href="#accumulate.api.exceptions.AccumulateError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base class for all custom exceptions in the Accumulate client.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccumulateError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all custom exceptions in the Accumulate client.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.api.exceptions.FaucetError" class="doc doc-heading">
            <code>FaucetError</code>


<a href="#accumulate.api.exceptions.FaucetError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.api.exceptions.AccumulateError" href="#accumulate.api.exceptions.AccumulateError">AccumulateError</a></code></p>


        <p>Raised when faucet token requests fail.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FaucetError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when faucet token requests fail.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.api.exceptions.QueryError" class="doc doc-heading">
            <code>QueryError</code>


<a href="#accumulate.api.exceptions.QueryError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.api.exceptions.AccumulateError" href="#accumulate.api.exceptions.AccumulateError">AccumulateError</a></code></p>


        <p>Raised when a query to the RPC API fails.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">QueryError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when a query to the RPC API fails.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.api.exceptions.SubmissionError" class="doc doc-heading">
            <code>SubmissionError</code>


<a href="#accumulate.api.exceptions.SubmissionError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.api.exceptions.AccumulateError" href="#accumulate.api.exceptions.AccumulateError">AccumulateError</a></code></p>


        <p>Raised when a transaction submission fails.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SubmissionError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when a transaction submission fails.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.api.exceptions.ValidationError" class="doc doc-heading">
            <code>ValidationError</code>


<a href="#accumulate.api.exceptions.ValidationError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.api.exceptions.AccumulateError" href="#accumulate.api.exceptions.AccumulateError">AccumulateError</a></code></p>


        <p>Raised when validation fails.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\api\exceptions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when validation fails.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>




  </div>

    </div>

</div><hr />
<h2 id="transactions-models">Transactions (Models)<a class="headerlink" href="#transactions-models" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.models.transactions" class="doc doc-heading">
            <code>transactions</code>


<a href="#accumulate.models.transactions" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.AddCredits" class="doc doc-heading">
            <code>AddCredits</code>


<a href="#accumulate.models.transactions.AddCredits" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents an AddCredits transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AddCredits</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an AddCredits transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">recipient</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;URL&quot;</span><span class="p">],</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param client: Instance of AccumulateClient (can be None when unmarshaling)</span>
<span class="sd">        :param recipient: The URL of the account receiving the credits.</span>
<span class="sd">        :param amount: The amount of credits to add (in whole credits; this will be multiplied by 1e6).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Oracle price will be fetched asynchronously</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recipient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_recipient</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">recipient</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="mi">2_000_000</span>  <span class="c1"># Store amount in microcredits</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_oracle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch and set the oracle price asynchronously from network status.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">network_status</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;oracle&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to fetch oracle price: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="mi">5000</span> 

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">ADD_CREDITS</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the fields to be marshaled.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0E</span><span class="s1">&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Type marker</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipient</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Recipient</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">,</span> <span class="n">encode_compact_int</span><span class="p">),</span>  <span class="c1"># Amount</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">),</span>  <span class="c1"># Oracle price</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert AddCredits transaction to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;recipient&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipient</span><span class="p">,</span>
            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span>
            <span class="s2">&quot;oracle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AddCredits&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize an AddCredits transaction from bytes.&quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Field 1: Type marker</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for type marker&quot;</span><span class="p">)</span>
        <span class="n">type_marker</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">type_marker</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0E</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid type marker for AddCredits&quot;</span><span class="p">)</span>

        <span class="c1"># Field 2: Recipient</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for recipient&quot;</span><span class="p">)</span>
        <span class="n">rec_length</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">recipient_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">rec_length</span><span class="p">)</span>
        <span class="n">recipient</span> <span class="o">=</span> <span class="n">recipient_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

        <span class="c1"># Field 3: Amount (compact int)</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 3 for amount&quot;</span><span class="p">)</span>
        <span class="n">num_bytes_raw</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">num_bytes_raw</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing compact int length for amount&quot;</span><span class="p">)</span>
        <span class="n">num_bytes</span> <span class="o">=</span> <span class="n">num_bytes_raw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">amount_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">)</span>
        <span class="n">amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">amount_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>

        <span class="c1"># Field 4: Oracle</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 4 for oracle&quot;</span><span class="p">)</span>
        <span class="n">oracle_adjusted</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">oracle</span> <span class="o">=</span> <span class="n">oracle_adjusted</span> <span class="o">//</span> <span class="mi">100</span>

        <span class="c1"># Create instance; note that original amount was multiplied by 2e6</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">recipient</span><span class="p">,</span> <span class="n">amount</span> <span class="o">//</span> <span class="mi">2_000_000</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="n">oracle</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_normalize_recipient</span><span class="p">(</span><span class="n">recipient</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensure the recipient is formatted correctly.</span>
<span class="sd">        It must start with &quot;acc://&quot;, not include &quot;.MAIN&quot;, and end with &quot;/acme&quot; (all lowercase).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">recipient</span> <span class="o">=</span> <span class="n">recipient</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">recipient</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
            <span class="n">recipient</span> <span class="o">=</span> <span class="n">recipient</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recipient</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/acme&quot;</span><span class="p">):</span>
            <span class="n">recipient</span> <span class="o">+=</span> <span class="s2">&quot;/acme&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">recipient</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.AddCredits.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">recipient</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.AddCredits.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param client: Instance of AccumulateClient (can be None when unmarshaling)
:param recipient: The URL of the account receiving the credits.
:param amount: The amount of credits to add (in whole credits; this will be multiplied by 1e6).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">recipient</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;URL&quot;</span><span class="p">],</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param client: Instance of AccumulateClient (can be None when unmarshaling)</span>
<span class="sd">    :param recipient: The URL of the account receiving the credits.</span>
<span class="sd">    :param amount: The amount of credits to add (in whole credits; this will be multiplied by 1e6).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Oracle price will be fetched asynchronously</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recipient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_recipient</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">recipient</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="mi">2_000_000</span>  <span class="c1"># Store amount in microcredits</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.AddCredits._normalize_recipient" class="doc doc-heading">
            <code class=" language-python"><span class="n">_normalize_recipient</span><span class="p">(</span><span class="n">recipient</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.AddCredits._normalize_recipient" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Ensure the recipient is formatted correctly.
It must start with "acc://", not include ".MAIN", and end with "/acme" (all lowercase).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_normalize_recipient</span><span class="p">(</span><span class="n">recipient</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensure the recipient is formatted correctly.</span>
<span class="sd">    It must start with &quot;acc://&quot;, not include &quot;.MAIN&quot;, and end with &quot;/acme&quot; (all lowercase).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">recipient</span> <span class="o">=</span> <span class="n">recipient</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">recipient</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
        <span class="n">recipient</span> <span class="o">=</span> <span class="n">recipient</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">recipient</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/acme&quot;</span><span class="p">):</span>
        <span class="n">recipient</span> <span class="o">+=</span> <span class="s2">&quot;/acme&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">recipient</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.AddCredits.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.AddCredits.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Returns the fields to be marshaled.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the fields to be marshaled.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0E</span><span class="s1">&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Type marker</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipient</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Recipient</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">,</span> <span class="n">encode_compact_int</span><span class="p">),</span>  <span class="c1"># Amount</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">),</span>  <span class="c1"># Oracle price</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.AddCredits.initialize_oracle" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize_oracle</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.models.transactions.AddCredits.initialize_oracle" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Fetch and set the oracle price asynchronously from network status.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize_oracle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetch and set the oracle price asynchronously from network status.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">network_status</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;oracle&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to fetch oracle price: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="mi">5000</span> 
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.AddCredits.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.AddCredits.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert AddCredits transaction to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert AddCredits transaction to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="s2">&quot;recipient&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipient</span><span class="p">,</span>
        <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span>
        <span class="s2">&quot;oracle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.AddCredits.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.AddCredits.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize an AddCredits transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AddCredits&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize an AddCredits transaction from bytes.&quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Field 1: Type marker</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for type marker&quot;</span><span class="p">)</span>
    <span class="n">type_marker</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">type_marker</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0E</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid type marker for AddCredits&quot;</span><span class="p">)</span>

    <span class="c1"># Field 2: Recipient</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for recipient&quot;</span><span class="p">)</span>
    <span class="n">rec_length</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">recipient_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">rec_length</span><span class="p">)</span>
    <span class="n">recipient</span> <span class="o">=</span> <span class="n">recipient_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

    <span class="c1"># Field 3: Amount (compact int)</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 3 for amount&quot;</span><span class="p">)</span>
    <span class="n">num_bytes_raw</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">num_bytes_raw</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing compact int length for amount&quot;</span><span class="p">)</span>
    <span class="n">num_bytes</span> <span class="o">=</span> <span class="n">num_bytes_raw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">amount_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">)</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">amount_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>

    <span class="c1"># Field 4: Oracle</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 4 for oracle&quot;</span><span class="p">)</span>
    <span class="n">oracle_adjusted</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">oracle</span> <span class="o">=</span> <span class="n">oracle_adjusted</span> <span class="o">//</span> <span class="mi">100</span>

    <span class="c1"># Create instance; note that original amount was multiplied by 2e6</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">recipient</span><span class="p">,</span> <span class="n">amount</span> <span class="o">//</span> <span class="mi">2_000_000</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="n">oracle</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.BurnTokens" class="doc doc-heading">
            <code>BurnTokens</code>


<a href="#accumulate.models.transactions.BurnTokens" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Burn Tokens transaction.
This class accepts a provided-readable burn amount and then dynamically queries
the blockchain to obtain the token's precision. It then calculates the final
on-chain amount to burn.</p>
<p>The token account URL is provided, and from it the token issuer URL is obtained.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BurnTokens</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Burn Tokens transaction.</span>
<span class="sd">    This class accepts a provided-readable burn amount and then dynamically queries</span>
<span class="sd">    the blockchain to obtain the token&#39;s precision. It then calculates the final</span>
<span class="sd">    on-chain amount to burn.</span>

<span class="sd">    The token account URL is provided, and from it the token issuer URL is obtained.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token_account_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">provided_amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param token_account_url: The URL of the token account (e.g., acc://.../CTACUST).</span>
<span class="sd">        :param provided_amount: The provided-readable number of tokens to burn.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token_account_url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;token_account_url must be an instance of URL.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">provided_amount</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">provided_amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;provided_amount must be a positive integer.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_account_url</span> <span class="o">=</span> <span class="n">token_account_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">provided_amount</span> <span class="o">=</span> <span class="n">provided_amount</span>
        <span class="c1"># These will be set dynamically via initialize()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Final on-chain amount = provided_amount * (10 ** precision)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">BURN_TOKENS</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically query the token account and token issuer to obtain the token&#39;s precision,</span>
<span class="sd">        then calculate the final on-chain burn amount.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Use the Query object as in your working example.</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.queries</span><span class="w"> </span><span class="kn">import</span> <span class="n">Query</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.enums</span><span class="w"> </span><span class="kn">import</span> <span class="n">QueryType</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">query_type</span><span class="o">=</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DEFAULT</span><span class="p">)</span>

        <span class="c1"># Query the token account to get the token issuer URL.</span>
        <span class="n">token_account_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_account_url</span><span class="p">),</span> <span class="n">query</span><span class="p">)</span>
        <span class="n">token_issuer_url_str</span> <span class="o">=</span> <span class="n">token_account_response</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tokenUrl&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">token_issuer_url_str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token account did not return a tokenUrl&quot;</span><span class="p">)</span>
        <span class="n">token_issuer_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">token_issuer_url_str</span><span class="p">)</span>

        <span class="c1"># Query the token issuer to obtain the token&#39;s precision.</span>
        <span class="n">token_issuer_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">token_issuer_url</span><span class="p">),</span> <span class="n">query</span><span class="p">)</span>
        <span class="n">precision</span> <span class="o">=</span> <span class="n">token_issuer_response</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">precision</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token issuer did not return a precision value&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">precision</span><span class="p">)</span>

        <span class="c1"># Calculate the final on-chain amount.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">provided_amount</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_encode_amount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encodes the final amount as a raw big-endian number.</span>
<span class="sd">        For example, if the final amount is 110000, then:</span>
<span class="sd">          big_number_marshal_binary(110000) should yield its minimal big-endian representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;BurnTokens instance is not initialized. Call initialize(client) first.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">big_number_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fields for BurnTokens:</span>
<span class="sd">          - Field 1: Transaction type (encoded as varint)</span>
<span class="sd">          - Field 2: Amount (encoded as a length-delimited big-endian number)</span>

<span class="sd">         NOTE: The token URL is NOT included in the encoded body.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_amount</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BurnTokens&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize BurnTokens transaction from bytes.</span>
<span class="sd">        (Since precision is not encoded, the returned instance will have token_account_url set to None.)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">transaction_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">transaction_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">BURN_TOKENS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected transaction type&quot;</span><span class="p">)</span>
        <span class="n">amount_bytes</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">final_amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">amount_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">final_amount</span><span class="p">)</span>  <span class="c1"># token_account_url is unknown from the body</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># unknown precision</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">final_amount</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">provided_amount</span> <span class="o">=</span> <span class="n">final_amount</span>  <span class="c1"># fallback</span>
        <span class="k">return</span> <span class="n">instance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the BurnTokens transaction to a JSON-serializable dictionary.</span>
<span class="sd">        (Note: the token URL is not included in the output JSON.)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.BurnTokens.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">token_account_url</span><span class="p">,</span> <span class="n">provided_amount</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.BurnTokens.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param token_account_url: The URL of the token account (e.g., acc://.../CTACUST).
:param provided_amount: The provided-readable number of tokens to burn.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token_account_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">provided_amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param token_account_url: The URL of the token account (e.g., acc://.../CTACUST).</span>
<span class="sd">    :param provided_amount: The provided-readable number of tokens to burn.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token_account_url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;token_account_url must be an instance of URL.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">provided_amount</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">provided_amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;provided_amount must be a positive integer.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">token_account_url</span> <span class="o">=</span> <span class="n">token_account_url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">provided_amount</span> <span class="o">=</span> <span class="n">provided_amount</span>
    <span class="c1"># These will be set dynamically via initialize()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="kc">None</span>  
    <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Final on-chain amount = provided_amount * (10 ** precision)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.BurnTokens._encode_amount" class="doc doc-heading">
            <code class=" language-python"><span class="n">_encode_amount</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.BurnTokens._encode_amount" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Encodes the final amount as a raw big-endian number.
For example, if the final amount is 110000, then:
  big_number_marshal_binary(110000) should yield its minimal big-endian representation.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_encode_amount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encodes the final amount as a raw big-endian number.</span>
<span class="sd">    For example, if the final amount is 110000, then:</span>
<span class="sd">      big_number_marshal_binary(110000) should yield its minimal big-endian representation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;BurnTokens instance is not initialized. Call initialize(client) first.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">big_number_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.BurnTokens.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.BurnTokens.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<details class="fields-for-burntokens" open>
  <summary>Fields for BurnTokens</summary>
  <ul>
<li>Field 1: Transaction type (encoded as varint)</li>
<li>Field 2: Amount (encoded as a length-delimited big-endian number)</li>
</ul>
</details>        <p>NOTE: The token URL is NOT included in the encoded body.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fields for BurnTokens:</span>
<span class="sd">      - Field 1: Transaction type (encoded as varint)</span>
<span class="sd">      - Field 2: Amount (encoded as a length-delimited big-endian number)</span>

<span class="sd">     NOTE: The token URL is NOT included in the encoded body.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_amount</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.BurnTokens.initialize" class="doc doc-heading">
            <code class=" language-python"><span class="n">initialize</span><span class="p">(</span><span class="n">client</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.models.transactions.BurnTokens.initialize" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Dynamically query the token account and token issuer to obtain the token's precision,
then calculate the final on-chain burn amount.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically query the token account and token issuer to obtain the token&#39;s precision,</span>
<span class="sd">    then calculate the final on-chain burn amount.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use the Query object as in your working example.</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.queries</span><span class="w"> </span><span class="kn">import</span> <span class="n">Query</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.enums</span><span class="w"> </span><span class="kn">import</span> <span class="n">QueryType</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">query_type</span><span class="o">=</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DEFAULT</span><span class="p">)</span>

    <span class="c1"># Query the token account to get the token issuer URL.</span>
    <span class="n">token_account_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_account_url</span><span class="p">),</span> <span class="n">query</span><span class="p">)</span>
    <span class="n">token_issuer_url_str</span> <span class="o">=</span> <span class="n">token_account_response</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tokenUrl&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">token_issuer_url_str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token account did not return a tokenUrl&quot;</span><span class="p">)</span>
    <span class="n">token_issuer_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">token_issuer_url_str</span><span class="p">)</span>

    <span class="c1"># Query the token issuer to obtain the token&#39;s precision.</span>
    <span class="n">token_issuer_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">token_issuer_url</span><span class="p">),</span> <span class="n">query</span><span class="p">)</span>
    <span class="n">precision</span> <span class="o">=</span> <span class="n">token_issuer_response</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;precision&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">precision</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token issuer did not return a precision value&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">precision</span><span class="p">)</span>

    <span class="c1"># Calculate the final on-chain amount.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">provided_amount</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.BurnTokens.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.BurnTokens.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the BurnTokens transaction to a JSON-serializable dictionary.
(Note: the token URL is not included in the output JSON.)</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the BurnTokens transaction to a JSON-serializable dictionary.</span>
<span class="sd">    (Note: the token URL is not included in the output JSON.)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.BurnTokens.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.BurnTokens.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize BurnTokens transaction from bytes.
(Since precision is not encoded, the returned instance will have token_account_url set to None.)</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BurnTokens&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize BurnTokens transaction from bytes.</span>
<span class="sd">    (Since precision is not encoded, the returned instance will have token_account_url set to None.)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">transaction_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">transaction_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">BURN_TOKENS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected transaction type&quot;</span><span class="p">)</span>
    <span class="n">amount_bytes</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">final_amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">amount_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">final_amount</span><span class="p">)</span>  <span class="c1"># token_account_url is unknown from the body</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># unknown precision</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">final_amount</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">provided_amount</span> <span class="o">=</span> <span class="n">final_amount</span>  <span class="c1"># fallback</span>
    <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.CreateDataAccount" class="doc doc-heading">
            <code>CreateDataAccount</code>


<a href="#accumulate.models.transactions.CreateDataAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Create Data Account transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreateDataAccount</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Create Data Account transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param url: The URL of the data account.</span>
<span class="sd">        :param authorities: List of authority URLs (optional).</span>
<span class="sd">        :param metadata: Optional metadata as bytes (optional).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;url must be an instance of URL.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1">#  Only set authorities if they exist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="o">=</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="k">if</span> <span class="n">metadata</span> <span class="k">else</span> <span class="kc">None</span>  <span class="c1">#  Only set metadata if provided</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return transaction type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_DATA_ACCOUNT</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the fields to encode as a list of (field_id, value, encoding_function).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1">#  encode type field first</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  

            <span class="c1">#  encode URL without double length prefix</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  
        <span class="p">]</span>

        <span class="c1">#  Include authorities **only if they exist**</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">authorities_encoded</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
                <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span>
            <span class="p">])</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">))</span> <span class="o">+</span> <span class="n">authorities_encoded</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  

        <span class="c1">#  Include metadata **only if it exists**</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  

        <span class="k">return</span> <span class="n">fields</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateDataAccount&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize CreateDataAccount transaction from bytes.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Unmarshaling CreateDataAccount&quot;</span><span class="p">)</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1">#  Step 1: Parse Type Field</span>
        <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="c1">#  Step 2: Parse URL (Read as a string)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="c1">#  Step 3: Parse Authorities (If present)</span>
        <span class="n">authorities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if Authorities field exists</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
            <span class="n">authorities_count</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">authorities_count</span><span class="p">):</span>
                <span class="n">auth_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
                <span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">auth_str</span><span class="p">))</span>

        <span class="c1">#  Step 4: Parse Metadata (If present)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if Metadata field exists</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed CreateDataAccount: Type=</span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">, URL=</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">, Authorities=</span><span class="si">{</span><span class="n">authorities</span><span class="si">}</span><span class="s2">, Metadata=</span><span class="si">{</span><span class="n">metadata</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert CreateDataAccount transaction to a dictionary.&quot;&quot;&quot;</span>
        <span class="n">tx_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="c1">#  **Only add authorities if they exist**</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>

        <span class="c1">#  **Only add metadata if it exists**</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
            <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">tx_dict</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateDataAccount.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">authorities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.CreateDataAccount.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param url: The URL of the data account.
:param authorities: List of authority URLs (optional).
:param metadata: Optional metadata as bytes (optional).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param url: The URL of the data account.</span>
<span class="sd">    :param authorities: List of authority URLs (optional).</span>
<span class="sd">    :param metadata: Optional metadata as bytes (optional).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;url must be an instance of URL.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1">#  Only set authorities if they exist</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="o">=</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span>  
    <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="k">if</span> <span class="n">metadata</span> <span class="k">else</span> <span class="kc">None</span>  <span class="c1">#  Only set metadata if provided</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateDataAccount.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateDataAccount.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Returns the fields to encode as a list of (field_id, value, encoding_function).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the fields to encode as a list of (field_id, value, encoding_function).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1">#  encode type field first</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  

        <span class="c1">#  encode URL without double length prefix</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  
    <span class="p">]</span>

    <span class="c1">#  Include authorities **only if they exist**</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">authorities_encoded</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
            <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span>
        <span class="p">])</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">))</span> <span class="o">+</span> <span class="n">authorities_encoded</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  

    <span class="c1">#  Include metadata **only if it exists**</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  

    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateDataAccount.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateDataAccount.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert CreateDataAccount transaction to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert CreateDataAccount transaction to a dictionary.&quot;&quot;&quot;</span>
    <span class="n">tx_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="c1">#  **Only add authorities if they exist**</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>

    <span class="c1">#  **Only add metadata if it exists**</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
        <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">tx_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateDataAccount.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateDataAccount.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return transaction type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return transaction type.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_DATA_ACCOUNT</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateDataAccount.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.CreateDataAccount.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize CreateDataAccount transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateDataAccount&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize CreateDataAccount transaction from bytes.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Unmarshaling CreateDataAccount&quot;</span><span class="p">)</span>

    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1">#  Step 1: Parse Type Field</span>
    <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="c1">#  Step 2: Parse URL (Read as a string)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="c1">#  Step 3: Parse Authorities (If present)</span>
    <span class="n">authorities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if Authorities field exists</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
        <span class="n">authorities_count</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">authorities_count</span><span class="p">):</span>
            <span class="n">auth_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">auth_str</span><span class="p">))</span>

    <span class="c1">#  Step 4: Parse Metadata (If present)</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if Metadata field exists</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed CreateDataAccount: Type=</span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">, URL=</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">, Authorities=</span><span class="si">{</span><span class="n">authorities</span><span class="si">}</span><span class="s2">, Metadata=</span><span class="si">{</span><span class="n">metadata</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.CreateIdentity" class="doc doc-heading">
            <code>CreateIdentity</code>


<a href="#accumulate.models.transactions.CreateIdentity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a CreateIdentity transaction, where the key hash is automatically derived.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreateIdentity</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a CreateIdentity transaction, where the key hash is automatically derived.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">signer_public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">key_book_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param url: The URL of the new identity.</span>
<span class="sd">        :param signer_public_key: The public key of the principal (used to derive the key hash).</span>
<span class="sd">        :param key_book_url: The key book URL (optional).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;url must be an instance of URL.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signer_public_key</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">signer_public_key</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;signer_public_key must be a 32-byte public key.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key_book_url</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key_book_url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;keyBookUrl must be an instance of URL if provided.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">signer_public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>  <span class="c1">#  Compute key hash from the public key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span> <span class="o">=</span> <span class="n">key_book_url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the transaction type in Accumulate&#39;s expected format.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_IDENTITY</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the fields to be marshaled in Accumulate format.&quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">),</span>  <span class="c1"># Type field (0x01 = CreateIdentity)</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># URL (0x02)</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">),</span>  <span class="c1"># returns (field_num, value, encode_func)</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  <span class="c1"># KeyBookUrl (0x04)</span>

        <span class="k">return</span> <span class="n">fields</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Encodes the transaction into bytes for submission.&quot;&quot;&quot;</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">encode_func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields_to_encode</span><span class="p">():</span>
            <span class="n">encoded_value</span> <span class="o">=</span> <span class="n">encode_func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">serialized</span> <span class="o">+=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="n">field_num</span><span class="p">,</span> <span class="n">encoded_value</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">serialized</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert CreateIdentity transaction to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;createIdentity&quot;</span><span class="p">,</span>  <span class="c1">#  lowerCamelCase format</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
            <span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>  <span class="c1">#  encode as hex</span>
            <span class="s2">&quot;keyBookUrl&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateIdentity&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize a CreateIdentity transaction from bytes.&quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Field 1: Type</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for type&quot;</span><span class="p">)</span>
        <span class="n">tx_type</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;big&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tx_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_IDENTITY</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid transaction type for CreateIdentity&quot;</span><span class="p">)</span>

        <span class="c1"># Field 2: URL</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for URL&quot;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="c1"># Field 3: Key Hash (Public Key Hash)</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 3 for key_hash&quot;</span><span class="p">)</span>
        <span class="n">key_hash</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>  <span class="c1">#  Read 32-byte key hash</span>

        <span class="c1"># Field 4: Key Book URL (Optional)</span>
        <span class="n">key_book_url</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1">#  Peek to check if KeyBookUrl field exists</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
            <span class="n">key_book_url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="n">key_hash</span><span class="p">,</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">key_book_url</span><span class="p">)</span> <span class="k">if</span> <span class="n">key_book_url</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateIdentity.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">signer_public_key</span><span class="p">,</span> <span class="n">key_book_url</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.CreateIdentity.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param url: The URL of the new identity.
:param signer_public_key: The public key of the principal (used to derive the key hash).
:param key_book_url: The key book URL (optional).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">signer_public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">key_book_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param url: The URL of the new identity.</span>
<span class="sd">    :param signer_public_key: The public key of the principal (used to derive the key hash).</span>
<span class="sd">    :param key_book_url: The key book URL (optional).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;url must be an instance of URL.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signer_public_key</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">signer_public_key</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;signer_public_key must be a 32-byte public key.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key_book_url</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key_book_url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;keyBookUrl must be an instance of URL if provided.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">signer_public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>  <span class="c1">#  Compute key hash from the public key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span> <span class="o">=</span> <span class="n">key_book_url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateIdentity.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateIdentity.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Returns the fields to be marshaled in Accumulate format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the fields to be marshaled in Accumulate format.&quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">),</span>  <span class="c1"># Type field (0x01 = CreateIdentity)</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># URL (0x02)</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">),</span>  <span class="c1"># returns (field_num, value, encode_func)</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span><span class="p">:</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  <span class="c1"># KeyBookUrl (0x04)</span>

    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateIdentity.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateIdentity.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Encodes the transaction into bytes for submission.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encodes the transaction into bytes for submission.&quot;&quot;&quot;</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">encode_func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields_to_encode</span><span class="p">():</span>
        <span class="n">encoded_value</span> <span class="o">=</span> <span class="n">encode_func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">serialized</span> <span class="o">+=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="n">field_num</span><span class="p">,</span> <span class="n">encoded_value</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">serialized</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateIdentity.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateIdentity.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert CreateIdentity transaction to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert CreateIdentity transaction to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;createIdentity&quot;</span><span class="p">,</span>  <span class="c1">#  lowerCamelCase format</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>  <span class="c1">#  encode as hex</span>
        <span class="s2">&quot;keyBookUrl&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_book_url</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateIdentity.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateIdentity.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the transaction type in Accumulate's expected format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the transaction type in Accumulate&#39;s expected format.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_IDENTITY</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateIdentity.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.CreateIdentity.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a CreateIdentity transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateIdentity&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize a CreateIdentity transaction from bytes.&quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Field 1: Type</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for type&quot;</span><span class="p">)</span>
    <span class="n">tx_type</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;big&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tx_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_IDENTITY</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid transaction type for CreateIdentity&quot;</span><span class="p">)</span>

    <span class="c1"># Field 2: URL</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for URL&quot;</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="c1"># Field 3: Key Hash (Public Key Hash)</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 3 for key_hash&quot;</span><span class="p">)</span>
    <span class="n">key_hash</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>  <span class="c1">#  Read 32-byte key hash</span>

    <span class="c1"># Field 4: Key Book URL (Optional)</span>
    <span class="n">key_book_url</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1">#  Peek to check if KeyBookUrl field exists</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
        <span class="n">key_book_url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="n">key_hash</span><span class="p">,</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">key_book_url</span><span class="p">)</span> <span class="k">if</span> <span class="n">key_book_url</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.CreateKeyBook" class="doc doc-heading">
            <code>CreateKeyBook</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.transactions.CreateKeyBook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Create Key Book transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CreateKeyBook</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Create Key Book transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">URL</span>
    <span class="n">public_key_hash</span><span class="p">:</span> <span class="nb">bytes</span>  <span class="c1"># Must be exactly 32 bytes</span>
    <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_KEY_BOOK</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build the fields as follows:</span>
<span class="sd">          Field 1: Transaction type (as a varint)</span>
<span class="sd">          Field 2: URL (with a length prefix added by string_marshal_binary)</span>
<span class="sd">          Field 3: publicKeyHash (with a length prefix, which should be 0x20)</span>
<span class="sd">          Optionally, if authorities are provided, include them as fields 4 and 5</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># Field 1: Transaction type (e.g. 0x0d)</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
            <span class="c1"># Field 2: URL – string_marshal_binary automatically prepends the length</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
            <span class="c1"># Field 3: publicKeyHash – hash_marshal_binary checks length (must be 32)</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="c1"># Authorities count</span>
            <span class="n">authorities_count</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">))</span>
            <span class="c1"># Encode each authority URL.</span>
            <span class="n">encoded_auths</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">])</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">authorities_count</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="n">encoded_auths</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">fields</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert transaction body to a JSON‑serializable dictionary&quot;&quot;&quot;</span>
        <span class="n">tx_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
            <span class="s2">&quot;publicKeyHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">tx_dict</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateKeyBook&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Unmarshaling CreateKeyBook&quot;</span><span class="p">)</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># Read URL field (field 2)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="c1"># Read publicKeyHash field (field 3)</span>
        <span class="n">public_key_hash</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">public_key_hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid public key hash length (must be 32 bytes)&quot;</span><span class="p">)</span>
        <span class="n">authorities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">authorities_count</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">authorities_count</span><span class="p">):</span>
                <span class="n">auth_url</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">auth_url</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed CreateKeyBook: URL=</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">, PublicKeyHash=</span><span class="si">{</span><span class="n">public_key_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">, Authorities=</span><span class="si">{</span><span class="n">authorities</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">public_key_hash</span><span class="p">,</span> <span class="n">authorities</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateKeyBook.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateKeyBook.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<details class="build-the-fields-as-follows" open>
  <summary>Build the fields as follows</summary>
  <p>Field 1: Transaction type (as a varint)
Field 2: URL (with a length prefix added by string_marshal_binary)
Field 3: publicKeyHash (with a length prefix, which should be 0x20)
Optionally, if authorities are provided, include them as fields 4 and 5</p>
</details>
            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build the fields as follows:</span>
<span class="sd">      Field 1: Transaction type (as a varint)</span>
<span class="sd">      Field 2: URL (with a length prefix added by string_marshal_binary)</span>
<span class="sd">      Field 3: publicKeyHash (with a length prefix, which should be 0x20)</span>
<span class="sd">      Optionally, if authorities are provided, include them as fields 4 and 5</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># Field 1: Transaction type (e.g. 0x0d)</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="c1"># Field 2: URL – string_marshal_binary automatically prepends the length</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="c1"># Field 3: publicKeyHash – hash_marshal_binary checks length (must be 32)</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="c1"># Authorities count</span>
        <span class="n">authorities_count</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">))</span>
        <span class="c1"># Encode each authority URL.</span>
        <span class="n">encoded_auths</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">])</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">authorities_count</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="n">encoded_auths</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateKeyBook.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateKeyBook.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert transaction body to a JSON‑serializable dictionary</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert transaction body to a JSON‑serializable dictionary&quot;&quot;&quot;</span>
    <span class="n">tx_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="s2">&quot;publicKeyHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">tx_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.CreateKeyPage" class="doc doc-heading">
            <code>CreateKeyPage</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.transactions.CreateKeyPage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Create Key Page transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CreateKeyPage</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Create Key Page transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">KeySpecParams</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_KEY_PAGE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define the fields to encode, following structured encoding.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Marshal each key (each key&#39;s marshal() already adds its own field prefix)</span>
        <span class="n">encoded_keys</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">key</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">])</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Encoded keys (hex): </span><span class="si">{</span><span class="n">encoded_keys</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Encoded keys length: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">encoded_keys</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>

        <span class="c1"># Manually prepend the varint-encoded length of the concatenated keys</span>
        <span class="n">keys_value</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">encoded_keys</span><span class="p">))</span> <span class="o">+</span> <span class="n">encoded_keys</span>

        <span class="c1"># The generic marshal will wrap each value with its field number.</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Field 1: Transaction Type</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">keys_value</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>                         <span class="c1"># Field 2: Keys (with length prefix)</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">fields</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert transaction to a dictionary with correct type formatting, including keys.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">key</span><span class="o">.</span><span class="n">key_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">]</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateKeyPage&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling CreateKeyPage&quot;</span><span class="p">)</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># Read the keys field: first, the varint length, then the concatenated key bytes</span>
        <span class="n">keys_length</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">keys_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">keys_length</span><span class="p">)</span>

        <span class="c1"># To extract individual keys, we assume they were marshaled sequentially</span>
        <span class="c1"># (If multiple keys were present, you might need to loop until keys_data is exhausted)</span>
        <span class="c1"># For this example, we assume a single key or that you have a known count</span>
        <span class="c1"># Here, we assume the count equals the number of keys concatenated</span>
        <span class="c1"># (For a robust implementation, include a count field)</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">sub_reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">keys_data</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">sub_reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys_data</span><span class="p">):</span>
            <span class="n">key_bytes</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">sub_reader</span><span class="p">)</span>
            <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">KeySpecParams</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">key_bytes</span><span class="p">))</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed CreateKeyPage: keys=</span><span class="si">{</span><span class="n">keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateKeyPage.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateKeyPage.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Define the fields to encode, following structured encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Define the fields to encode, following structured encoding.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Marshal each key (each key&#39;s marshal() already adds its own field prefix)</span>
    <span class="n">encoded_keys</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">key</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Encoded keys (hex): </span><span class="si">{</span><span class="n">encoded_keys</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Encoded keys length: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">encoded_keys</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>

    <span class="c1"># Manually prepend the varint-encoded length of the concatenated keys</span>
    <span class="n">keys_value</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">encoded_keys</span><span class="p">))</span> <span class="o">+</span> <span class="n">encoded_keys</span>

    <span class="c1"># The generic marshal will wrap each value with its field number.</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Field 1: Transaction Type</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">keys_value</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>                         <span class="c1"># Field 2: Keys (with length prefix)</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateKeyPage.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateKeyPage.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert transaction to a dictionary with correct type formatting, including keys.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert transaction to a dictionary with correct type formatting, including keys.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">key</span><span class="o">.</span><span class="n">key_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">]</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.CreateToken" class="doc doc-heading">
            <code>CreateToken</code>


<a href="#accumulate.models.transactions.CreateToken" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Create Token transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreateToken</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Create Token transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">precision</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">supply_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;url must be an instance of URL.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">symbol</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;symbol must be a non-empty string.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">precision</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">precision</span> <span class="o">&lt;=</span> <span class="mi">18</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;precision must be an integer between 0 and 18.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">supply_limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">supply_limit</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;supplyLimit must be an integer or None.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span> <span class="o">=</span> <span class="n">symbol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="n">precision</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supply_limit</span> <span class="o">=</span> <span class="n">supply_limit</span>  <span class="c1"># Original (provided-readable) supply limit</span>
        <span class="c1"># Dynamically adjust the supplyLimit: multiply by 10^precision</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span> <span class="o">=</span> <span class="n">supply_limit</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="n">precision</span><span class="p">)</span> <span class="k">if</span> <span class="n">supply_limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="o">=</span> <span class="n">authorities</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_encode_supply_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the adjusted supply limit using a variable-length encoding.</span>
<span class="sd">        First, compute the minimal number of bytes needed to represent the adjusted value,</span>
<span class="sd">        then prefix that with its length encoded as a varint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span>
        <span class="c1"># Determine the minimum number of bytes (at least 1)</span>
        <span class="n">num_bytes</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span> <span class="ow">or</span> <span class="mi">1</span>
        <span class="n">supply_bytes</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s2">&quot;big&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">)</span> <span class="o">+</span> <span class="n">supply_bytes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Expected official encoding:</span>
<span class="sd">          Field 1: Transaction Type (CREATE_TOKEN) -&gt; 01 08</span>
<span class="sd">          Field 2: Token URL -&gt; 02 + length + url bytes</span>
<span class="sd">          Field 4: Symbol -&gt; 04 + length + symbol bytes</span>
<span class="sd">          Field 5: Precision -&gt; 05 + varint(precision)</span>
<span class="sd">          Field 7: Supply Limit -&gt; 07 + (length varint + supply limit bytes) [variable length]</span>
<span class="sd">          Field 9: Authorities -&gt; if provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Transaction Type</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Token URL</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Symbol</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Precision</span>
            <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_supply_limit</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span> <span class="k">if</span> <span class="n">field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the transaction into a JSON-compatible dictionary.</span>
<span class="sd">        Outputs the dynamically adjusted supply limit (the on-chain value).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span>
            <span class="s2">&quot;precision&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;supplyLimit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateToken&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize CreateToken transaction from bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Step 1: Parse Transaction Type (should be CREATE_TOKEN)</span>
        <span class="n">transaction_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">transaction_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected transaction type: </span><span class="si">{</span><span class="n">transaction_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Step 2: Parse Token URL</span>
        <span class="n">token_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

        <span class="c1"># Step 3: Parse Symbol</span>
        <span class="n">symbol</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

        <span class="c1"># Step 4: Parse Precision</span>
        <span class="n">precision</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

        <span class="c1"># Step 5: Parse Supply Limit (if available)</span>
        <span class="n">supply_limit</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="c1"># Read &#39;length&#39; bytes for the adjusted supply limit</span>
            <span class="n">supply_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
            <span class="n">adjusted_supply_limit</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">supply_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s2">&quot;big&quot;</span><span class="p">)</span>
            <span class="c1"># Convert back to the original supply limit by dividing by 10^precision</span>
            <span class="n">supply_limit</span> <span class="o">=</span> <span class="n">adjusted_supply_limit</span> <span class="o">//</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="n">precision</span><span class="p">)</span>

        <span class="c1"># Step 6: Parse Authorities (if available)</span>
        <span class="n">authorities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)))</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">token_url</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">supply_limit</span><span class="p">,</span> <span class="n">authorities</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateToken._encode_supply_limit" class="doc doc-heading">
            <code class=" language-python"><span class="n">_encode_supply_limit</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateToken._encode_supply_limit" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Encode the adjusted supply limit using a variable-length encoding.
First, compute the minimal number of bytes needed to represent the adjusted value,
then prefix that with its length encoded as a varint.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_encode_supply_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encode the adjusted supply limit using a variable-length encoding.</span>
<span class="sd">    First, compute the minimal number of bytes needed to represent the adjusted value,</span>
<span class="sd">    then prefix that with its length encoded as a varint.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span>
    <span class="c1"># Determine the minimum number of bytes (at least 1)</span>
    <span class="n">num_bytes</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span> <span class="ow">or</span> <span class="mi">1</span>
    <span class="n">supply_bytes</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s2">&quot;big&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">)</span> <span class="o">+</span> <span class="n">supply_bytes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateToken.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateToken.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<details class="expected-official-encoding" open>
  <summary>Expected official encoding</summary>
  <p>Field 1: Transaction Type (CREATE_TOKEN) -&gt; 01 08
Field 2: Token URL -&gt; 02 + length + url bytes
Field 4: Symbol -&gt; 04 + length + symbol bytes
Field 5: Precision -&gt; 05 + varint(precision)
Field 7: Supply Limit -&gt; 07 + (length varint + supply limit bytes) [variable length]
Field 9: Authorities -&gt; if provided.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Expected official encoding:</span>
<span class="sd">      Field 1: Transaction Type (CREATE_TOKEN) -&gt; 01 08</span>
<span class="sd">      Field 2: Token URL -&gt; 02 + length + url bytes</span>
<span class="sd">      Field 4: Symbol -&gt; 04 + length + symbol bytes</span>
<span class="sd">      Field 5: Precision -&gt; 05 + varint(precision)</span>
<span class="sd">      Field 7: Supply Limit -&gt; 07 + (length varint + supply limit bytes) [variable length]</span>
<span class="sd">      Field 9: Authorities -&gt; if provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Transaction Type</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Token URL</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Symbol</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Precision</span>
        <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_supply_limit</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span> <span class="k">if</span> <span class="n">field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateToken.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateToken.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the transaction into a JSON-compatible dictionary.
Outputs the dynamically adjusted supply limit (the on-chain value).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the transaction into a JSON-compatible dictionary.</span>
<span class="sd">    Outputs the dynamically adjusted supply limit (the on-chain value).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span>
        <span class="s2">&quot;precision&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;supplyLimit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">adjusted_supply_limit</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateToken.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.CreateToken.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize CreateToken transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateToken&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize CreateToken transaction from bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Step 1: Parse Transaction Type (should be CREATE_TOKEN)</span>
    <span class="n">transaction_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">transaction_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected transaction type: </span><span class="si">{</span><span class="n">transaction_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Step 2: Parse Token URL</span>
    <span class="n">token_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

    <span class="c1"># Step 3: Parse Symbol</span>
    <span class="n">symbol</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

    <span class="c1"># Step 4: Parse Precision</span>
    <span class="n">precision</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># Step 5: Parse Supply Limit (if available)</span>
    <span class="n">supply_limit</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="c1"># Read &#39;length&#39; bytes for the adjusted supply limit</span>
        <span class="n">supply_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="n">adjusted_supply_limit</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">supply_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s2">&quot;big&quot;</span><span class="p">)</span>
        <span class="c1"># Convert back to the original supply limit by dividing by 10^precision</span>
        <span class="n">supply_limit</span> <span class="o">=</span> <span class="n">adjusted_supply_limit</span> <span class="o">//</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="n">precision</span><span class="p">)</span>

    <span class="c1"># Step 6: Parse Authorities (if available)</span>
    <span class="n">authorities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)))</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">token_url</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">supply_limit</span><span class="p">,</span> <span class="n">authorities</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.CreateTokenAccount" class="doc doc-heading">
            <code>CreateTokenAccount</code>


<a href="#accumulate.models.transactions.CreateTokenAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Create Token Account transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreateTokenAccount</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Create Token Account transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">token_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param url: The URL of the token account.</span>
<span class="sd">        :param token_url: The URL of the token issuer.</span>
<span class="sd">        :param authorities: List of authorities for the token account (optional).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;url must be an instance of URL.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token_url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;token_url must be an instance of URL.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_url</span> <span class="o">=</span> <span class="n">token_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="o">=</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span>  <span class="c1"># Set to None if empty</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return transaction type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN_ACCOUNT</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the fields to encode as a list of (field_id, value, encoding_function).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1">#  **encode Type Field (Field 1)**</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Type (0x01)</span>

            <span class="c1">#  **field order (URL first, then Token URL)**</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># URL (0x02)</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Token URL (0x03)</span>
        <span class="p">]</span>

        <span class="c1">#  Only include authorities if provided</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">authorities_encoded</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
                <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span>
            <span class="p">])</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">))</span> <span class="o">+</span> <span class="n">authorities_encoded</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  <span class="c1"># Authorities (0x04)</span>

        <span class="k">return</span> <span class="n">fields</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateTokenAccount&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize CreateTokenAccount transaction from bytes.&quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1">#  Step 1: Parse Type Field (Required)</span>
        <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1"># Read type value</span>

        <span class="c1">#  Step 2: Parse URL</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

        <span class="c1">#  Step 3: Parse Token URL</span>
        <span class="n">token_url_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">token_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">token_url_str</span><span class="p">)</span>

        <span class="c1">#  Step 4: Parse Authorities (if present)</span>
        <span class="n">authorities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if Authorities field exists</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
            <span class="n">authorities_count</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1"># Read count</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">authorities_count</span><span class="p">):</span>
                <span class="n">auth_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
                <span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">auth_str</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">token_url</span><span class="p">,</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># Set to None if empty</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert CreateTokenAccount transaction to a dictionary.&quot;&quot;&quot;</span>
        <span class="n">tx_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
            <span class="s2">&quot;tokenUrl&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_url</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="c1">#  Only include authorities in dict if it&#39;s not empty</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">tx_dict</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateTokenAccount.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">token_url</span><span class="p">,</span> <span class="n">authorities</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.CreateTokenAccount.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param url: The URL of the token account.
:param token_url: The URL of the token issuer.
:param authorities: List of authorities for the token account (optional).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">token_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param url: The URL of the token account.</span>
<span class="sd">    :param token_url: The URL of the token issuer.</span>
<span class="sd">    :param authorities: List of authorities for the token account (optional).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;url must be an instance of URL.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token_url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;token_url must be an instance of URL.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">token_url</span> <span class="o">=</span> <span class="n">token_url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="o">=</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span>  <span class="c1"># Set to None if empty</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateTokenAccount.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateTokenAccount.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Returns the fields to encode as a list of (field_id, value, encoding_function).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the fields to encode as a list of (field_id, value, encoding_function).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1">#  **encode Type Field (Field 1)**</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Type (0x01)</span>

        <span class="c1">#  **field order (URL first, then Token URL)**</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># URL (0x02)</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_url</span><span class="p">)),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># Token URL (0x03)</span>
    <span class="p">]</span>

    <span class="c1">#  Only include authorities if provided</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">authorities_encoded</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
            <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span>
        <span class="p">])</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">))</span> <span class="o">+</span> <span class="n">authorities_encoded</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>  <span class="c1"># Authorities (0x04)</span>

    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateTokenAccount.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateTokenAccount.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert CreateTokenAccount transaction to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert CreateTokenAccount transaction to a dictionary.&quot;&quot;&quot;</span>
    <span class="n">tx_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="s2">&quot;tokenUrl&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_url</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="c1">#  Only include authorities in dict if it&#39;s not empty</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">tx_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span> <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">tx_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateTokenAccount.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.CreateTokenAccount.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return transaction type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return transaction type.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN_ACCOUNT</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.CreateTokenAccount.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.CreateTokenAccount.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize CreateTokenAccount transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreateTokenAccount&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize CreateTokenAccount transaction from bytes.&quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1">#  Step 1: Parse Type Field (Required)</span>
    <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1"># Read type value</span>

    <span class="c1">#  Step 2: Parse URL</span>
    <span class="n">url_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

    <span class="c1">#  Step 3: Parse Token URL</span>
    <span class="n">token_url_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">token_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">token_url_str</span><span class="p">)</span>

    <span class="c1">#  Step 4: Parse Authorities (if present)</span>
    <span class="n">authorities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">reader</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if Authorities field exists</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Consume field identifier</span>
        <span class="n">authorities_count</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1"># Read count</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">authorities_count</span><span class="p">):</span>
            <span class="n">auth_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">auth_str</span><span class="p">))</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">token_url</span><span class="p">,</span> <span class="n">authorities</span> <span class="k">if</span> <span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># Set to None if empty</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.IssueTokens" class="doc doc-heading">
            <code>IssueTokens</code>


<a href="#accumulate.models.transactions.IssueTokens" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents an Issue Tokens transaction.
This version includes only a list of token recipients.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">IssueTokens</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an Issue Tokens transaction.</span>
<span class="sd">    This version includes only a list of token recipients.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipients</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;TokenRecipient&quot;</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param recipients: A list of TokenRecipient instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">recipients</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">recipient</span><span class="p">,</span> <span class="n">TokenRecipient</span><span class="p">)</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="n">recipients</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;recipients must be a list of TokenRecipient instances.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span> <span class="o">=</span> <span class="n">recipients</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">ISSUE_TOKENS</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fields for IssueTokens:</span>
<span class="sd">          Field 1: Transaction type (encoded as varint).</span>
<span class="sd">          Field 4: Recipients (as a length-prefixed list of recipient fields).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_marshal_recipients</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">fields</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_marshal_recipients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize recipients as a length-prefixed list.</span>
<span class="sd">        Each recipient is encoded as:</span>
<span class="sd">          - Field 1: URL (as a length-prefixed string)</span>
<span class="sd">          - Field 2: Amount (as a big-number, using big_number_marshal_binary)</span>
<span class="sd">        The recipient fields are concatenated (without an extra length wrapper per recipient)</span>
<span class="sd">        and the entire recipients block is prefixed with a varint length.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Encode each recipient without extra wrapping:</span>
        <span class="n">recipient_entries</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="p">:</span>
            <span class="c1"># Encode field 1: recipient URL</span>
            <span class="n">url_field</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">url</span><span class="p">)))</span>
            <span class="c1"># Encode field 2: recipient amount</span>
            <span class="n">amount_field</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">big_number_marshal_binary</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">amount</span><span class="p">))</span>
            <span class="n">recipient_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url_field</span> <span class="o">+</span> <span class="n">amount_field</span><span class="p">)</span>
        <span class="n">recipients_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">recipient_entries</span><span class="p">)</span>
        <span class="n">length_prefix</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">recipients_data</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">length_prefix</span> <span class="o">+</span> <span class="n">recipients_data</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IssueTokens&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize IssueTokens transaction from bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># Field 1: Transaction type</span>
        <span class="n">transaction_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">transaction_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">ISSUE_TOKENS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected transaction type&quot;</span><span class="p">)</span>
        <span class="c1"># Field 4: Recipients list</span>
        <span class="n">recipients_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">recipients_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">recipients_length</span><span class="p">)</span>
        <span class="n">recipients</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_unmarshal_recipients</span><span class="p">(</span><span class="n">recipients_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">recipients</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_unmarshal_recipients</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;TokenRecipient&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize the recipients list from a byte stream.</span>
<span class="sd">        Each recipient is encoded as:</span>
<span class="sd">          - Field 1: URL (length-prefixed string)</span>
<span class="sd">          - Field 2: Amount (big-number bytes)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">recipients</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="c1"># Expect field id 1 for URL.</span>
            <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for recipient URL&quot;</span><span class="p">)</span>
            <span class="n">recipient_url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="c1"># Expect field id 2 for amount.</span>
            <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for recipient amount&quot;</span><span class="p">)</span>
            <span class="n">recipient_amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>
            <span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TokenRecipient</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">recipient_url</span><span class="p">),</span> <span class="n">recipient_amount</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">recipients</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the IssueTokens transaction to a JSON‑serializable dictionary.</span>
<span class="sd">        The recipients are output under the key &quot;to&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">recipient</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="p">],</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.IssueTokens.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">recipients</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.IssueTokens.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param recipients: A list of TokenRecipient instances.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipients</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;TokenRecipient&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param recipients: A list of TokenRecipient instances.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">recipients</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">recipient</span><span class="p">,</span> <span class="n">TokenRecipient</span><span class="p">)</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="n">recipients</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;recipients must be a list of TokenRecipient instances.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span> <span class="o">=</span> <span class="n">recipients</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.IssueTokens._marshal_recipients" class="doc doc-heading">
            <code class=" language-python"><span class="n">_marshal_recipients</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.IssueTokens._marshal_recipients" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize recipients as a length-prefixed list.
Each recipient is encoded as:
  - Field 1: URL (as a length-prefixed string)
  - Field 2: Amount (as a big-number, using big_number_marshal_binary)
The recipient fields are concatenated (without an extra length wrapper per recipient)
and the entire recipients block is prefixed with a varint length.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_marshal_recipients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize recipients as a length-prefixed list.</span>
<span class="sd">    Each recipient is encoded as:</span>
<span class="sd">      - Field 1: URL (as a length-prefixed string)</span>
<span class="sd">      - Field 2: Amount (as a big-number, using big_number_marshal_binary)</span>
<span class="sd">    The recipient fields are concatenated (without an extra length wrapper per recipient)</span>
<span class="sd">    and the entire recipients block is prefixed with a varint length.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Encode each recipient without extra wrapping:</span>
    <span class="n">recipient_entries</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="p">:</span>
        <span class="c1"># Encode field 1: recipient URL</span>
        <span class="n">url_field</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">url</span><span class="p">)))</span>
        <span class="c1"># Encode field 2: recipient amount</span>
        <span class="n">amount_field</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">big_number_marshal_binary</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">amount</span><span class="p">))</span>
        <span class="n">recipient_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url_field</span> <span class="o">+</span> <span class="n">amount_field</span><span class="p">)</span>
    <span class="n">recipients_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">recipient_entries</span><span class="p">)</span>
    <span class="n">length_prefix</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">recipients_data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">length_prefix</span> <span class="o">+</span> <span class="n">recipients_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.IssueTokens._unmarshal_recipients" class="doc doc-heading">
            <code class=" language-python"><span class="n">_unmarshal_recipients</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.IssueTokens._unmarshal_recipients" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize the recipients list from a byte stream.
Each recipient is encoded as:
  - Field 1: URL (length-prefixed string)
  - Field 2: Amount (big-number bytes)</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_unmarshal_recipients</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;TokenRecipient&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize the recipients list from a byte stream.</span>
<span class="sd">    Each recipient is encoded as:</span>
<span class="sd">      - Field 1: URL (length-prefixed string)</span>
<span class="sd">      - Field 2: Amount (big-number bytes)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">recipients</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="c1"># Expect field id 1 for URL.</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for recipient URL&quot;</span><span class="p">)</span>
        <span class="n">recipient_url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="c1"># Expect field id 2 for amount.</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for recipient amount&quot;</span><span class="p">)</span>
        <span class="n">recipient_amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>
        <span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TokenRecipient</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">recipient_url</span><span class="p">),</span> <span class="n">recipient_amount</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">recipients</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.IssueTokens.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.IssueTokens.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<details class="fields-for-issuetokens" open>
  <summary>Fields for IssueTokens</summary>
  <p>Field 1: Transaction type (encoded as varint).
Field 4: Recipients (as a length-prefixed list of recipient fields).</p>
</details>
            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fields for IssueTokens:</span>
<span class="sd">      Field 1: Transaction type (encoded as varint).</span>
<span class="sd">      Field 4: Recipients (as a length-prefixed list of recipient fields).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_marshal_recipients</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.IssueTokens.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.IssueTokens.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the IssueTokens transaction to a JSON‑serializable dictionary.
The recipients are output under the key "to".</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the IssueTokens transaction to a JSON‑serializable dictionary.</span>
<span class="sd">    The recipients are output under the key &quot;to&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">recipient</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="p">],</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.IssueTokens.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.IssueTokens.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize IssueTokens transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IssueTokens&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize IssueTokens transaction from bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="c1"># Field 1: Transaction type</span>
    <span class="n">transaction_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">transaction_type</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">ISSUE_TOKENS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected transaction type&quot;</span><span class="p">)</span>
    <span class="c1"># Field 4: Recipients list</span>
    <span class="n">recipients_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">recipients_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">recipients_length</span><span class="p">)</span>
    <span class="n">recipients</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_unmarshal_recipients</span><span class="p">(</span><span class="n">recipients_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">recipients</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.RemoteTransaction" class="doc doc-heading">
            <code>RemoteTransaction</code>


<a href="#accumulate.models.transactions.RemoteTransaction" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Remote Transaction, which references another transaction by its hash.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RemoteTransaction</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Remote Transaction, which references another transaction by its hash.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param hash: The 32-byte transaction hash being referenced.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;hash must be a 32-byte value.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="nb">hash</span>  <span class="c1"># Store the transaction hash</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the transaction type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">REMOTE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fields to encode:</span>
<span class="sd">          Field 1: Transaction Type (remoteTransaction)</span>
<span class="sd">          Field 2: Transaction Hash (32-byte binary)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">),</span>  <span class="c1"># Transaction Type</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">),</span>  <span class="c1"># Transaction Hash</span>
        <span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RemoteTransaction&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize RemoteTransaction from bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Read the type field</span>
        <span class="n">tx_type</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">tx_type</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">REMOTE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected transaction type for RemoteTransaction&quot;</span><span class="p">)</span>

        <span class="c1"># Read the transaction hash</span>
        <span class="n">hash_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid hash length (must be 32 bytes).&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert RemoteTransaction to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;remoteTransaction&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>  <span class="c1"># Convert bytes to hex for JSON serialization</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.RemoteTransaction.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.RemoteTransaction.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param hash: The 32-byte transaction hash being referenced.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param hash: The 32-byte transaction hash being referenced.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;hash must be a 32-byte value.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="nb">hash</span>  <span class="c1"># Store the transaction hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.RemoteTransaction.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.RemoteTransaction.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<details class="fields-to-encode" open>
  <summary>Fields to encode</summary>
  <p>Field 1: Transaction Type (remoteTransaction)
Field 2: Transaction Hash (32-byte binary)</p>
</details>
            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fields to encode:</span>
<span class="sd">      Field 1: Transaction Type (remoteTransaction)</span>
<span class="sd">      Field 2: Transaction Hash (32-byte binary)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">),</span>  <span class="c1"># Transaction Type</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="n">bytes_marshal_binary</span><span class="p">),</span>  <span class="c1"># Transaction Hash</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.RemoteTransaction.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.RemoteTransaction.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert RemoteTransaction to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert RemoteTransaction to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;remoteTransaction&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>  <span class="c1"># Convert bytes to hex for JSON serialization</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.RemoteTransaction.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.RemoteTransaction.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the transaction type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the transaction type.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">REMOTE</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.RemoteTransaction.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.RemoteTransaction.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize RemoteTransaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RemoteTransaction&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize RemoteTransaction from bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Read the type field</span>
    <span class="n">tx_type</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">tx_type</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">REMOTE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected transaction type for RemoteTransaction&quot;</span><span class="p">)</span>

    <span class="c1"># Read the transaction hash</span>
    <span class="n">hash_bytes</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid hash length (must be 32 bytes).&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.SendTokens" class="doc doc-heading">
            <code>SendTokens</code>


<a href="#accumulate.models.transactions.SendTokens" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a SendTokens transaction, supporting multiple recipients.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SendTokens</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a SendTokens transaction, supporting multiple recipients.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">MICRO_UNITS_PER_ACME</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">8</span>  <span class="c1"># 1 ACME = 100,000,000 micro-units</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipients</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">TokenRecipient</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span> <span class="o">=</span> <span class="n">recipients</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_recipient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a recipient to the transaction, converting ACME to micro-units.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Amount must be greater than zero&quot;</span><span class="p">)</span>

        <span class="c1">#  Convert ACME to micro-units before storing</span>
        <span class="n">micro_units</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MICRO_UNITS_PER_ACME</span>  

        <span class="n">recipient</span> <span class="o">=</span> <span class="n">TokenRecipient</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="n">micro_units</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recipient</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the transaction type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">SEND_TOKENS</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">),</span>  <span class="c1"># Type field</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_marshal_recipients</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1"># &quot;to&quot; field (will be wrapped by the generic marshal loop)</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_marshal_recipients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Encodes the list of TokenRecipients without an extra field wrapper.</span>

<span class="sd">        Returns a varint length prefix followed by the concatenated recipient fields.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">recipients_encoded</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
            <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">url</span><span class="p">)))</span> <span class="o">+</span>
            <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">big_number_marshal_binary</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">amount</span><span class="p">))</span>  <span class="c1"># Now stores micro-units</span>
            <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span>
        <span class="p">])</span>
        <span class="n">length_prefix</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">recipients_encoded</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">length_prefix</span> <span class="o">+</span> <span class="n">recipients_encoded</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert SendTokens transaction to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">recipient</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="p">]</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SendTokens&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize a SendTokens transaction from bytes.&quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">recipients</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Field 1: Type (should be &quot;sendTokens&quot;)</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for type&quot;</span><span class="p">)</span>
        <span class="n">type_value</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">type_value</span> <span class="o">!=</span> <span class="s2">&quot;sendTokens&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid type marker for SendTokens&quot;</span><span class="p">)</span>

        <span class="c1"># Field 4: Recipients</span>
        <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if the next field is &#39;to&#39;</span>
            <span class="c1"># Field 1: URL</span>
            <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for recipient URL&quot;</span><span class="p">)</span>
            <span class="n">recipient_url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

            <span class="c1"># Field 2: Amount (micro-units)</span>
            <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for recipient amount&quot;</span><span class="p">)</span>
            <span class="n">recipient_amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>

            <span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TokenRecipient</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">recipient_url</span><span class="p">),</span> <span class="n">recipient_amount</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">recipients</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.SendTokens._marshal_recipients" class="doc doc-heading">
            <code class=" language-python"><span class="n">_marshal_recipients</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.SendTokens._marshal_recipients" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Encodes the list of TokenRecipients without an extra field wrapper.</p>
<p>Returns a varint length prefix followed by the concatenated recipient fields.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_marshal_recipients</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encodes the list of TokenRecipients without an extra field wrapper.</span>

<span class="sd">    Returns a varint length prefix followed by the concatenated recipient fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">recipients_encoded</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
        <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">url</span><span class="p">)))</span> <span class="o">+</span>
        <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">big_number_marshal_binary</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">amount</span><span class="p">))</span>  <span class="c1"># Now stores micro-units</span>
        <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span>
    <span class="p">])</span>
    <span class="n">length_prefix</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">recipients_encoded</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">length_prefix</span> <span class="o">+</span> <span class="n">recipients_encoded</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.SendTokens.add_recipient" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_recipient</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.SendTokens.add_recipient" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add a recipient to the transaction, converting ACME to micro-units.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_recipient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a recipient to the transaction, converting ACME to micro-units.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Amount must be greater than zero&quot;</span><span class="p">)</span>

    <span class="c1">#  Convert ACME to micro-units before storing</span>
    <span class="n">micro_units</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MICRO_UNITS_PER_ACME</span>  

    <span class="n">recipient</span> <span class="o">=</span> <span class="n">TokenRecipient</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="n">micro_units</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recipient</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.SendTokens.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.SendTokens.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert SendTokens transaction to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert SendTokens transaction to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">recipient</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipients</span><span class="p">]</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.SendTokens.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.SendTokens.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the transaction type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the transaction type.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">SEND_TOKENS</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.SendTokens.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.SendTokens.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a SendTokens transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SendTokens&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize a SendTokens transaction from bytes.&quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">recipients</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Field 1: Type (should be &quot;sendTokens&quot;)</span>
    <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for type&quot;</span><span class="p">)</span>
    <span class="n">type_value</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">type_value</span> <span class="o">!=</span> <span class="s2">&quot;sendTokens&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid type marker for SendTokens&quot;</span><span class="p">)</span>

    <span class="c1"># Field 4: Recipients</span>
    <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span><span class="p">:</span>  <span class="c1"># Check if the next field is &#39;to&#39;</span>
        <span class="c1"># Field 1: URL</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 1 for recipient URL&quot;</span><span class="p">)</span>
        <span class="n">recipient_url</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="c1"># Field 2: Amount (micro-units)</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field id 2 for recipient amount&quot;</span><span class="p">)</span>
        <span class="n">recipient_amount</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">),</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>

        <span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TokenRecipient</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">recipient_url</span><span class="p">),</span> <span class="n">recipient_amount</span><span class="p">))</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">recipients</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.Transaction" class="doc doc-heading">
            <code>Transaction</code>


<a href="#accumulate.models.transactions.Transaction" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Transaction</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="s2">&quot;TransactionHeader&quot;</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;TransactionBodyBase&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">header</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Signer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if this transaction is a RemoteTransaction.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="s2">&quot;Signer&quot;</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">:</span> <span class="n">TransactionType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Transaction&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fully constructs a transaction, including the header and body.</span>

<span class="sd">        :param client: AccumulateClient instance</span>
<span class="sd">        :param signer: Signer instance</span>
<span class="sd">        :param transaction_type: The type of transaction to create</span>
<span class="sd">        :param args: Additional arguments passed to the transaction body</span>
<span class="sd">        :param kwargs: Additional keyword arguments for the transaction body</span>
<span class="sd">        :return: A fully constructed Transaction instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Extract public key from signer</span>
        <span class="n">public_key</span> <span class="o">=</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span>
        <span class="n">recipient</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;recipient&quot;</span><span class="p">)</span>

        <span class="c1">#  Create Transaction Header (handles initiator hash internally)</span>
        <span class="n">tx_header</span> <span class="o">=</span> <span class="k">await</span> <span class="n">TransactionHeader</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">recipient</span><span class="p">,</span> <span class="n">public_key</span><span class="p">,</span> <span class="n">signer</span><span class="p">)</span>

        <span class="c1">#  Create Transaction Body using the Factory</span>
        <span class="n">tx_body</span> <span class="o">=</span> <span class="k">await</span> <span class="n">TransactionBodyFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">tx_header</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">tx_body</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">add_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a signer dynamically.&quot;&quot;&quot;</span>
        <span class="n">signer</span> <span class="o">=</span> <span class="n">get_signer</span><span class="p">()(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Signer&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a signer dynamically.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">signer</span> <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span> <span class="k">if</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span> <span class="o">==</span> <span class="n">url</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the transaction is initiated by a user.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">is_user</span><span class="p">()</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute transaction hash ensuring Accumulate&#39;s hashing order.&quot;&quot;&quot;</span>

        <span class="c1">#  If it&#39;s a Remote Transaction, return its referenced hash</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Using referenced hash for RemoteTransaction&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">hash</span>  <span class="c1"># Remote transactions use the referenced hash directly</span>

        <span class="c1">#  Compute transaction hash if not already cached</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Computing transaction hash...&quot;</span><span class="p">)</span>

            <span class="c1">#  Step 1: Hash the header</span>
            <span class="n">header_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">marshal_binary</span><span class="p">()</span>
            <span class="n">header_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">header_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Hashed Header: </span><span class="si">{</span><span class="n">header_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Header Hash</span>

            <span class="c1">#  Step 2: Special handling for WriteData transactions</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">WriteData</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Special WriteData hashing logic applied&quot;</span><span class="p">)</span>

                <span class="c1">#  Hash body WITHOUT the entry</span>
                <span class="n">body_without_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal_without_entry</span><span class="p">()</span>
                <span class="n">body_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_without_entry</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Hashed Body (without entry): </span><span class="si">{</span><span class="n">body_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Body Hash (without entry)</span>

                <span class="c1">#  Hash entry separately</span>
                <span class="n">entry_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">hash_tree</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Hashed Entry (Merkle + SHA-256): </span><span class="si">{</span><span class="n">entry_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Entry Hash</span>

                <span class="c1">#  Step 3: Combine and hash again</span>
                <span class="n">final_body_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_hash</span> <span class="o">+</span> <span class="n">entry_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Final Hashed Body: </span><span class="si">{</span><span class="n">final_body_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Final Body Hash</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#  Standard transactions</span>
                <span class="n">body_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
                <span class="n">final_body_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Standard Hashed Body: </span><span class="si">{</span><span class="n">final_body_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Body Hash</span>

            <span class="c1">#  Final hash: H(H(header) + H(body))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">header_hash</span> <span class="o">+</span> <span class="n">final_body_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Transaction Hash: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Final Transaction Hash</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a Transaction into a dictionary format suitable for submission.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction must have both header and body set.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TxID</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the transaction ID based on its hash and principal URL.&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">principal</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">principal</span> <span class="k">else</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TxID</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">tx_hash</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_hash</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the transaction to bytes.</span>
<span class="sd">        Format:</span>
<span class="sd">          [header length (varint)] + [header bytes]</span>
<span class="sd">          [body length (varint)] + [body bytes]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">header_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">marshal_binary</span><span class="p">()</span>
        <span class="n">header_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header_data</span><span class="p">))</span>

        <span class="n">body_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="n">body_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">body_data</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">header_length</span> <span class="o">+</span> <span class="n">header_data</span> <span class="o">+</span> <span class="n">body_length</span> <span class="o">+</span> <span class="n">body_data</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Transaction&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize a Transaction from bytes.</span>
<span class="sd">        Format:</span>
<span class="sd">          [header length (varint)] + [header bytes]</span>
<span class="sd">          [body length (varint)] + [body bytes]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Read header length</span>
        <span class="n">header_length</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">header_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">header_length</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">TransactionHeader</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">header_data</span><span class="p">)</span>

        <span class="c1"># Read body length</span>
        <span class="n">body_length</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">body_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">body_length</span><span class="p">)</span> <span class="k">if</span> <span class="n">body_length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">TransactionBodyBase</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">body_data</span><span class="p">)</span> <span class="k">if</span> <span class="n">body_data</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_body_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute the hash of the transaction body separately for debugging.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

        <span class="n">body_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.add_signer" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_signer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.Transaction.add_signer" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add a signer dynamically.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a signer dynamically.&quot;&quot;&quot;</span>
    <span class="n">signer</span> <span class="o">=</span> <span class="n">get_signer</span><span class="p">()(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.create" class="doc doc-heading">
            <code class=" language-python"><span class="n">create</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">signer</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.Transaction.create" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Fully constructs a transaction, including the header and body.</p>
<p>:param client: AccumulateClient instance
:param signer: Signer instance
:param transaction_type: The type of transaction to create
:param args: Additional arguments passed to the transaction body
:param kwargs: Additional keyword arguments for the transaction body
:return: A fully constructed Transaction instance</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="s2">&quot;Signer&quot;</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">:</span> <span class="n">TransactionType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Transaction&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fully constructs a transaction, including the header and body.</span>

<span class="sd">    :param client: AccumulateClient instance</span>
<span class="sd">    :param signer: Signer instance</span>
<span class="sd">    :param transaction_type: The type of transaction to create</span>
<span class="sd">    :param args: Additional arguments passed to the transaction body</span>
<span class="sd">    :param kwargs: Additional keyword arguments for the transaction body</span>
<span class="sd">    :return: A fully constructed Transaction instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Extract public key from signer</span>
    <span class="n">public_key</span> <span class="o">=</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span>
    <span class="n">recipient</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;recipient&quot;</span><span class="p">)</span>

    <span class="c1">#  Create Transaction Header (handles initiator hash internally)</span>
    <span class="n">tx_header</span> <span class="o">=</span> <span class="k">await</span> <span class="n">TransactionHeader</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">recipient</span><span class="p">,</span> <span class="n">public_key</span><span class="p">,</span> <span class="n">signer</span><span class="p">)</span>

    <span class="c1">#  Create Transaction Body using the Factory</span>
    <span class="n">tx_body</span> <span class="o">=</span> <span class="k">await</span> <span class="n">TransactionBodyFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">tx_header</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">tx_body</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.get_body_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_body_hash</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.Transaction.get_body_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Compute the hash of the transaction body separately for debugging.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_body_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute the hash of the transaction body separately for debugging.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="n">body_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.get_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_hash</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.Transaction.get_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Compute transaction hash ensuring Accumulate's hashing order.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute transaction hash ensuring Accumulate&#39;s hashing order.&quot;&quot;&quot;</span>

    <span class="c1">#  If it&#39;s a Remote Transaction, return its referenced hash</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Using referenced hash for RemoteTransaction&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">hash</span>  <span class="c1"># Remote transactions use the referenced hash directly</span>

    <span class="c1">#  Compute transaction hash if not already cached</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Computing transaction hash...&quot;</span><span class="p">)</span>

        <span class="c1">#  Step 1: Hash the header</span>
        <span class="n">header_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">marshal_binary</span><span class="p">()</span>
        <span class="n">header_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">header_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Hashed Header: </span><span class="si">{</span><span class="n">header_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Header Hash</span>

        <span class="c1">#  Step 2: Special handling for WriteData transactions</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">WriteData</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Special WriteData hashing logic applied&quot;</span><span class="p">)</span>

            <span class="c1">#  Hash body WITHOUT the entry</span>
            <span class="n">body_without_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal_without_entry</span><span class="p">()</span>
            <span class="n">body_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_without_entry</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Hashed Body (without entry): </span><span class="si">{</span><span class="n">body_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Body Hash (without entry)</span>

            <span class="c1">#  Hash entry separately</span>
            <span class="n">entry_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">hash_tree</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Hashed Entry (Merkle + SHA-256): </span><span class="si">{</span><span class="n">entry_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Entry Hash</span>

            <span class="c1">#  Step 3: Combine and hash again</span>
            <span class="n">final_body_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_hash</span> <span class="o">+</span> <span class="n">entry_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Final Hashed Body: </span><span class="si">{</span><span class="n">final_body_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Final Body Hash</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#  Standard transactions</span>
            <span class="n">body_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
            <span class="n">final_body_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Standard Hashed Body: </span><span class="si">{</span><span class="n">final_body_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Body Hash</span>

        <span class="c1">#  Final hash: H(H(header) + H(body))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">header_hash</span> <span class="o">+</span> <span class="n">final_body_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Transaction Hash: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log Final Transaction Hash</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.get_id" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_id</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.Transaction.get_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the transaction ID based on its hash and principal URL.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TxID</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the transaction ID based on its hash and principal URL.&quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">principal</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">principal</span> <span class="k">else</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">TxID</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">tx_hash</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_hash</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.get_signer" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_signer</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.Transaction.get_signer" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve a signer dynamically.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Signer&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a signer dynamically.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">signer</span> <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span> <span class="k">if</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span> <span class="o">==</span> <span class="n">url</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.is_remote" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_remote</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.Transaction.is_remote" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if this transaction is a RemoteTransaction.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if this transaction is a RemoteTransaction.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.is_user" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_user</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.Transaction.is_user" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the transaction is initiated by a user.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the transaction is initiated by a user.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">is_user</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.Transaction.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the transaction to bytes.
Format:
  [header length (varint)] + [header bytes]
  [body length (varint)] + [body bytes]</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize the transaction to bytes.</span>
<span class="sd">    Format:</span>
<span class="sd">      [header length (varint)] + [header bytes]</span>
<span class="sd">      [body length (varint)] + [body bytes]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">header_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">marshal_binary</span><span class="p">()</span>
    <span class="n">header_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header_data</span><span class="p">))</span>

    <span class="n">body_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="n">body_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">body_data</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">header_length</span> <span class="o">+</span> <span class="n">header_data</span> <span class="o">+</span> <span class="n">body_length</span> <span class="o">+</span> <span class="n">body_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.Transaction.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert a Transaction into a dictionary format suitable for submission.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Transaction into a dictionary format suitable for submission.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction must have both header and body set.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.Transaction.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.Transaction.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a Transaction from bytes.
Format:
  [header length (varint)] + [header bytes]
  [body length (varint)] + [body bytes]</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Transaction&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize a Transaction from bytes.</span>
<span class="sd">    Format:</span>
<span class="sd">      [header length (varint)] + [header bytes]</span>
<span class="sd">      [body length (varint)] + [body bytes]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Read header length</span>
    <span class="n">header_length</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">header_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">header_length</span><span class="p">)</span>
    <span class="n">header</span> <span class="o">=</span> <span class="n">TransactionHeader</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">header_data</span><span class="p">)</span>

    <span class="c1"># Read body length</span>
    <span class="n">body_length</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">body_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">body_length</span><span class="p">)</span> <span class="k">if</span> <span class="n">body_length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">TransactionBodyBase</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">body_data</span><span class="p">)</span> <span class="k">if</span> <span class="n">body_data</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">Transaction</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.TransactionStatus" class="doc doc-heading">
            <code>TransactionStatus</code>


<a href="#accumulate.models.transactions.TransactionStatus" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TransactionStatus</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tx_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">code</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">error</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;AccumulateError&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;TransactionResult&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">received</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initiator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;URL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_id</span> <span class="o">=</span> <span class="n">tx_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="n">error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">received</span> <span class="o">=</span> <span class="n">received</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span> <span class="o">=</span> <span class="n">initiator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Signer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">TRANSACTION_STATUS</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the TransactionStatus to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;tx_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_id</span><span class="p">,</span>
            <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;received&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">received</span><span class="p">,</span>
            <span class="s2">&quot;initiator&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;signers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">signer</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span> <span class="k">else</span> <span class="p">[],</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize TransactionStatus to bytes using Accumulate encoding.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Marshaling TransactionStatus&quot;</span><span class="p">)</span>

        <span class="c1"># Serialize tx_id (string with length prefix)</span>
        <span class="n">tx_id_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_id</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_id</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="c1"># Serialize code (varint)</span>
        <span class="n">code_data</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>

        <span class="c1"># Serialize error (string with length prefix)</span>
        <span class="n">error_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">))</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="c1"># Serialize result (JSON-like structure)</span>
        <span class="n">result_data</span> <span class="o">=</span> <span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="c1"># Serialize received timestamp (varint)</span>
        <span class="n">received_data</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">received</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">received</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="c1"># Serialize initiator (URL as string)</span>
        <span class="n">initiator_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="p">))</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="c1"># Serialize signers (list of signers)</span>
        <span class="n">signers_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">signer</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">])</span>
        <span class="n">signers_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">))</span>  <span class="c1"># Prefix with number of signers</span>

        <span class="c1"># Combine all components</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">tx_id_data</span> <span class="o">+</span> <span class="n">code_data</span> <span class="o">+</span> <span class="n">error_data</span> <span class="o">+</span> <span class="n">result_data</span> <span class="o">+</span>
            <span class="n">received_data</span> <span class="o">+</span> <span class="n">initiator_data</span> <span class="o">+</span> <span class="n">signers_length</span> <span class="o">+</span> <span class="n">signers_data</span>
        <span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Marshaled TransactionStatus: </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">serialized</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionStatus&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize TransactionStatus from bytes.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Unmarshaling TransactionStatus&quot;</span><span class="p">)</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Read tx_id</span>
        <span class="n">tx_id</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

        <span class="c1"># Read code (varint)</span>
        <span class="n">code</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

        <span class="c1"># Read error</span>
        <span class="n">error_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="n">error_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">error_str</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Read result</span>
        <span class="n">result_data</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">TransactionResult</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result_data</span><span class="o">.</span><span class="n">decode</span><span class="p">()))</span> <span class="k">if</span> <span class="n">result_data</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Read received timestamp</span>
        <span class="n">received</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

        <span class="c1"># Read initiator</span>
        <span class="n">initiator_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">initiator</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">initiator_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">initiator_str</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Read signers</span>
        <span class="n">signers_count</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">signers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">signers_count</span><span class="p">):</span>
            <span class="n">signer</span> <span class="o">=</span> <span class="s2">&quot;Signer&quot;</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="n">signers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed TransactionStatus: tx_id=</span><span class="si">{</span><span class="n">tx_id</span><span class="si">}</span><span class="s2">, code=</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">, error=</span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;result=</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">, received=</span><span class="si">{</span><span class="n">received</span><span class="si">}</span><span class="s2">, initiator=</span><span class="si">{</span><span class="n">initiator</span><span class="si">}</span><span class="s2">, signers=</span><span class="si">{</span><span class="n">signers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">TransactionStatus</span><span class="p">(</span>
            <span class="n">tx_id</span><span class="o">=</span><span class="n">tx_id</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
            <span class="n">received</span><span class="o">=</span><span class="n">received</span><span class="p">,</span> <span class="n">initiator</span><span class="o">=</span><span class="n">initiator</span><span class="p">,</span> <span class="n">signers</span><span class="o">=</span><span class="n">signers</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delivered</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">OK</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">FAILED</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pending</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">DID_PANIC</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">failed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">OK</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AccumulateError</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the error and update the status code based on the provided error.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="n">error</span>
        <span class="k">if</span> <span class="n">error</span> <span class="ow">and</span> <span class="n">error</span><span class="o">.</span><span class="n">code</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">UNKNOWN_ERROR</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">as_error</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a signer dynamically.&quot;&quot;&quot;</span>
        <span class="n">signer</span> <span class="o">=</span> <span class="n">get_signer</span><span class="p">()(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
        <span class="n">existing</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span> <span class="o">==</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_url</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">existing</span> <span class="ow">or</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">existing</span><span class="o">.</span><span class="n">get_version</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Signer&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a signer dynamically&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span> <span class="o">==</span> <span class="n">url</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">signer</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransactionStatus.add_signer" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_signer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.TransactionStatus.add_signer" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add a signer dynamically.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a signer dynamically.&quot;&quot;&quot;</span>
    <span class="n">signer</span> <span class="o">=</span> <span class="n">get_signer</span><span class="p">()(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>
    <span class="n">existing</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span> <span class="o">==</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_url</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">existing</span> <span class="ow">or</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">existing</span><span class="o">.</span><span class="n">get_version</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransactionStatus.get_signer" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_signer</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.TransactionStatus.get_signer" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve a signer dynamically</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Signer&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a signer dynamically&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span> <span class="o">==</span> <span class="n">url</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">signer</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransactionStatus.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.TransactionStatus.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize TransactionStatus to bytes using Accumulate encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize TransactionStatus to bytes using Accumulate encoding.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Marshaling TransactionStatus&quot;</span><span class="p">)</span>

    <span class="c1"># Serialize tx_id (string with length prefix)</span>
    <span class="n">tx_id_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_id</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_id</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="c1"># Serialize code (varint)</span>
    <span class="n">code_data</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>

    <span class="c1"># Serialize error (string with length prefix)</span>
    <span class="n">error_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">))</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="c1"># Serialize result (JSON-like structure)</span>
    <span class="n">result_data</span> <span class="o">=</span> <span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="c1"># Serialize received timestamp (varint)</span>
    <span class="n">received_data</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">received</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">received</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="c1"># Serialize initiator (URL as string)</span>
    <span class="n">initiator_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="p">))</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="c1"># Serialize signers (list of signers)</span>
    <span class="n">signers_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">signer</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span> <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">])</span>
    <span class="n">signers_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">))</span>  <span class="c1"># Prefix with number of signers</span>

    <span class="c1"># Combine all components</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">tx_id_data</span> <span class="o">+</span> <span class="n">code_data</span> <span class="o">+</span> <span class="n">error_data</span> <span class="o">+</span> <span class="n">result_data</span> <span class="o">+</span>
        <span class="n">received_data</span> <span class="o">+</span> <span class="n">initiator_data</span> <span class="o">+</span> <span class="n">signers_length</span> <span class="o">+</span> <span class="n">signers_data</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Marshaled TransactionStatus: </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">serialized</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransactionStatus.set" class="doc doc-heading">
            <code class=" language-python"><span class="nb">set</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.TransactionStatus.set" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the error and update the status code based on the provided error.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AccumulateError</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the error and update the status code based on the provided error.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="n">error</span>
    <span class="k">if</span> <span class="n">error</span> <span class="ow">and</span> <span class="n">error</span><span class="o">.</span><span class="n">code</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">UNKNOWN_ERROR</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransactionStatus.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.TransactionStatus.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the TransactionStatus to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize the TransactionStatus to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;tx_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_id</span><span class="p">,</span>
        <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;received&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">received</span><span class="p">,</span>
        <span class="s2">&quot;initiator&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;signers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">signer</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">signer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signers</span> <span class="k">else</span> <span class="p">[],</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransactionStatus.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.TransactionStatus.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize TransactionStatus from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionStatus&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize TransactionStatus from bytes.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Unmarshaling TransactionStatus&quot;</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Read tx_id</span>
    <span class="n">tx_id</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># Read code (varint)</span>
    <span class="n">code</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># Read error</span>
    <span class="n">error_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="n">error_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">error_str</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Read result</span>
    <span class="n">result_data</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">TransactionResult</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result_data</span><span class="o">.</span><span class="n">decode</span><span class="p">()))</span> <span class="k">if</span> <span class="n">result_data</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Read received timestamp</span>
    <span class="n">received</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># Read initiator</span>
    <span class="n">initiator_str</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">initiator</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">initiator_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">initiator_str</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="c1"># Read signers</span>
    <span class="n">signers_count</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">signers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">signers_count</span><span class="p">):</span>
        <span class="n">signer</span> <span class="o">=</span> <span class="s2">&quot;Signer&quot;</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">signers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed TransactionStatus: tx_id=</span><span class="si">{</span><span class="n">tx_id</span><span class="si">}</span><span class="s2">, code=</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">, error=</span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">, &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;result=</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">, received=</span><span class="si">{</span><span class="n">received</span><span class="si">}</span><span class="s2">, initiator=</span><span class="si">{</span><span class="n">initiator</span><span class="si">}</span><span class="s2">, signers=</span><span class="si">{</span><span class="n">signers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">TransactionStatus</span><span class="p">(</span>
        <span class="n">tx_id</span><span class="o">=</span><span class="n">tx_id</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="n">received</span><span class="o">=</span><span class="n">received</span><span class="p">,</span> <span class="n">initiator</span><span class="o">=</span><span class="n">initiator</span><span class="p">,</span> <span class="n">signers</span><span class="o">=</span><span class="n">signers</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.TransferCredits" class="doc doc-heading">
            <code>TransferCredits</code>


<a href="#accumulate.models.transactions.TransferCredits" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TransferCredits</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CreditRecipient</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Represents a Transfer Credits transaction.</span>

<span class="sd">        :param to: A list of CreditRecipient objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">recipient</span><span class="p">,</span> <span class="n">CreditRecipient</span><span class="p">)</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="n">to</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;to must be a list of CreditRecipient instances.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">to</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">TRANSFER_CREDITS</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize TransferCredits transaction to bytes.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Marshaling TransferCredits&quot;</span><span class="p">)</span>

        <span class="c1"># Serialize number of recipients</span>
        <span class="n">recipients_count</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">))</span>

        <span class="c1"># Serialize each recipient</span>
        <span class="n">recipients_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">marshal</span><span class="p">())</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">])</span>

        <span class="c1"># Combine all marshaled components</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="n">recipients_count</span> <span class="o">+</span> <span class="n">recipients_data</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Marshaled TransferCredits: </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">serialized</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransferCredits&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize TransferCredits transaction from bytes.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Unmarshaling TransferCredits&quot;</span><span class="p">)</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Read number of recipients</span>
        <span class="n">recipients_count</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

        <span class="n">recipients</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">recipients_count</span><span class="p">):</span>
            <span class="n">recipient_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>  <span class="c1"># Read recipient length</span>
            <span class="n">recipient_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">recipient_length</span><span class="p">)</span>  <span class="c1"># Read recipient data</span>
            <span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CreditRecipient</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">recipient_data</span><span class="p">))</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed TransferCredits: recipients=</span><span class="si">{</span><span class="n">recipients</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TransferCredits</span><span class="p">(</span><span class="n">recipients</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransferCredits.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">to</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.TransferCredits.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Represents a Transfer Credits transaction.</p>
<p>:param to: A list of CreditRecipient objects.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CreditRecipient</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Transfer Credits transaction.</span>

<span class="sd">    :param to: A list of CreditRecipient objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">recipient</span><span class="p">,</span> <span class="n">CreditRecipient</span><span class="p">)</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="n">to</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;to must be a list of CreditRecipient instances.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">to</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransferCredits.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.TransferCredits.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize TransferCredits transaction to bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize TransferCredits transaction to bytes.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Marshaling TransferCredits&quot;</span><span class="p">)</span>

    <span class="c1"># Serialize number of recipients</span>
    <span class="n">recipients_count</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">))</span>

    <span class="c1"># Serialize each recipient</span>
    <span class="n">recipients_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">recipient</span><span class="o">.</span><span class="n">marshal</span><span class="p">())</span> <span class="k">for</span> <span class="n">recipient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">])</span>

    <span class="c1"># Combine all marshaled components</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="n">recipients_count</span> <span class="o">+</span> <span class="n">recipients_data</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Marshaled TransferCredits: </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">serialized</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.TransferCredits.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.TransferCredits.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize TransferCredits transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransferCredits&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize TransferCredits transaction from bytes.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DEBUG: Unmarshaling TransferCredits&quot;</span><span class="p">)</span>

    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Read number of recipients</span>
    <span class="n">recipients_count</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="n">recipients</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">recipients_count</span><span class="p">):</span>
        <span class="n">recipient_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>  <span class="c1"># Read recipient length</span>
        <span class="n">recipient_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">recipient_length</span><span class="p">)</span>  <span class="c1"># Read recipient data</span>
        <span class="n">recipients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CreditRecipient</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">recipient_data</span><span class="p">))</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed TransferCredits: recipients=</span><span class="si">{</span><span class="n">recipients</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">TransferCredits</span><span class="p">(</span><span class="n">recipients</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.UpdateAccountAuth" class="doc doc-heading">
            <code>UpdateAccountAuth</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateAccountAuth" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents an Update Account Auth transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UpdateAccountAuth</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an Update Account Auth transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">account_url</span><span class="p">:</span> <span class="n">URL</span>
    <span class="n">operations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>  <span class="c1"># Each dict must have keys &quot;type&quot; and &quot;authority&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">UPDATE_ACCOUNT_AUTH</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Field 1: Transaction type as a varint.</span>
<span class="sd">        Field 2: Operations as a length-prefixed list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># Field 1: Transaction type (updateAccountAuth) encoded as a varint</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
            <span class="c1"># Field 2: Operations</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_marshal_operations</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span> <span class="k">if</span> <span class="n">field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_marshal_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize operations as a length-prefixed binary format.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="n">operations_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_marshal_operation</span><span class="p">(</span><span class="n">op</span><span class="p">)</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">])</span>
        <span class="n">operations_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">operations_data</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">operations_length</span> <span class="o">+</span> <span class="n">operations_data</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_marshal_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize a single operation into bytes.</span>
<span class="sd">        Expected structure for addAuthority:</span>
<span class="sd">          - Nested field 1 (tag 0x01): Operation type (varint).</span>
<span class="sd">          - Nested field 2 (tag 0x02): Authority (length-prefixed string).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">operation</span> <span class="ow">or</span> <span class="s2">&quot;authority&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid operation entry: missing &#39;type&#39; or &#39;authority&#39; field in </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Normalize and lookup the enum value.</span>
        <span class="n">normalized_type</span> <span class="o">=</span> <span class="n">normalize_operation_type</span><span class="p">(</span><span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">operation_type_enum</span> <span class="o">=</span> <span class="n">AccountAuthOperationType</span><span class="p">[</span><span class="n">normalized_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operation type &#39;</span><span class="si">{</span><span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; is not valid: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Nested field 1: Operation type (tag 0x01)</span>
        <span class="n">op_type_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">operation_type_enum</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="c1"># Nested field 2: Authority (tag 0x02, using string_marshal_binary for proper length prefix)</span>
        <span class="n">auth_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="n">operation</span><span class="p">[</span><span class="s2">&quot;authority&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">op_type_field</span> <span class="o">+</span> <span class="n">auth_field</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert transaction body to a JSON‑serializable dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;authority&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;authority&quot;</span><span class="p">]</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span>
            <span class="p">],</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UpdateAccountAuth&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize UpdateAccountAuth transaction from bytes.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling UpdateAccountAuth: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Field 1: Transaction type (we ignore the value here)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">))</span>
        <span class="c1"># Field 2: Operations</span>
        <span class="n">operations_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">operations_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">operations_length</span><span class="p">)</span>
        <span class="n">operations</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_unmarshal_operations</span><span class="p">(</span><span class="n">operations_data</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed UpdateAccountAuth: Operations=</span><span class="si">{</span><span class="n">operations</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># The account_url is not encoded in the body, it is typically set in the header</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">account_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">operations</span><span class="o">=</span><span class="n">operations</span><span class="p">)</span>  <span class="c1"># account_url may be set elsewhere</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_unmarshal_operations</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize operations from a byte stream.&quot;&quot;&quot;</span>
        <span class="n">operations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="c1"># Nested field 1: Operation type</span>
            <span class="n">op_type</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">op_type_str</span> <span class="o">=</span> <span class="n">AccountAuthOperationType</span><span class="p">(</span><span class="n">op_type</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="c1"># Nested field 2: Authority</span>
            <span class="n">authority</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">operations</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">op_type_str</span><span class="p">,</span> <span class="s2">&quot;authority&quot;</span><span class="p">:</span> <span class="n">authority</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">operations</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateAccountAuth._marshal_operation" class="doc doc-heading">
            <code class=" language-python"><span class="n">_marshal_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateAccountAuth._marshal_operation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize a single operation into bytes.
Expected structure for addAuthority:
  - Nested field 1 (tag 0x01): Operation type (varint).
  - Nested field 2 (tag 0x02): Authority (length-prefixed string).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_marshal_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize a single operation into bytes.</span>
<span class="sd">    Expected structure for addAuthority:</span>
<span class="sd">      - Nested field 1 (tag 0x01): Operation type (varint).</span>
<span class="sd">      - Nested field 2 (tag 0x02): Authority (length-prefixed string).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">operation</span> <span class="ow">or</span> <span class="s2">&quot;authority&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid operation entry: missing &#39;type&#39; or &#39;authority&#39; field in </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Normalize and lookup the enum value.</span>
    <span class="n">normalized_type</span> <span class="o">=</span> <span class="n">normalize_operation_type</span><span class="p">(</span><span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">operation_type_enum</span> <span class="o">=</span> <span class="n">AccountAuthOperationType</span><span class="p">[</span><span class="n">normalized_type</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operation type &#39;</span><span class="si">{</span><span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; is not valid: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Nested field 1: Operation type (tag 0x01)</span>
    <span class="n">op_type_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">operation_type_enum</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Nested field 2: Authority (tag 0x02, using string_marshal_binary for proper length prefix)</span>
    <span class="n">auth_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="n">operation</span><span class="p">[</span><span class="s2">&quot;authority&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">op_type_field</span> <span class="o">+</span> <span class="n">auth_field</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateAccountAuth._marshal_operations" class="doc doc-heading">
            <code class=" language-python"><span class="n">_marshal_operations</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.UpdateAccountAuth._marshal_operations" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize operations as a length-prefixed binary format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_marshal_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize operations as a length-prefixed binary format.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="n">operations_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_marshal_operation</span><span class="p">(</span><span class="n">op</span><span class="p">)</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">])</span>
    <span class="n">operations_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">operations_data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">operations_length</span> <span class="o">+</span> <span class="n">operations_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateAccountAuth._unmarshal_operations" class="doc doc-heading">
            <code class=" language-python"><span class="n">_unmarshal_operations</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateAccountAuth._unmarshal_operations" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize operations from a byte stream.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_unmarshal_operations</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize operations from a byte stream.&quot;&quot;&quot;</span>
    <span class="n">operations</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="c1"># Nested field 1: Operation type</span>
        <span class="n">op_type</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">op_type_str</span> <span class="o">=</span> <span class="n">AccountAuthOperationType</span><span class="p">(</span><span class="n">op_type</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="c1"># Nested field 2: Authority</span>
        <span class="n">authority</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">operations</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">op_type_str</span><span class="p">,</span> <span class="s2">&quot;authority&quot;</span><span class="p">:</span> <span class="n">authority</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">operations</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateAccountAuth.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.UpdateAccountAuth.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Field 1: Transaction type as a varint.
Field 2: Operations as a length-prefixed list.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Field 1: Transaction type as a varint.</span>
<span class="sd">    Field 2: Operations as a length-prefixed list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># Field 1: Transaction type (updateAccountAuth) encoded as a varint</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="c1"># Field 2: Operations</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_marshal_operations</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span> <span class="k">if</span> <span class="n">field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateAccountAuth.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.UpdateAccountAuth.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert transaction body to a JSON‑serializable dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert transaction body to a JSON‑serializable dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                <span class="s2">&quot;authority&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;authority&quot;</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span>
        <span class="p">],</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateAccountAuth.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateAccountAuth.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize UpdateAccountAuth transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UpdateAccountAuth&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize UpdateAccountAuth transaction from bytes.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling UpdateAccountAuth: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Field 1: Transaction type (we ignore the value here)</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">))</span>
    <span class="c1"># Field 2: Operations</span>
    <span class="n">operations_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">operations_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">operations_length</span><span class="p">)</span>
    <span class="n">operations</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_unmarshal_operations</span><span class="p">(</span><span class="n">operations_data</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed UpdateAccountAuth: Operations=</span><span class="si">{</span><span class="n">operations</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># The account_url is not encoded in the body, it is typically set in the header</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">account_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">operations</span><span class="o">=</span><span class="n">operations</span><span class="p">)</span>  <span class="c1"># account_url may be set elsewhere</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.UpdateKeyPage" class="doc doc-heading">
            <code>UpdateKeyPage</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateKeyPage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents an Update Key Page transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UpdateKeyPage</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an Update Key Page transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">URL</span>
    <span class="n">operations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]</span>  <span class="c1">#  encodes `entry` inside `operation`</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">UPDATE_KEY_PAGE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define the fields to encode for the transaction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># Field 1: Transaction type (updateKeyPage) – encoded as a varint</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
            <span class="c1"># Field 2: Operations – marshaled as a length-prefixed list</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_marshal_operations</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">fields</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_marshal_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="n">ops</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_marshal_operation</span><span class="p">(</span><span class="n">op</span><span class="p">)</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">]</span>
        <span class="n">operations_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span>
        <span class="n">operations_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">operations_data</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">operations_length</span> <span class="o">+</span> <span class="n">operations_data</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_marshal_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize an operation dictionary into bytes.</span>
<span class="sd">        Handles standard operations (with keyHash or delegate), threshold operations </span>
<span class="sd">        (setThreshold, setRejectThreshold, setResponseThreshold) and update operations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">op_type_lower</span> <span class="o">=</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">op_type_lower</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;setthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setrejectthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setresponsethreshold&quot;</span><span class="p">]:</span>
            <span class="c1"># For threshold operations, return only the inner payload</span>
            <span class="n">numeric_value</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threshold&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">numeric_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing threshold value for threshold operation.&quot;</span><span class="p">)</span>
            <span class="c1"># payload: Tag 0x01, fixed length 0x04, then Tag 0x02 followed by encode_uvarint(numeric_value)</span>
            <span class="c1"># For example, for numeric_value = 2 (and if encode_uvarint(2) returns b&#39;\x02&#39;)</span>
            <span class="c1"># this produces: b&#39;\x01&#39; + b&#39;\x04&#39; + b&#39;\x02&#39; + b&#39;\x02&#39; → hex: 01 04 02 02</span>
            <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">numeric_value</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">op_type_lower</span> <span class="o">==</span> <span class="s2">&quot;update&quot;</span><span class="p">:</span>
            <span class="c1"># Handle update operations normally.</span>
            <span class="n">op_type</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">KeyPageOperationType</span><span class="p">[</span><span class="s2">&quot;UPDATE&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">old_entry</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;oldEntry&quot;</span><span class="p">)</span>
            <span class="n">new_entry</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;newEntry&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">old_entry</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">new_entry</span> <span class="ow">or</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">old_entry</span> <span class="ow">or</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_entry</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid update operation: must contain both &#39;oldEntry&#39; and &#39;newEntry&#39; with a &#39;keyHash&#39;.&quot;</span><span class="p">)</span>
            <span class="n">old_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="n">old_entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span>
            <span class="n">new_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="n">new_entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span>
            <span class="n">old_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">old_data</span><span class="p">))</span> <span class="o">+</span> <span class="n">old_data</span>
            <span class="n">new_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span> <span class="o">+</span> <span class="n">new_data</span>
            <span class="k">return</span> <span class="n">op_type</span> <span class="o">+</span> <span class="n">old_field</span> <span class="o">+</span> <span class="n">new_field</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># For standard operations.</span>
            <span class="n">op_type</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">KeyPageOperationType</span><span class="p">[</span><span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entry&quot;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="k">if</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                <span class="n">key_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s2">&quot;delegate&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                <span class="n">delegate_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;delegate&quot;</span><span class="p">])</span>
                <span class="n">key_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">delegate_data</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid operation entry: must contain either &#39;keyHash&#39; or &#39;delegate&#39;.&quot;</span><span class="p">)</span>
            <span class="n">entry_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">key_data</span><span class="p">))</span> <span class="o">+</span> <span class="n">key_data</span>
            <span class="k">return</span> <span class="n">op_type</span> <span class="o">+</span> <span class="n">entry_field</span>





    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert transaction body to a JSON‑serializable dictionary.&quot;&quot;&quot;</span>
        <span class="n">op_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="n">op_type</span> <span class="o">=</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;update&quot;</span><span class="p">:</span>
                <span class="n">op_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;oldEntry&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;oldEntry&quot;</span><span class="p">][</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()},</span>
                    <span class="s2">&quot;newEntry&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;newEntry&quot;</span><span class="p">][</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span>
                <span class="p">})</span>
            <span class="k">elif</span> <span class="n">op_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;setthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setrejectthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setresponsethreshold&quot;</span><span class="p">]:</span>
                <span class="c1"># For threshold operations, check top-level threshold.</span>
                <span class="n">numeric_value</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threshold&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">numeric_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">numeric_value</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entry&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threshold&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">numeric_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing threshold value in operation.&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;setthreshold&quot;</span><span class="p">:</span>
                    <span class="n">op_name</span> <span class="o">=</span> <span class="s2">&quot;setThreshold&quot;</span>
                <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;setrejectthreshold&quot;</span><span class="p">:</span>
                    <span class="n">op_name</span> <span class="o">=</span> <span class="s2">&quot;setRejectThreshold&quot;</span>
                <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;setresponsethreshold&quot;</span><span class="p">:</span>
                    <span class="n">op_name</span> <span class="o">=</span> <span class="s2">&quot;setResponseThreshold&quot;</span>
                <span class="n">op_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">op_name</span><span class="p">,</span>
                    <span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="n">numeric_value</span>
                <span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">op_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="p">(</span>
                        <span class="p">{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">][</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span>
                        <span class="k">if</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">]</span>
                        <span class="k">else</span> <span class="p">{</span><span class="s2">&quot;delegate&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">][</span><span class="s2">&quot;delegate&quot;</span><span class="p">]}</span>
                    <span class="p">),</span>
                <span class="p">})</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="n">op_list</span><span class="p">,</span>
        <span class="p">}</span>




    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UpdateKeyPage&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize UpdateKeyPage transaction from bytes.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling UpdateKeyPage: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Step 1: Read URL</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

        <span class="c1"># Step 2: Read Operations</span>
        <span class="n">operations_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1"># Read length prefix</span>
        <span class="n">operations_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">operations_length</span><span class="p">)</span>  <span class="c1"># Read operations</span>
        <span class="n">operations</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_unmarshal_operations</span><span class="p">(</span><span class="n">operations_data</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed UpdateKeyPage: URL=</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">, Operations=</span><span class="si">{</span><span class="n">operations</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">operations</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_unmarshal_operations</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize operations from a byte stream.&quot;&quot;&quot;</span>
        <span class="n">operations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="c1"># Extract operation type (as an int)</span>
            <span class="n">operation_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

            <span class="c1"># Extract entry</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># Peek at the next byte to determine the entry type</span>
            <span class="n">entry_type_byte</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">entry_type_byte</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># KeyHash</span>
                <span class="n">key_hash</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid keyHash length (must be 32 bytes).&quot;</span><span class="p">)</span>
                <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">key_hash</span>
            <span class="k">elif</span> <span class="n">entry_type_byte</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># Delegate</span>
                <span class="n">delegate_url</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;delegate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">delegate_url</span>
            <span class="k">elif</span> <span class="n">entry_type_byte</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># Numeric value (e.g., threshold)</span>
                <span class="c1"># Decode numeric value (assuming uvarint)</span>
                <span class="n">numeric_value</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
                <span class="c1"># You will need to decide which numeric key to use based on the operation type</span>
                <span class="c1"># For simplicity, we&#39;ll set &quot;threshold&quot;. In a complete implementation, check operation type</span>
                <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;threshold&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numeric_value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown entry type in UpdateKeyPage.&quot;</span><span class="p">)</span>

            <span class="c1"># Wrap the operation in a dictionary; here we assume non-update operations</span>
            <span class="c1"># For update operations, you’d handle them separately</span>
            <span class="n">operations</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">KeyPageOperationType</span><span class="p">(</span><span class="n">operation_type</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="n">entry</span>
            <span class="p">})</span>

        <span class="k">return</span> <span class="n">operations</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateKeyPage._marshal_operation" class="doc doc-heading">
            <code class=" language-python"><span class="n">_marshal_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateKeyPage._marshal_operation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize an operation dictionary into bytes.
Handles standard operations (with keyHash or delegate), threshold operations 
(setThreshold, setRejectThreshold, setResponseThreshold) and update operations.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_marshal_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize an operation dictionary into bytes.</span>
<span class="sd">    Handles standard operations (with keyHash or delegate), threshold operations </span>
<span class="sd">    (setThreshold, setRejectThreshold, setResponseThreshold) and update operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">op_type_lower</span> <span class="o">=</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">op_type_lower</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;setthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setrejectthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setresponsethreshold&quot;</span><span class="p">]:</span>
        <span class="c1"># For threshold operations, return only the inner payload</span>
        <span class="n">numeric_value</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threshold&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numeric_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing threshold value for threshold operation.&quot;</span><span class="p">)</span>
        <span class="c1"># payload: Tag 0x01, fixed length 0x04, then Tag 0x02 followed by encode_uvarint(numeric_value)</span>
        <span class="c1"># For example, for numeric_value = 2 (and if encode_uvarint(2) returns b&#39;\x02&#39;)</span>
        <span class="c1"># this produces: b&#39;\x01&#39; + b&#39;\x04&#39; + b&#39;\x02&#39; + b&#39;\x02&#39; → hex: 01 04 02 02</span>
        <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x04</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">numeric_value</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">op_type_lower</span> <span class="o">==</span> <span class="s2">&quot;update&quot;</span><span class="p">:</span>
        <span class="c1"># Handle update operations normally.</span>
        <span class="n">op_type</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">KeyPageOperationType</span><span class="p">[</span><span class="s2">&quot;UPDATE&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">old_entry</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;oldEntry&quot;</span><span class="p">)</span>
        <span class="n">new_entry</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;newEntry&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">old_entry</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">new_entry</span> <span class="ow">or</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">old_entry</span> <span class="ow">or</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_entry</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid update operation: must contain both &#39;oldEntry&#39; and &#39;newEntry&#39; with a &#39;keyHash&#39;.&quot;</span><span class="p">)</span>
        <span class="n">old_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="n">old_entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span>
        <span class="n">new_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="n">new_entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span>
        <span class="n">old_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">old_data</span><span class="p">))</span> <span class="o">+</span> <span class="n">old_data</span>
        <span class="n">new_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x03</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span> <span class="o">+</span> <span class="n">new_data</span>
        <span class="k">return</span> <span class="n">op_type</span> <span class="o">+</span> <span class="n">old_field</span> <span class="o">+</span> <span class="n">new_field</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># For standard operations.</span>
        <span class="n">op_type</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">KeyPageOperationType</span><span class="p">[</span><span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entry&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">key_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x01</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;delegate&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">delegate_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;delegate&quot;</span><span class="p">])</span>
            <span class="n">key_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">delegate_data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid operation entry: must contain either &#39;keyHash&#39; or &#39;delegate&#39;.&quot;</span><span class="p">)</span>
        <span class="n">entry_field</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x02</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">key_data</span><span class="p">))</span> <span class="o">+</span> <span class="n">key_data</span>
        <span class="k">return</span> <span class="n">op_type</span> <span class="o">+</span> <span class="n">entry_field</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateKeyPage._unmarshal_operations" class="doc doc-heading">
            <code class=" language-python"><span class="n">_unmarshal_operations</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateKeyPage._unmarshal_operations" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize operations from a byte stream.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_unmarshal_operations</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize operations from a byte stream.&quot;&quot;&quot;</span>
    <span class="n">operations</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="c1"># Extract operation type (as an int)</span>
        <span class="n">operation_type</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="c1"># Extract entry</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Peek at the next byte to determine the entry type</span>
        <span class="n">entry_type_byte</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">entry_type_byte</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># KeyHash</span>
            <span class="n">key_hash</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid keyHash length (must be 32 bytes).&quot;</span><span class="p">)</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">key_hash</span>
        <span class="k">elif</span> <span class="n">entry_type_byte</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># Delegate</span>
            <span class="n">delegate_url</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;delegate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">delegate_url</span>
        <span class="k">elif</span> <span class="n">entry_type_byte</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># Numeric value (e.g., threshold)</span>
            <span class="c1"># Decode numeric value (assuming uvarint)</span>
            <span class="n">numeric_value</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="c1"># You will need to decide which numeric key to use based on the operation type</span>
            <span class="c1"># For simplicity, we&#39;ll set &quot;threshold&quot;. In a complete implementation, check operation type</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;threshold&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numeric_value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown entry type in UpdateKeyPage.&quot;</span><span class="p">)</span>

        <span class="c1"># Wrap the operation in a dictionary; here we assume non-update operations</span>
        <span class="c1"># For update operations, you’d handle them separately</span>
        <span class="n">operations</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">KeyPageOperationType</span><span class="p">(</span><span class="n">operation_type</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
            <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="n">entry</span>
        <span class="p">})</span>

    <span class="k">return</span> <span class="n">operations</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateKeyPage.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.UpdateKeyPage.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Define the fields to encode for the transaction.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Define the fields to encode for the transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># Field 1: Transaction type (updateKeyPage) – encoded as a varint</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
        <span class="c1"># Field 2: Operations – marshaled as a length-prefixed list</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_marshal_operations</span><span class="p">(),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateKeyPage.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.UpdateKeyPage.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert transaction body to a JSON‑serializable dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert transaction body to a JSON‑serializable dictionary.&quot;&quot;&quot;</span>
    <span class="n">op_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
        <span class="n">op_type</span> <span class="o">=</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;update&quot;</span><span class="p">:</span>
            <span class="n">op_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>
                <span class="s2">&quot;oldEntry&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;oldEntry&quot;</span><span class="p">][</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()},</span>
                <span class="s2">&quot;newEntry&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;newEntry&quot;</span><span class="p">][</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span>
            <span class="p">})</span>
        <span class="k">elif</span> <span class="n">op_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;setthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setrejectthreshold&quot;</span><span class="p">,</span> <span class="s2">&quot;setresponsethreshold&quot;</span><span class="p">]:</span>
            <span class="c1"># For threshold operations, check top-level threshold.</span>
            <span class="n">numeric_value</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threshold&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">numeric_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">numeric_value</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entry&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threshold&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">numeric_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing threshold value in operation.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;setthreshold&quot;</span><span class="p">:</span>
                <span class="n">op_name</span> <span class="o">=</span> <span class="s2">&quot;setThreshold&quot;</span>
            <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;setrejectthreshold&quot;</span><span class="p">:</span>
                <span class="n">op_name</span> <span class="o">=</span> <span class="s2">&quot;setRejectThreshold&quot;</span>
            <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;setresponsethreshold&quot;</span><span class="p">:</span>
                <span class="n">op_name</span> <span class="o">=</span> <span class="s2">&quot;setResponseThreshold&quot;</span>
            <span class="n">op_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">op_name</span><span class="p">,</span>
                <span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="n">numeric_value</span>
            <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">op_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="p">{</span><span class="s2">&quot;keyHash&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">][</span><span class="s2">&quot;keyHash&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span>
                    <span class="k">if</span> <span class="s2">&quot;keyHash&quot;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">]</span>
                    <span class="k">else</span> <span class="p">{</span><span class="s2">&quot;delegate&quot;</span><span class="p">:</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">][</span><span class="s2">&quot;delegate&quot;</span><span class="p">]}</span>
                <span class="p">),</span>
            <span class="p">})</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="n">op_list</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.UpdateKeyPage.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.UpdateKeyPage.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize UpdateKeyPage transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UpdateKeyPage&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize UpdateKeyPage transaction from bytes.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling UpdateKeyPage: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Step 1: Read URL</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

    <span class="c1"># Step 2: Read Operations</span>
    <span class="n">operations_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1"># Read length prefix</span>
    <span class="n">operations_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">operations_length</span><span class="p">)</span>  <span class="c1"># Read operations</span>
    <span class="n">operations</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_unmarshal_operations</span><span class="p">(</span><span class="n">operations_data</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed UpdateKeyPage: URL=</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">, Operations=</span><span class="si">{</span><span class="n">operations</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">operations</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transactions.WriteData" class="doc doc-heading">
            <code>WriteData</code>


<a href="#accumulate.models.transactions.WriteData" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.base_transactions.TransactionBodyBase" href="#accumulate.models.base_transactions.TransactionBodyBase">TransactionBodyBase</a></code></p>


        <p>Represents a Write Data transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WriteData</span><span class="p">(</span><span class="n">TransactionBodyBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Write Data transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">DataEntry</span><span class="p">,</span> <span class="n">scratch</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">write_to_state</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param entry: The data entry (must be `AccumulateDataEntry` or `DoubleHashDataEntry`).</span>
<span class="sd">        :param scratch: Flag indicating whether it&#39;s a scratch write.</span>
<span class="sd">        :param write_to_state: Flag indicating whether it writes to state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="p">(</span><span class="n">AccumulateDataEntry</span><span class="p">,</span> <span class="n">DoubleHashDataEntry</span><span class="p">)):</span>  <span class="c1">#  Support multiple types</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;entry must be an instance of AccumulateDataEntry or DoubleHashDataEntry.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">entry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span> <span class="o">=</span> <span class="n">scratch</span> <span class="k">if</span> <span class="n">scratch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span> <span class="o">=</span> <span class="n">write_to_state</span> <span class="k">if</span> <span class="n">write_to_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return transaction type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">WRITE_DATA</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#  Step 1: Marshal the entry as a length-prefixed structure</span>
        <span class="n">entry_marshal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">marshal</span><span class="p">()</span>

        <span class="c1">#   Prefix the entry with total length (no extra `+ 1`)</span>
        <span class="n">entry_length</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entry_marshal</span><span class="p">))</span>  <span class="c1">#  length prefix</span>
        <span class="n">entry_encoded</span> <span class="o">=</span> <span class="n">entry_length</span> <span class="o">+</span> <span class="n">entry_marshal</span>  <span class="c1">#  No extra nested field</span>

        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1">#  Transaction Type</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">entry_encoded</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1">#  Marshal entire entry properly</span>
        <span class="p">]</span>

        <span class="c1">#  Only include scratch if True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="n">boolean_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>

        <span class="c1">#  Only include writeToState if False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">boolean_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">fields</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">marshal_without_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Marshal WriteData without the `entry` field.</span>
<span class="sd">        Needed to match Go SDK hashing logic.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Marshaling WriteData WITHOUT Entry Field&quot;</span><span class="p">)</span>

        <span class="n">serialized</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1">#  Type field</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="n">boolean_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">:</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">boolean_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>

        <span class="c1">#  Debugging: Log each field separately</span>
        <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">encode_func</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">encoded_value</span> <span class="o">=</span> <span class="n">encode_func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Encoding Field </span><span class="si">{</span><span class="n">field_num</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">encoded_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">encoded_value</span><span class="p">,</span><span class="w"> </span><span class="nb">bytes</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">encoded_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">serialized</span> <span class="o">+=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="n">field_num</span><span class="p">,</span> <span class="n">encoded_value</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Marshaled WriteData WITHOUT Entry (HEX): </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">serialized</span>


    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WriteData&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize WriteData transaction from bytes.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling WriteData&quot;</span><span class="p">)</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1">#  Step 1: Read Type Field</span>
        <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="c1">#  Step 2: Read and Unmarshal Data Entry</span>
        <span class="n">entry_data</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">DataEntry</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">entry_data</span><span class="p">)</span>  <span class="c1">#  Use DataEntry unmarshal to detect type</span>

        <span class="c1">#  Step 3: Read Boolean Flags</span>
        <span class="n">scratch_flag</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># Read single byte for scratch flag</span>
        <span class="n">state_flag</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># Read single byte for write_to_state flag</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed WriteData: type=</span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">, scratch=</span><span class="si">{</span><span class="n">scratch_flag</span><span class="si">}</span><span class="s2">, write_to_state=</span><span class="si">{</span><span class="n">state_flag</span><span class="si">}</span><span class="s2">, entry=</span><span class="si">{</span><span class="n">entry</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">scratch_flag</span><span class="p">,</span> <span class="n">state_flag</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Convert WriteData transaction to a dictionary, ensuring that default values (scratch=False, writeToState=True) are omitted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="p">}</span>

        <span class="c1">#  Only include `scratch` if True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;scratch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span>

        <span class="c1">#  Only include `writeToState` if False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;writeToState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span>

        <span class="k">return</span> <span class="n">data</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">hash_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the Merkle tree hash of the data entry.</span>
<span class="sd">        Go SDK uses `sha256(sha256(MerkleRoot(entry_data)))`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Computing Merkle Tree Hash for Entry Data&quot;</span><span class="p">)</span>

        <span class="c1">#  Compute initial SHA-256 hashes of each chunk</span>
        <span class="n">data_hashes</span> <span class="o">=</span> <span class="p">[</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">get_data</span><span class="p">()]</span>

        <span class="c1">#  Compute the Merkle root</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">merkle_root</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">temp_hashes</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">):</span>
                        <span class="n">combined</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">data_hashes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">combined</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="c1"># Handle odd number of elements</span>
                    <span class="n">temp_hashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">combined</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>
                <span class="n">data_hashes</span> <span class="o">=</span> <span class="n">temp_hashes</span>
            <span class="n">merkle_root</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1">#  Double-hash the Merkle root for `DoubleHashDataEntry`</span>
        <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">merkle_root</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Merkle Root SHA-256 Hash: </span><span class="si">{</span><span class="n">merkle_root</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Double Hash (SHA-256): </span><span class="si">{</span><span class="n">final_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">final_hash</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.WriteData.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">scratch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">write_to_state</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.transactions.WriteData.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param entry: The data entry (must be <code>AccumulateDataEntry</code> or <code>DoubleHashDataEntry</code>).
:param scratch: Flag indicating whether it's a scratch write.
:param write_to_state: Flag indicating whether it writes to state.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">DataEntry</span><span class="p">,</span> <span class="n">scratch</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">write_to_state</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param entry: The data entry (must be `AccumulateDataEntry` or `DoubleHashDataEntry`).</span>
<span class="sd">    :param scratch: Flag indicating whether it&#39;s a scratch write.</span>
<span class="sd">    :param write_to_state: Flag indicating whether it writes to state.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="p">(</span><span class="n">AccumulateDataEntry</span><span class="p">,</span> <span class="n">DoubleHashDataEntry</span><span class="p">)):</span>  <span class="c1">#  Support multiple types</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;entry must be an instance of AccumulateDataEntry or DoubleHashDataEntry.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">entry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span> <span class="o">=</span> <span class="n">scratch</span> <span class="k">if</span> <span class="n">scratch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span> <span class="o">=</span> <span class="n">write_to_state</span> <span class="k">if</span> <span class="n">write_to_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.WriteData.hash_tree" class="doc doc-heading">
            <code class=" language-python"><span class="n">hash_tree</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.WriteData.hash_tree" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Compute the Merkle tree hash of the data entry.
Go SDK uses <code>sha256(sha256(MerkleRoot(entry_data)))</code></p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the Merkle tree hash of the data entry.</span>
<span class="sd">    Go SDK uses `sha256(sha256(MerkleRoot(entry_data)))`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Computing Merkle Tree Hash for Entry Data&quot;</span><span class="p">)</span>

    <span class="c1">#  Compute initial SHA-256 hashes of each chunk</span>
    <span class="n">data_hashes</span> <span class="o">=</span> <span class="p">[</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">get_data</span><span class="p">()]</span>

    <span class="c1">#  Compute the Merkle root</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">merkle_root</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">temp_hashes</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_hashes</span><span class="p">):</span>
                    <span class="n">combined</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">data_hashes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">combined</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="c1"># Handle odd number of elements</span>
                <span class="n">temp_hashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">combined</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>
            <span class="n">data_hashes</span> <span class="o">=</span> <span class="n">temp_hashes</span>
        <span class="n">merkle_root</span> <span class="o">=</span> <span class="n">data_hashes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1">#  Double-hash the Merkle root for `DoubleHashDataEntry`</span>
    <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">merkle_root</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Merkle Root SHA-256 Hash: </span><span class="si">{</span><span class="n">merkle_root</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Double Hash (SHA-256): </span><span class="si">{</span><span class="n">final_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">final_hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.WriteData.marshal_without_entry" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal_without_entry</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.WriteData.marshal_without_entry" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Marshal WriteData without the <code>entry</code> field.
Needed to match Go SDK hashing logic.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal_without_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Marshal WriteData without the `entry` field.</span>
<span class="sd">    Needed to match Go SDK hashing logic.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Marshaling WriteData WITHOUT Entry Field&quot;</span><span class="p">)</span>

    <span class="n">serialized</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span>  <span class="c1">#  Type field</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">:</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="n">boolean_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">:</span>
        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="n">boolean_marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>

    <span class="c1">#  Debugging: Log each field separately</span>
    <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">encode_func</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
        <span class="n">encoded_value</span> <span class="o">=</span> <span class="n">encode_func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Encoding Field </span><span class="si">{</span><span class="n">field_num</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">encoded_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">encoded_value</span><span class="p">,</span><span class="w"> </span><span class="nb">bytes</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">encoded_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">serialized</span> <span class="o">+=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="n">field_num</span><span class="p">,</span> <span class="n">encoded_value</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Marshaled WriteData WITHOUT Entry (HEX): </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">serialized</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.WriteData.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.WriteData.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert WriteData transaction to a dictionary, ensuring that default values (scratch=False, writeToState=True) are omitted.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Convert WriteData transaction to a dictionary, ensuring that default values (scratch=False, writeToState=True) are omitted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">**</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="c1">#  Only include `scratch` if True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;scratch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scratch</span>

    <span class="c1">#  Only include `writeToState` if False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;writeToState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_state</span>

    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.WriteData.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.transactions.WriteData.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return transaction type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return transaction type.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">WRITE_DATA</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.transactions.WriteData.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.transactions.WriteData.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize WriteData transaction from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WriteData&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize WriteData transaction from bytes.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling WriteData&quot;</span><span class="p">)</span>

    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1">#  Step 1: Read Type Field</span>
    <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="c1">#  Step 2: Read and Unmarshal Data Entry</span>
    <span class="n">entry_data</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="n">entry</span> <span class="o">=</span> <span class="n">DataEntry</span><span class="o">.</span><span class="n">unmarshal</span><span class="p">(</span><span class="n">entry_data</span><span class="p">)</span>  <span class="c1">#  Use DataEntry unmarshal to detect type</span>

    <span class="c1">#  Step 3: Read Boolean Flags</span>
    <span class="n">scratch_flag</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># Read single byte for scratch flag</span>
    <span class="n">state_flag</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># Read single byte for write_to_state flag</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed WriteData: type=</span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">, scratch=</span><span class="si">{</span><span class="n">scratch_flag</span><span class="si">}</span><span class="s2">, write_to_state=</span><span class="si">{</span><span class="n">state_flag</span><span class="si">}</span><span class="s2">, entry=</span><span class="si">{</span><span class="n">entry</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">scratch_flag</span><span class="p">,</span> <span class="n">state_flag</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><hr />
<h2 id="queries-models">Queries (Models)<a class="headerlink" href="#queries-models" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.models.queries" class="doc doc-heading">
            <code>queries</code>


<a href="#accumulate.models.queries" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.AccumulateError" class="doc doc-heading">
            <code>AccumulateError</code>


<a href="#accumulate.models.queries.AccumulateError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base class for all custom exceptions in the Accumulate client.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccumulateError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all custom exceptions in the Accumulate client.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.AnchorSearchQuery" class="doc doc-heading">
            <code>AnchorSearchQuery</code>


<a href="#accumulate.models.queries.AnchorSearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents an anchor search query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AnchorSearchQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an anchor search query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">include_receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ReceiptOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">ANCHOR_SEARCH</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="o">=</span> <span class="n">include_receipt</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the anchor search query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Anchor is required for an anchor search query.&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_any</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid ReceiptOptions: Must specify `for_any` or `for_height`.&quot;</span><span class="p">)</span> <span class="c1">#</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">&quot;anchor&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;include_receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.AnchorSearchQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.AnchorSearchQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the anchor search query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the anchor search query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Anchor is required for an anchor search query.&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_any</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid ReceiptOptions: Must specify `for_any` or `for_height`.&quot;</span><span class="p">)</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.BlockQuery" class="doc doc-heading">
            <code>BlockQuery</code>


<a href="#accumulate.models.queries.BlockQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a block query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BlockQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a block query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">minor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">major</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">minor_range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RangeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">major_range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RangeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entry_range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RangeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">omit_empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">BLOCK</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="n">minor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="n">major</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span> <span class="o">=</span> <span class="n">minor_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span> <span class="o">=</span> <span class="n">major_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span> <span class="o">=</span> <span class="n">entry_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="o">=</span> <span class="n">omit_empty</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the block query. Ensure at least one required field is set.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minor</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span>
                <span class="s2">&quot;BlockQuery must specify at least one of: minor, major, minor_range, or major_range.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Cannot specify both minor and minor_range.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Cannot specify both major and major_range.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;EntryRange cannot be used with minor/major ranges.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="o">.</span><span class="n">start</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;EntryRange must specify `start` or `count`.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert BlockQuery to the API-compatible format.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">query_params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;minor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span><span class="p">:</span>
            <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;minor_range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">:</span>
            <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;major_range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="p">:</span>
            <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;entry_range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;omit_empty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span>  <span class="c1"># True/False</span>

        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">query_params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.BlockQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.BlockQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the block query. Ensure at least one required field is set.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the block query. Ensure at least one required field is set.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minor</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span>
            <span class="s2">&quot;BlockQuery must specify at least one of: minor, major, minor_range, or major_range.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Cannot specify both minor and minor_range.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Cannot specify both major and major_range.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;EntryRange cannot be used with minor/major ranges.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="o">.</span><span class="n">start</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;EntryRange must specify `start` or `count`.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.BlockQuery.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.BlockQuery.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert BlockQuery to the API-compatible format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert BlockQuery to the API-compatible format.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="n">query_params</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;minor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span><span class="p">:</span>
        <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;minor_range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minor_range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="p">:</span>
        <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;major_range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="p">:</span>
        <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;entry_range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query_params</span><span class="p">[</span><span class="s2">&quot;omit_empty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span>  <span class="c1"># True/False</span>

    <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">query_params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.ChainQuery" class="doc doc-heading">
            <code>ChainQuery</code>


<a href="#accumulate.models.queries.ChainQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a chain query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ChainQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a chain query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RangeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ReceiptOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">CHAIN</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">entry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="o">=</span> <span class="n">include_receipt</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the chain query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Range is mutually exclusive with index and entry.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Name is required when querying by index, entry, or range.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid ReceiptOptions.&quot;</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure `name` is always included in the query.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
            <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">,</span>
            <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;include_receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.ChainQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.ChainQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the chain query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the chain query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Range is mutually exclusive with index and entry.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Name is required when querying by index, entry, or range.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid ReceiptOptions.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.ChainQuery.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.ChainQuery.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Ensure <code>name</code> is always included in the query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure `name` is always included in the query.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">,</span>
        <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;include_receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.DataQuery" class="doc doc-heading">
            <code>DataQuery</code>


<a href="#accumulate.models.queries.DataQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a data query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a data query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">entry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RangeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DATA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">entry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the data query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Range is mutually exclusive with index and entry.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">,</span>
            <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.DataQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.DataQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the data query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the data query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Range is mutually exclusive with index and entry.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.DefaultQuery" class="doc doc-heading">
            <code>DefaultQuery</code>


<a href="#accumulate.models.queries.DefaultQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents the default query type.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DefaultQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the default query type.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ReceiptOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DEFAULT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="o">=</span> <span class="n">include_receipt</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the default query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_any</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid ReceiptOptions: Must specify `for_any` or `for_height`.&quot;</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">&quot;include_receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.DefaultQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.DefaultQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the default query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the default query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_any</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_receipt</span><span class="o">.</span><span class="n">for_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid ReceiptOptions: Must specify `for_any` or `for_height`.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.DelegateSearchQuery" class="doc doc-heading">
            <code>DelegateSearchQuery</code>


<a href="#accumulate.models.queries.DelegateSearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a delegate search query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DelegateSearchQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a delegate search query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delegate</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DELEGATE_SEARCH</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">delegate</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the delegate search query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Delegate is required for a delegate search query.&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="c1"># Additional validation for delegate (e.g., valid URL format) could be added.</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">&quot;delegate&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.DelegateSearchQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.DelegateSearchQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the delegate search query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the delegate search query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Delegate is required for a delegate search query.&quot;</span><span class="p">)</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.DirectoryQuery" class="doc doc-heading">
            <code>DirectoryQuery</code>


<a href="#accumulate.models.queries.DirectoryQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a directory query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DirectoryQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a directory query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RangeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DIRECTORY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the directory query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid RangeOptions: Must include `start` or `count`.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the query outputs correctly formatted range parameters.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

        <span class="c1">#  Always include `range` (Fix for API error)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;from_end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.DirectoryQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.DirectoryQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the directory query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the directory query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid RangeOptions: Must include `start` or `count`.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.DirectoryQuery.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.DirectoryQuery.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Ensure the query outputs correctly formatted range parameters.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure the query outputs correctly formatted range parameters.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

    <span class="c1">#  Always include `range` (Fix for API error)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;from_end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.MessageHashSearchQuery" class="doc doc-heading">
            <code>MessageHashSearchQuery</code>


<a href="#accumulate.models.queries.MessageHashSearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a message hash search query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MessageHashSearchQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a message hash search query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">MESSAGE_HASH_SEARCH</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="nb">hash</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the message hash search query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Hash is required for a message hash search query.&quot;</span><span class="p">)</span> <span class="c1">#</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.MessageHashSearchQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.MessageHashSearchQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the message hash search query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the message hash search query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Hash is required for a message hash search query.&quot;</span><span class="p">)</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.PendingQuery" class="doc doc-heading">
            <code>PendingQuery</code>


<a href="#accumulate.models.queries.PendingQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a pending query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PendingQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a pending query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RangeOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">PENDING</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the pending query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid RangeOptions: Must include `start` or `count`.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the query outputs correctly formatted range parameters.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

        <span class="c1">#  Always include `range` (Fix for API error)</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;from_end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.PendingQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.PendingQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the pending query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the pending query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Invalid RangeOptions: Must include `start` or `count`.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.PendingQuery.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.PendingQuery.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Ensure the query outputs correctly formatted range parameters.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure the query outputs correctly formatted range parameters.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

    <span class="c1">#  Always include `range` (Fix for API error)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;from_end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">from_end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">expand</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.PublicKeyHashSearchQuery" class="doc doc-heading">
            <code>PublicKeyHashSearchQuery</code>


<a href="#accumulate.models.queries.PublicKeyHashSearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a public key hash search query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PublicKeyHashSearchQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a public key hash search query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public_key_hash</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">PUBLIC_KEY_HASH_SEARCH</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span> <span class="o">=</span> <span class="n">public_key_hash</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the public key hash search query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Public key hash is required for a public key hash search query.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the query to a dictionary ensuring correct JSON-RPC format.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">(),</span>  <span class="c1">#  Ensure camelCase format</span>
            <span class="s2">&quot;publicKeyHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">,</span>  <span class="c1">#  Ensure hex format (string)</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.PublicKeyHashSearchQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.PublicKeyHashSearchQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the public key hash search query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the public key hash search query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Public key hash is required for a public key hash search query.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.PublicKeyHashSearchQuery.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.PublicKeyHashSearchQuery.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the query to a dictionary ensuring correct JSON-RPC format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the query to a dictionary ensuring correct JSON-RPC format.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">(),</span>  <span class="c1">#  Ensure camelCase format</span>
        <span class="s2">&quot;publicKeyHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">,</span>  <span class="c1">#  Ensure hex format (string)</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.PublicKeySearchQuery" class="doc doc-heading">
            <code>PublicKeySearchQuery</code>


<a href="#accumulate.models.queries.PublicKeySearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Represents a public key search query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PublicKeySearchQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a public key search query.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">SignatureType</span><span class="p">]]</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">PUBLIC_KEY_SEARCH</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Received Public Key: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1">#  Auto-detect and convert the public key to HEX format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_hex</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>

        <span class="c1">#  Ensure signature_type is stored as a SignatureType enum and converted to RPC format</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="n">signature_type</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">SignatureType</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span> <span class="o">=</span> <span class="n">signature_type</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid signature type: </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_to_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Detect and convert the provided public key to HEX.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">public_key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;MH&quot;</span><span class="p">):</span>  
            <span class="n">parsed</span> <span class="o">=</span> <span class="n">parse_mh_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parsed</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Invalid MH address: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed MH public key: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">parsed</span><span class="o">.</span><span class="n">hash</span>

        <span class="k">elif</span> <span class="n">public_key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">):</span>  
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed hex address: </span><span class="si">{</span><span class="n">public_key</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">public_key</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>  <span class="c1">#  Remove &#39;0x&#39; and convert hex</span>

        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[0-9a-fA-F]+&quot;</span><span class="p">,</span> <span class="n">public_key</span><span class="p">):</span>  
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed raw hex: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>  <span class="c1">#  Convert raw hex</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1">#  Convert Base58 public key to HEX</span>
                <span class="n">decoded_bytes</span> <span class="o">=</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58decode</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>  
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed Base58 public key (converted to HEX): </span><span class="si">{</span><span class="n">decoded_bytes</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">decoded_bytes</span>  <span class="c1"># Store as bytes</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Invalid public key format: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">, Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid public key format: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the public key search query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot; Public key is required for a public key search query.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Public key is required for a public key search query.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">SignatureType</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot; Signature type must be a valid SignatureType enum.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Signature type must be a valid SignatureType enum.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the query outputs HEX for `publicKey` and correctly formatted `Type` field.&quot;&quot;&quot;</span>
        <span class="n">public_key_hex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>  <span class="c1">#  Convert bytes to HEX</span>
        <span class="n">signature_type_rpc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">()</span>  <span class="c1">#  Convert signature type to expected RPC format</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL HEX public key before sending: </span><span class="si">{</span><span class="n">public_key_hex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL SignatureType before sending: </span><span class="si">{</span><span class="n">signature_type_rpc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="s2">&quot;publicKeySearch&quot;</span><span class="p">,</span>  <span class="c1">#  Explicit string</span>
            <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="n">public_key_hex</span><span class="p">,</span>  <span class="c1">#  Send HEX, NOT Base58</span>
            <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="n">signature_type_rpc</span><span class="p">,</span>  <span class="c1">#  Send SignatureType as a string</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.PublicKeySearchQuery._convert_to_hex" class="doc doc-heading">
            <code class=" language-python"><span class="n">_convert_to_hex</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span></code>

<a href="#accumulate.models.queries.PublicKeySearchQuery._convert_to_hex" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Detect and convert the provided public key to HEX.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_convert_to_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Detect and convert the provided public key to HEX.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">public_key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;MH&quot;</span><span class="p">):</span>  
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">parse_mh_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parsed</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Invalid MH address: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed MH public key: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parsed</span><span class="o">.</span><span class="n">hash</span>

    <span class="k">elif</span> <span class="n">public_key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">):</span>  
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed hex address: </span><span class="si">{</span><span class="n">public_key</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">public_key</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>  <span class="c1">#  Remove &#39;0x&#39; and convert hex</span>

    <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[0-9a-fA-F]+&quot;</span><span class="p">,</span> <span class="n">public_key</span><span class="p">):</span>  
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed raw hex: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>  <span class="c1">#  Convert raw hex</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#  Convert Base58 public key to HEX</span>
            <span class="n">decoded_bytes</span> <span class="o">=</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58decode</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>  
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Parsed Base58 public key (converted to HEX): </span><span class="si">{</span><span class="n">decoded_bytes</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">decoded_bytes</span>  <span class="c1"># Store as bytes</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Invalid public key format: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">, Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid public key format: </span><span class="si">{</span><span class="n">public_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.PublicKeySearchQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.PublicKeySearchQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the public key search query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the public key search query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot; Public key is required for a public key search query.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Public key is required for a public key search query.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">SignatureType</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot; Signature type must be a valid SignatureType enum.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="s2">&quot;Signature type must be a valid SignatureType enum.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.PublicKeySearchQuery.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.PublicKeySearchQuery.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Ensure the query outputs HEX for <code>publicKey</code> and correctly formatted <code>Type</code> field.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure the query outputs HEX for `publicKey` and correctly formatted `Type` field.&quot;&quot;&quot;</span>
    <span class="n">public_key_hex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>  <span class="c1">#  Convert bytes to HEX</span>
    <span class="n">signature_type_rpc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">()</span>  <span class="c1">#  Convert signature type to expected RPC format</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL HEX public key before sending: </span><span class="si">{</span><span class="n">public_key_hex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL SignatureType before sending: </span><span class="si">{</span><span class="n">signature_type_rpc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="s2">&quot;publicKeySearch&quot;</span><span class="p">,</span>  <span class="c1">#  Explicit string</span>
        <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="n">public_key_hex</span><span class="p">,</span>  <span class="c1">#  Send HEX, NOT Base58</span>
        <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="n">signature_type_rpc</span><span class="p">,</span>  <span class="c1">#  Send SignatureType as a string</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.queries.Query" class="doc doc-heading">
            <code>Query</code>


<a href="#accumulate.models.queries.Query" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for all query types.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\queries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Query</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all query types.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_type</span><span class="p">:</span> <span class="n">QueryType</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_type</span> <span class="o">=</span> <span class="n">query_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span> <span class="ow">or</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the query parameters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the query to a dictionary ensuring queryType is formatted correctly.&quot;&quot;&quot;</span>
        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">(),</span>  <span class="c1"># Convert to lowercase string</span>
        <span class="p">}</span>
        <span class="n">query_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Merge additional parameters</span>
        <span class="k">return</span> <span class="n">query_dict</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.Query.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.Query.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the query parameters.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the query parameters.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.queries.Query.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.queries.Query.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the query to a dictionary ensuring queryType is formatted correctly.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\queries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the query to a dictionary ensuring queryType is formatted correctly.&quot;&quot;&quot;</span>
    <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">(),</span>  <span class="c1"># Convert to lowercase string</span>
    <span class="p">}</span>
    <span class="n">query_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>  <span class="c1"># Merge additional parameters</span>
    <span class="k">return</span> <span class="n">query_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><hr />
<h2 id="models-schemas">Models &amp; Schemas<a class="headerlink" href="#models-schemas" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.models.records" class="doc doc-heading">
            <code>records</code>


<a href="#accumulate.models.records" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.AccountRecord" class="doc doc-heading">
            <code>AccountRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.AccountRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents an account record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AccountRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an account record.&quot;&quot;&quot;</span>
    <span class="n">account</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">directory</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RecordRange</span><span class="p">[</span><span class="n">UrlRecord</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">pending</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RecordRange</span><span class="p">[</span><span class="n">TxIDRecord</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">last_block_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">,</span>
            <span class="s2">&quot;directory&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;pending&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pending</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">receipt</span><span class="p">,</span>
            <span class="s2">&quot;last_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AccountRecord&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">account</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;account&quot;</span><span class="p">],</span>
            <span class="n">directory</span><span class="o">=</span><span class="n">RecordRange</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;directory&quot;</span><span class="p">],</span> <span class="n">UrlRecord</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;directory&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">pending</span><span class="o">=</span><span class="n">RecordRange</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;records&quot;</span><span class="p">],</span> <span class="n">TxIDRecord</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">receipt</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;receipt&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="n">last_block_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert raw balance (stored in micro-ACME) to actual ACME tokens.&quot;&quot;&quot;</span>
        <span class="n">raw_balance</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;balance&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  <span class="c1"># Get the raw integer balance</span>
        <span class="k">return</span> <span class="n">raw_balance</span> <span class="o">/</span> <span class="mf">1e8</span>  <span class="c1"># Convert micro-ACME (1 ACME = 100,000,000 units)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="accumulate.models.records.AccountRecord.balance" class="doc doc-heading">
            <code class=" language-python"><span class="n">balance</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#accumulate.models.records.AccountRecord.balance" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert raw balance (stored in micro-ACME) to actual ACME tokens.</p>
    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.AccumulateError" class="doc doc-heading">
            <code>AccumulateError</code>


<a href="#accumulate.models.records.AccumulateError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base class for all custom exceptions in the Accumulate client.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccumulateError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all custom exceptions in the Accumulate client.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.ChainEntryRecord" class="doc doc-heading">
            <code>ChainEntryRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.ChainEntryRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a chain entry record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ChainEntryRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a chain entry record.&quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">count</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">entry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">last_block_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
            <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">,</span>
            <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">,</span>
            <span class="s2">&quot;receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">receipt</span><span class="p">,</span>
            <span class="s2">&quot;last_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ChainEntryRecord&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">),</span>
            <span class="n">count</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">),</span>
            <span class="n">state</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="n">account</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;account&quot;</span><span class="p">),</span>
            <span class="n">index</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
            <span class="n">entry</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entry&quot;</span><span class="p">),</span>
            <span class="n">receipt</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;receipt&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="n">last_block_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.ChainRecord" class="doc doc-heading">
            <code>ChainRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.ChainRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a chain record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ChainRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a chain record.&quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optional to resolve field ordering</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optional to resolve field ordering</span>
    <span class="n">count</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optional to resolve field ordering</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>  <span class="c1"># Optional with a default factory</span>
    <span class="n">last_block_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optional field</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts the ChainRecord to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
            <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="s2">&quot;last_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ChainRecord&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a ChainRecord instance from a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">),</span>
            <span class="n">count</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">),</span>
            <span class="n">state</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="p">[]),</span>  <span class="c1"># Defaults to an empty list if not provided</span>
            <span class="n">last_block_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.records.ChainRecord.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.records.ChainRecord.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a ChainRecord instance from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ChainRecord&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a ChainRecord instance from a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">),</span>
        <span class="n">count</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">),</span>
        <span class="n">state</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="p">[]),</span>  <span class="c1"># Defaults to an empty list if not provided</span>
        <span class="n">last_block_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.records.ChainRecord.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.records.ChainRecord.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Converts the ChainRecord to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts the ChainRecord to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="s2">&quot;last_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.KeyRecord" class="doc doc-heading">
            <code>KeyRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.KeyRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a key record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">KeyRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a key record.&quot;&quot;&quot;</span>
    <span class="n">authority</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">signer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">entry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;authority&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span>
            <span class="s2">&quot;signer&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="p">,</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="s2">&quot;entry&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KeyRecord&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">authority</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;authority&quot;</span><span class="p">),</span>
            <span class="n">signer</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signer&quot;</span><span class="p">),</span>
            <span class="n">version</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">),</span>
            <span class="n">index</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">),</span>
            <span class="n">entry</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entry&quot;</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.MessageRecord" class="doc doc-heading">
            <code>MessageRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.MessageRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a message record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MessageRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a message record.&quot;&quot;&quot;</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">received</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">produced</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RecordRange</span><span class="p">[</span><span class="n">TxIDRecord</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">cause</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RecordRange</span><span class="p">[</span><span class="n">TxIDRecord</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">signatures</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RecordRange</span><span class="p">[</span><span class="s2">&quot;SignatureSetRecord&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">historical</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">last_block_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="ow">or</span> <span class="p">{},</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
            <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="ow">or</span> <span class="p">{},</span>
            <span class="s2">&quot;received&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">received</span><span class="p">,</span>
            <span class="s2">&quot;produced&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">produced</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">produced</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;cause&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cause</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cause</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;signatures&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">signatures</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signatures</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;historical&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">historical</span><span class="p">,</span>
            <span class="s2">&quot;last_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># Remove fields with None values</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;MessageRecord&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">),</span>
            <span class="n">message</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="n">status</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">),</span>
            <span class="n">result</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="n">received</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;received&quot;</span><span class="p">),</span>
            <span class="n">produced</span><span class="o">=</span><span class="n">RecordRange</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;produced&quot;</span><span class="p">],</span> <span class="n">TxIDRecord</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;produced&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">cause</span><span class="o">=</span><span class="n">RecordRange</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;cause&quot;</span><span class="p">],</span> <span class="n">TxIDRecord</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;cause&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">signatures</span><span class="o">=</span><span class="n">RecordRange</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">],</span> <span class="n">SignatureSetRecord</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;signatures&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">historical</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;historical&quot;</span><span class="p">),</span>
            <span class="n">last_block_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.Record" class="doc doc-heading">
            <code>Record</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.Record" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for records in the Accumulate blockchain.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Record</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for records in the Accumulate blockchain.&quot;&quot;&quot;</span>
    <span class="n">record_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;UNKNOWN&quot;</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;record_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">record_type</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Record&quot;</span><span class="p">:</span>
        <span class="c1"># Lazy import to resolve circular dependency</span>
        <span class="n">RecordType</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="s2">&quot;accumulate.models.enums&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">enums</span><span class="o">.</span><span class="n">RecordType</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">record_type</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;record_type&quot;</span><span class="p">,</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">),</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">{}),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.RecordRange" class="doc doc-heading">
            <code>RecordRange</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.RecordRange" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="accumulate.models.records.T">T</span>]</code></p>


        <p>Represents a range of records.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RecordRange</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a range of records.&quot;&quot;&quot;</span>
    <span class="n">records</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">last_block_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">item_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">Record</span>  <span class="c1"># Add this field to define the type explicitly</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;records&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">],</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
            <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="s2">&quot;last_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_block_time</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">record_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;RecordRange[T]&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Handle None gracefully</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">records</span><span class="o">=</span><span class="p">[],</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">last_block_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item_type</span><span class="o">=</span><span class="n">record_cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">records</span><span class="o">=</span><span class="p">[</span><span class="n">record_cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="p">[])],</span>
            <span class="n">start</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">),</span>
            <span class="n">total</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;total&quot;</span><span class="p">),</span>
            <span class="n">last_block_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_block_time&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">item_type</span><span class="o">=</span><span class="n">record_cls</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.SignatureSetRecord" class="doc doc-heading">
            <code>SignatureSetRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.SignatureSetRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a signature set record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SignatureSetRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a signature set record.&quot;&quot;&quot;</span>
    <span class="n">account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">signatures</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">RecordRange</span><span class="p">[</span><span class="n">MessageRecord</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="p">,</span>
            <span class="s2">&quot;signatures&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">signatures</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signatures</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SignatureSetRecord&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">account</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;account&quot;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="n">signatures</span><span class="o">=</span><span class="n">RecordRange</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;signatures&quot;</span><span class="p">],</span> <span class="n">MessageRecord</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;signatures&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.TxIDRecord" class="doc doc-heading">
            <code>TxIDRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.TxIDRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a TxID record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TxIDRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a TxID record.&quot;&quot;&quot;</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TxIDRecord&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.records.UrlRecord" class="doc doc-heading">
            <code>UrlRecord</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.records.UrlRecord" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a URL record.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\records.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UrlRecord</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a URL record.&quot;&quot;&quot;</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UrlRecord&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.models.records.range_of" class="doc doc-heading">
            <code class=" language-python"><span class="n">range_of</span><span class="p">(</span><span class="n">record_range</span><span class="p">,</span> <span class="n">item_type</span><span class="p">)</span></code>

<a href="#accumulate.models.records.range_of" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Validate and cast a RecordRange to a specific item type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\records.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">range_of</span><span class="p">(</span><span class="n">record_range</span><span class="p">:</span> <span class="s2">&quot;RecordRange&quot;</span><span class="p">,</span> <span class="n">item_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;RecordRange[T]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate and cast a RecordRange to a specific item type.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">item_type</span><span class="p">)</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">record_range</span><span class="o">.</span><span class="n">records</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;RecordRange contains items of an incorrect type. Expected </span><span class="si">{</span><span class="n">item_type</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;but got </span><span class="si">{</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">record</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">record_range</span><span class="o">.</span><span class="n">records</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">record_range</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.accounts" class="doc doc-heading">
            <code>accounts</code>


<a href="#accumulate.models.accounts" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.accounts.Account" class="doc doc-heading">
            <code>Account</code>


<a href="#accumulate.models.accounts.Account" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.union.UnionValue" href="#accumulate.utils.union.UnionValue">UnionValue</a></code></p>


        <p>Base class for all account types.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Account</span><span class="p">(</span><span class="n">UnionValue</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all account types.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Account type not implemented&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;get_url() not implemented&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strip_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;strip_url() not implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.accounts.FullAccount" class="doc doc-heading">
            <code>FullAccount</code>


<a href="#accumulate.models.accounts.FullAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.accounts.Account" href="#accumulate.models.accounts.Account">Account</a></code></p>


        <p>Base class for accounts with authentication.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FullAccount</span><span class="p">(</span><span class="n">Account</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for accounts with authentication.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_auth</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;AccountAuth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">account_auth</span> <span class="o">=</span> <span class="n">account_auth</span> <span class="ow">or</span> <span class="n">AccountAuth</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;AccountAuth&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_auth</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.accounts.KeyBook" class="doc doc-heading">
            <code>KeyBook</code>


<a href="#accumulate.models.accounts.KeyBook" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.accounts.FullAccount" href="#accumulate.models.accounts.FullAccount">FullAccount</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">KeyBook</span><span class="p">(</span><span class="n">FullAccount</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">account_auth</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;AccountAuth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">page_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">book_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Initializing KeyBook with URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">, page_count: </span><span class="si">{</span><span class="n">page_count</span><span class="si">}</span><span class="s2">, book_type: </span><span class="si">{</span><span class="n">book_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">account_auth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="c1"># Enforce additional validation specific to KeyBook</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Ensured URL in KeyBook: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key_book_url</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">page_count</span> <span class="o">=</span> <span class="n">page_count</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">book_type</span> <span class="o">=</span> <span class="n">book_type</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: KeyBook initialized successfully with URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.url</span><span class="w"> </span><span class="kn">import</span> <span class="n">URL</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsing URL from string in _ensure_url: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1">#</span>
            <span class="k">return</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="c1">#</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="c1"># Normalize existing URL objects</span>
            <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span> <span class="ow">or</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid URL: &#39;@&#39; not allowed in authority: </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid URL: Redundant &#39;acc://&#39; in authority: </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_key_book_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validation specific to KeyBook URLs.&quot;&quot;&quot;</span>
        <span class="c1"># Ensure the URL path is not empty or just &quot;/&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Missing book name in path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> must include a book name in the path.&quot;</span><span class="p">)</span>

        <span class="c1"># Ensure the path does not contain invalid characters</span>
        <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Invalid characters in path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> contains invalid characters in the path.&quot;</span><span class="p">)</span>

        <span class="c1"># Ensure authority is not empty or invalid</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Missing or empty authority: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: Authority must not be empty in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Check for invalid domain names</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.com&quot;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Invalid domain in authority: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> contains invalid domain in authority.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Retrieving URL in KeyBook: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strip_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Stripping extras from URL in KeyBook: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">strip_extras</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: URL after stripping: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_signers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Generating signers for KeyBook with page_count: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">page_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">signers</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_format_key_page_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">page_count</span><span class="p">)]</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Generated signers in KeyBook: </span><span class="si">{</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">signer</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">signers</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">signers</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_key_page_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">book_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">book_url</span><span class="o">.</span><span class="n">authority</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">book_url</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: </span><span class="si">{</span><span class="n">book_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">normalized_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">book_url</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">book_url</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">normalized_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.accounts.KeyBook._validate_key_book_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">_validate_key_book_url</span><span class="p">()</span></code>

<a href="#accumulate.models.accounts.KeyBook._validate_key_book_url" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validation specific to KeyBook URLs.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_validate_key_book_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validation specific to KeyBook URLs.&quot;&quot;&quot;</span>
    <span class="c1"># Ensure the URL path is not empty or just &quot;/&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Missing book name in path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> must include a book name in the path.&quot;</span><span class="p">)</span>

    <span class="c1"># Ensure the path does not contain invalid characters</span>
    <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Invalid characters in path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> contains invalid characters in the path.&quot;</span><span class="p">)</span>

    <span class="c1"># Ensure authority is not empty or invalid</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Missing or empty authority: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: Authority must not be empty in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Check for invalid domain names</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.com&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid KeyBook URL - Invalid domain in authority: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid KeyBook URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> contains invalid domain in authority.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.accounts.LiteIdentity" class="doc doc-heading">
            <code>LiteIdentity</code>


<a href="#accumulate.models.accounts.LiteIdentity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.accounts.Account" href="#accumulate.models.accounts.Account">Account</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LiteIdentity</span><span class="p">(</span><span class="n">Account</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">credit_balance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">last_used_on</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;URL cannot be None.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">credit_balance</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Credit balance cannot be negative.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span> <span class="o">=</span> <span class="n">credit_balance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_used_on</span> <span class="o">=</span> <span class="n">last_used_on</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.url</span><span class="w"> </span><span class="kn">import</span> <span class="n">URL</span>
            <span class="k">return</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strip_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">strip_extras</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_credit_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_signature_threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">entry_by_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;LiteIdentity&#39;</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="n">key_hash</span> <span class="o">=</span> <span class="n">sha256</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">lite_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_lite_identity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Calculated key_hash[:20]: </span><span class="si">{</span><span class="n">key_hash</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Derived lite_key: </span><span class="si">{</span><span class="n">lite_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">lite_key</span> <span class="o">==</span> <span class="n">key_hash</span><span class="p">[:</span><span class="mi">20</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Key match successful.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="kc">True</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Key match failed.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_lite_identity</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sha256</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()[:</span><span class="mi">20</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom representation for LiteIdentity.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;LiteIdentity url=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;credit_balance=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;last_used_on=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">last_used_on</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.accounts.LiteIdentity.__repr__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#accumulate.models.accounts.LiteIdentity.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Custom representation for LiteIdentity.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom representation for LiteIdentity.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;&lt;LiteIdentity url=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;credit_balance=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span><span class="si">}</span><span class="s2">, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;last_used_on=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">last_used_on</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.accounts.LiteTokenAccount" class="doc doc-heading">
            <code>LiteTokenAccount</code>


<a href="#accumulate.models.accounts.LiteTokenAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.accounts.Account" href="#accumulate.models.accounts.Account">Account</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LiteTokenAccount</span><span class="p">(</span><span class="n">Account</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">token_url</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">balance</span><span class="p">:</span> <span class="n">Decimal</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.00&quot;</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">token_url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;URL and Token URL cannot be None.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">balance</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Balance cannot be negative.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_url</span><span class="p">(</span><span class="n">token_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_url</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid lite token account URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">token_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the URL is valid or parse it.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.url</span><span class="w"> </span><span class="kn">import</span> <span class="n">URL</span>
            <span class="k">return</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strip_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">strip_extras</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">token_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">credit_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="n">amount</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">can_debit_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">&gt;=</span> <span class="n">amount</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">debit_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_debit_tokens</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">amount</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.accounts.LiteTokenAccount._ensure_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">_ensure_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.models.accounts.LiteTokenAccount._ensure_url" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Ensure the URL is valid or parse it.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_ensure_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure the URL is valid or parse it.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.url</span><span class="w"> </span><span class="kn">import</span> <span class="n">URL</span>
        <span class="k">return</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.accounts.UnknownAccount" class="doc doc-heading">
            <code>UnknownAccount</code>


<a href="#accumulate.models.accounts.UnknownAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.accounts.Account" href="#accumulate.models.accounts.Account">Account</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UnknownAccount</span><span class="p">(</span><span class="n">Account</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure the URL is a valid instance or parse it.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.url</span><span class="w"> </span><span class="kn">import</span> <span class="n">URL</span>
            <span class="k">return</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strip_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">strip_extras</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.accounts.UnknownAccount._ensure_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">_ensure_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.models.accounts.UnknownAccount._ensure_url" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Ensure the URL is a valid instance or parse it.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\accounts.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_ensure_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure the URL is a valid instance or parse it.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.url</span><span class="w"> </span><span class="kn">import</span> <span class="n">URL</span>
        <span class="k">return</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.submission" class="doc doc-heading">
            <code>submission</code>


<a href="#accumulate.models.submission" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.submission.Submission" class="doc doc-heading">
            <code>Submission</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.submission.Submission" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a transaction submission in the Accumulate blockchain.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\submission.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Submission</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a transaction submission in the Accumulate blockchain.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">txid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Add `txid` field</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Corresponds to protocol.TransactionStatus</span>
    <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Indicates whether the envelope was successfully submitted</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Message returned by the consensus engine</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The &#39;status&#39; field must be a dictionary or None.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the Submission instance to a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;txid&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">txid</span><span class="p">,</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
            <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">success</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Submission&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Submission instance from a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">txid</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;txid&quot;</span><span class="p">),</span>  <span class="c1"># extract the `txid` field</span>
            <span class="n">status</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">),</span>
            <span class="n">success</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="n">message</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.submission.Submission.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.submission.Submission.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a Submission instance from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\submission.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Submission&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a Submission instance from a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">txid</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;txid&quot;</span><span class="p">),</span>  <span class="c1"># extract the `txid` field</span>
        <span class="n">status</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">),</span>
        <span class="n">success</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">message</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.submission.Submission.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.submission.Submission.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Converts the Submission instance to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\submission.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the Submission instance to a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;txid&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">txid</span><span class="p">,</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
        <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">success</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.signature_types" class="doc doc-heading">
            <code>signature_types</code>


<a href="#accumulate.models.signature_types" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signature_types.SignatureType" class="doc doc-heading">
            <code>SignatureType</code>


<a href="#accumulate.models.signature_types.SignatureType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Cryptographic signature algorithms using string identifiers.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signature_types.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SignatureType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cryptographic signature algorithms using string identifiers.&quot;&quot;&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mh">0x00</span>
    <span class="n">LEGACY_ED25519</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">ED25519</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">RCD1</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="n">RECEIPT</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="n">PARTITION</span> <span class="o">=</span> <span class="mh">0x05</span>
    <span class="n">SET</span> <span class="o">=</span> <span class="mh">0x06</span>
    <span class="n">REMOTE</span> <span class="o">=</span> <span class="mh">0x07</span>
    <span class="n">BTC</span> <span class="o">=</span> <span class="mh">0x08</span>
    <span class="n">BTC_LEGACY</span> <span class="o">=</span> <span class="mh">0x09</span>
    <span class="n">ETH</span> <span class="o">=</span> <span class="mh">0x0A</span>
    <span class="n">DELEGATED</span> <span class="o">=</span> <span class="mh">0x0B</span>
    <span class="n">INTERNAL</span> <span class="o">=</span> <span class="mh">0x0C</span>
    <span class="n">AUTHORITY</span> <span class="o">=</span> <span class="mh">0x0D</span>
    <span class="n">RSA_SHA256</span> <span class="o">=</span> <span class="mh">0x0E</span>
    <span class="n">ECDSA_SHA256</span> <span class="o">=</span> <span class="mh">0x0F</span>
    <span class="n">TYPED_DATA</span> <span class="o">=</span> <span class="mh">0x10</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve an enum instance by its value.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">item</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid SignatureType value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_rpc_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert SignatureType to the expected string format for JSON-RPC.&quot;&quot;&quot;</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">LEGACY_ED25519</span><span class="p">:</span> <span class="s2">&quot;legacyEd25519&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span> <span class="s2">&quot;ed25519&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">RCD1</span><span class="p">:</span> <span class="s2">&quot;rcd1&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">RECEIPT</span><span class="p">:</span> <span class="s2">&quot;receipt&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">PARTITION</span><span class="p">:</span> <span class="s2">&quot;partition&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">SET</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">REMOTE</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">:</span> <span class="s2">&quot;btc&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC_LEGACY</span><span class="p">:</span> <span class="s2">&quot;btcLegacy&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span> <span class="s2">&quot;eth&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">DELEGATED</span><span class="p">:</span> <span class="s2">&quot;delegated&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">INTERNAL</span><span class="p">:</span> <span class="s2">&quot;internal&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">AUTHORITY</span><span class="p">:</span> <span class="s2">&quot;authority&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span> <span class="s2">&quot;rsaSha256&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span> <span class="s2">&quot;ecdsaSha256&quot;</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">TYPED_DATA</span><span class="p">:</span> <span class="s2">&quot;typedData&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signature_types.SignatureType.from_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.signature_types.SignatureType.from_value" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve an enum instance by its value.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signature_types.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve an enum instance by its value.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">item</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid SignatureType value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signature_types.SignatureType.to_rpc_format" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_rpc_format</span><span class="p">()</span></code>

<a href="#accumulate.models.signature_types.SignatureType.to_rpc_format" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert SignatureType to the expected string format for JSON-RPC.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signature_types.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_rpc_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert SignatureType to the expected string format for JSON-RPC.&quot;&quot;&quot;</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">LEGACY_ED25519</span><span class="p">:</span> <span class="s2">&quot;legacyEd25519&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span> <span class="s2">&quot;ed25519&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">RCD1</span><span class="p">:</span> <span class="s2">&quot;rcd1&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">RECEIPT</span><span class="p">:</span> <span class="s2">&quot;receipt&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">PARTITION</span><span class="p">:</span> <span class="s2">&quot;partition&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">SET</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">REMOTE</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">:</span> <span class="s2">&quot;btc&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC_LEGACY</span><span class="p">:</span> <span class="s2">&quot;btcLegacy&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span> <span class="s2">&quot;eth&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">DELEGATED</span><span class="p">:</span> <span class="s2">&quot;delegated&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">INTERNAL</span><span class="p">:</span> <span class="s2">&quot;internal&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">AUTHORITY</span><span class="p">:</span> <span class="s2">&quot;authority&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span> <span class="s2">&quot;rsaSha256&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span> <span class="s2">&quot;ecdsaSha256&quot;</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">TYPED_DATA</span><span class="p">:</span> <span class="s2">&quot;typedData&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><hr />
<h2 id="additional-models-schemas">Additional Models &amp; Schemas<a class="headerlink" href="#additional-models-schemas" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.models.AccountAuthOperations" class="doc doc-heading">
            <code>AccountAuthOperations</code>


<a href="#accumulate.models.AccountAuthOperations" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.AccountAuthOperations.AccountAuthOperation" class="doc doc-heading">
            <code>AccountAuthOperation</code>


<a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for account authentication operations.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\AccountAuthOperations.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccountAuthOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for account authentication operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authority</span> <span class="o">=</span> <span class="n">authority</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountAuthOperationType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the operation type. Must be implemented by subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement the `type` method.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a unique hash for this operation based on its attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">sha256</span><span class="p">(</span><span class="n">serialized</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.AccountAuthOperations.AccountAuthOperation.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate a unique hash for this operation based on its attributes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\AccountAuthOperations.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a unique hash for this operation based on its attributes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">sha256</span><span class="p">(</span><span class="n">serialized</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.AccountAuthOperations.AccountAuthOperation.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.AccountAuthOperations.AccountAuthOperation.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the operation type. Must be implemented by subclasses.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\AccountAuthOperations.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountAuthOperationType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the operation type. Must be implemented by subclasses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement the `type` method.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.AccountAuthOperations.AddAccountAuthorityOperation" class="doc doc-heading">
            <code>AddAccountAuthorityOperation</code>


<a href="#accumulate.models.AccountAuthOperations.AddAccountAuthorityOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.AccountAuthOperations.AccountAuthOperation" href="#accumulate.models.AccountAuthOperations.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Represents an operation to add an authority to an account's authorization list.</p>
<p>:param authority: The URL of the authority to add.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\AccountAuthOperations.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AddAccountAuthorityOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to add an authority to an account&#39;s authorization list.</span>

<span class="sd">    :param authority: The URL of the authority to add.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountAuthOperationType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AccountAuthOperationType</span><span class="o">.</span><span class="n">ADD_AUTHORITY</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.AccountAuthOperations.DisableAccountAuthOperation" class="doc doc-heading">
            <code>DisableAccountAuthOperation</code>


<a href="#accumulate.models.AccountAuthOperations.DisableAccountAuthOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.AccountAuthOperations.AccountAuthOperation" href="#accumulate.models.AccountAuthOperations.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Represents an operation to disable authorization for a specific authority.</p>
<p>:param authority: The URL of the authority to disable.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\AccountAuthOperations.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DisableAccountAuthOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to disable authorization for a specific authority.</span>

<span class="sd">    :param authority: The URL of the authority to disable.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountAuthOperationType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AccountAuthOperationType</span><span class="o">.</span><span class="n">DISABLE</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.AccountAuthOperations.EnableAccountAuthOperation" class="doc doc-heading">
            <code>EnableAccountAuthOperation</code>


<a href="#accumulate.models.AccountAuthOperations.EnableAccountAuthOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.AccountAuthOperations.AccountAuthOperation" href="#accumulate.models.AccountAuthOperations.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Represents an operation to enable authorization for a specific authority.</p>
<p>:param authority: The URL of the authority to enable.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\AccountAuthOperations.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EnableAccountAuthOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to enable authorization for a specific authority.</span>

<span class="sd">    :param authority: The URL of the authority to enable.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountAuthOperationType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AccountAuthOperationType</span><span class="o">.</span><span class="n">ENABLE</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.AccountAuthOperations.RemoveAccountAuthorityOperation" class="doc doc-heading">
            <code>RemoveAccountAuthorityOperation</code>


<a href="#accumulate.models.AccountAuthOperations.RemoveAccountAuthorityOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.AccountAuthOperations.AccountAuthOperation" href="#accumulate.models.AccountAuthOperations.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Represents an operation to remove an authority from an account's authorization list.</p>
<p>:param authority: The URL of the authority to remove.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\AccountAuthOperations.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RemoveAccountAuthorityOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to remove an authority from an account&#39;s authorization list.</span>

<span class="sd">    :param authority: The URL of the authority to remove.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccountAuthOperationType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AccountAuthOperationType</span><span class="o">.</span><span class="n">REMOVE_AUTHORITY</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.address" class="doc doc-heading">
            <code>address</code>


<a href="#accumulate.models.address" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.address.Address" class="doc doc-heading">
            <code>Address</code>


<a href="#accumulate.models.address.Address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Abstract base class for addresses.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\address.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Address</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract base class for addresses.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the type of the address.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the public key hash.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the public key.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the private key.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the string representation of the address.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.address.Address.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#accumulate.models.address.Address.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the string representation of the address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\address.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the string representation of the address.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.address.Address.get_private_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_private_key</span><span class="p">()</span></code>

<a href="#accumulate.models.address.Address.get_private_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the private key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\address.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the private key.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.address.Address.get_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key</span><span class="p">()</span></code>

<a href="#accumulate.models.address.Address.get_public_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\address.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the public key.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.address.Address.get_public_key_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key_hash</span><span class="p">()</span></code>

<a href="#accumulate.models.address.Address.get_public_key_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the public key hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\address.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the public key hash.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.address.Address.get_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_type</span><span class="p">()</span></code>

<a href="#accumulate.models.address.Address.get_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the type of the address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\address.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the type of the address.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.address.Lite" class="doc doc-heading">
            <code>Lite</code>


<a href="#accumulate.models.address.Lite" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.address.Address" href="#accumulate.models.address.Address">Address</a></code></p>


        <p>Represents a lightweight address.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\address.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Lite</span><span class="p">(</span><span class="n">Address</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a lightweight address.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">address_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address_bytes</span> <span class="o">=</span> <span class="n">address_bytes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Unknown&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.address.PrivateKey" class="doc doc-heading">
            <code>PrivateKey</code>


<a href="#accumulate.models.address.PrivateKey" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.address.PublicKey" href="#accumulate.models.address.PublicKey">PublicKey</a></code></p>


        <p>Represents an address based on a private key.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\address.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PrivateKey</span><span class="p">(</span><span class="n">PublicKey</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an address based on a private key.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">public_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">private_key</span> <span class="o">=</span> <span class="n">private_key</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">private_key</span><span class="p">,</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">private_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.address.PublicKey" class="doc doc-heading">
            <code>PublicKey</code>


<a href="#accumulate.models.address.PublicKey" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.address.Address" href="#accumulate.models.address.Address">Address</a></code></p>


        <p>Represents an address based on a public key.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\address.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PublicKey</span><span class="p">(</span><span class="n">Address</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an address based on a public key.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span> <span class="o">=</span> <span class="n">signature_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">public_key</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="c1"># Simulate hashing for demonstration</span>
        <span class="k">return</span> <span class="n">hash_public_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">hash_value</span><span class="p">,</span> <span class="n">valid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key_hash</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&lt;invalid address&gt;&quot;</span>
        <span class="k">return</span> <span class="n">format_address</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">hash_value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.address.PublicKeyHashAddress" class="doc doc-heading">
            <code>PublicKeyHashAddress</code>


<a href="#accumulate.models.address.PublicKeyHashAddress" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.address.Address" href="#accumulate.models.address.Address">Address</a></code></p>


        <p>Represents an address based on a public key hash.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\address.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PublicKeyHashAddress</span><span class="p">(</span><span class="n">Address</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an address based on a public key hash.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hash_value</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span> <span class="o">=</span> <span class="n">signature_type</span> <span class="c1">#</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hash_value</span> <span class="o">=</span> <span class="n">hash_value</span> <span class="c1">#</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash_value</span><span class="p">,</span> <span class="kc">True</span> <span class="c1">#</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">format_address</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash_value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.address.Unknown" class="doc doc-heading">
            <code>Unknown</code>


<a href="#accumulate.models.address.Unknown" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.address.Address" href="#accumulate.models.address.Address">Address</a></code></p>


        <p>Represents an unknown address.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\address.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Unknown</span><span class="p">(</span><span class="n">Address</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an unknown address.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;hex&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">encoding</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Unknown&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">==</span> <span class="s2">&quot;base58&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.models.address.format_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_address</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">hash_value</span><span class="p">)</span></code>

<a href="#accumulate.models.address.format_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Format an address based on its type and hash value.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\address.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_address</span><span class="p">(</span><span class="n">signature_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hash_value</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Format an address based on its type and hash value.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;ED25519&quot;</span><span class="p">,</span> <span class="s2">&quot;LegacyED25519&quot;</span><span class="p">}:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;AC1-</span><span class="si">{</span><span class="n">hash_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="s2">&quot;RCD1&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;FA-</span><span class="si">{</span><span class="n">hash_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;BTC&quot;</span><span class="p">,</span> <span class="s2">&quot;BTCLegacy&quot;</span><span class="p">}:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;BTC-</span><span class="si">{</span><span class="n">hash_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="s2">&quot;ETH&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ETH-</span><span class="si">{</span><span class="n">hash_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="s2">&quot;EcdsaSha256&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;AC2-</span><span class="si">{</span><span class="n">hash_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="s2">&quot;RsaSha256&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;AC3-</span><span class="si">{</span><span class="n">hash_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;MH-</span><span class="si">{</span><span class="n">hash_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.address.hash_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">hash_public_key</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">)</span></code>

<a href="#accumulate.models.address.hash_public_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Hash a public key based on its signature type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\address.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash_public_key</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hash a public key based on its signature type.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;ED25519&quot;</span><span class="p">,</span> <span class="s2">&quot;LegacyED25519&quot;</span><span class="p">}:</span>
            <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">(),</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="s2">&quot;BTC&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">(),</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.auth" class="doc doc-heading">
            <code>auth</code>


<a href="#accumulate.models.auth" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.auth.AccountAuth" class="doc doc-heading">
            <code>AccountAuth</code>


<a href="#accumulate.models.auth.AccountAuth" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Manages account authorities for access control.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\auth.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccountAuth</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Manages account authorities for access control.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize AccountAuth.</span>

<span class="sd">        :param authorities: Optional list of AuthorityEntry objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">]</span> <span class="o">=</span> <span class="n">authorities</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">key_book</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the primary authority&#39;s URL.</span>

<span class="sd">        :return: URL of the primary authority or None if not available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">manager_key_book</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the secondary authority&#39;s URL.</span>

<span class="sd">        :return: URL of the secondary authority or None if not available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">url</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">all_authorities_are_disabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if all authorities are disabled.</span>

<span class="sd">        :return: True if all authorities are disabled, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">authority</span><span class="o">.</span><span class="n">disabled</span> <span class="k">for</span> <span class="n">authority</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_authority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an authority entry by its URL.</span>

<span class="sd">        :param entry_url: The URL of the authority to find.</span>
<span class="sd">        :return: A tuple containing the AuthorityEntry and a boolean indicating if it was found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">authority</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">authority</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">entry_url</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">authority</span><span class="p">,</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_authority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new authority entry.</span>

<span class="sd">        :param entry_url: The URL of the new authority.</span>
<span class="sd">        :return: A tuple containing the new or existing AuthorityEntry and a boolean indicating if it was newly added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">existing_authority</span><span class="p">,</span> <span class="n">found</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_authority</span><span class="p">(</span><span class="n">entry_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">existing_authority</span><span class="p">,</span> <span class="kc">False</span>
        <span class="n">new_authority</span> <span class="o">=</span> <span class="n">AuthorityEntry</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">entry_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_authority</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">auth</span><span class="p">:</span> <span class="n">auth</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># Keep the list sorted</span>
        <span class="k">return</span> <span class="n">new_authority</span><span class="p">,</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove_authority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove an authority entry by its URL.</span>

<span class="sd">        :param entry_url: The URL of the authority to remove.</span>
<span class="sd">        :return: True if the authority was removed, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">authority</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">authority</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">entry_url</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AccountAuth.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">authorities</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.auth.AccountAuth.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize AccountAuth.</p>
<p>:param authorities: Optional list of AuthorityEntry objects.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize AccountAuth.</span>

<span class="sd">    :param authorities: Optional list of AuthorityEntry objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">]</span> <span class="o">=</span> <span class="n">authorities</span> <span class="ow">or</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AccountAuth.add_authority" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_authority</span><span class="p">(</span><span class="n">entry_url</span><span class="p">)</span></code>

<a href="#accumulate.models.auth.AccountAuth.add_authority" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add a new authority entry.</p>
<p>:param entry_url: The URL of the new authority.
:return: A tuple containing the new or existing AuthorityEntry and a boolean indicating if it was newly added.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_authority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a new authority entry.</span>

<span class="sd">    :param entry_url: The URL of the new authority.</span>
<span class="sd">    :return: A tuple containing the new or existing AuthorityEntry and a boolean indicating if it was newly added.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">existing_authority</span><span class="p">,</span> <span class="n">found</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_authority</span><span class="p">(</span><span class="n">entry_url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">existing_authority</span><span class="p">,</span> <span class="kc">False</span>
    <span class="n">new_authority</span> <span class="o">=</span> <span class="n">AuthorityEntry</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">entry_url</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_authority</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">auth</span><span class="p">:</span> <span class="n">auth</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># Keep the list sorted</span>
    <span class="k">return</span> <span class="n">new_authority</span><span class="p">,</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AccountAuth.all_authorities_are_disabled" class="doc doc-heading">
            <code class=" language-python"><span class="n">all_authorities_are_disabled</span><span class="p">()</span></code>

<a href="#accumulate.models.auth.AccountAuth.all_authorities_are_disabled" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if all authorities are disabled.</p>
<p>:return: True if all authorities are disabled, False otherwise.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">all_authorities_are_disabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if all authorities are disabled.</span>

<span class="sd">    :return: True if all authorities are disabled, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">authority</span><span class="o">.</span><span class="n">disabled</span> <span class="k">for</span> <span class="n">authority</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AccountAuth.get_authority" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_authority</span><span class="p">(</span><span class="n">entry_url</span><span class="p">)</span></code>

<a href="#accumulate.models.auth.AccountAuth.get_authority" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get an authority entry by its URL.</p>
<p>:param entry_url: The URL of the authority to find.
:return: A tuple containing the AuthorityEntry and a boolean indicating if it was found.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_authority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">AuthorityEntry</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get an authority entry by its URL.</span>

<span class="sd">    :param entry_url: The URL of the authority to find.</span>
<span class="sd">    :return: A tuple containing the AuthorityEntry and a boolean indicating if it was found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">authority</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">authority</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">entry_url</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">authority</span><span class="p">,</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AccountAuth.key_book" class="doc doc-heading">
            <code class=" language-python"><span class="n">key_book</span><span class="p">()</span></code>

<a href="#accumulate.models.auth.AccountAuth.key_book" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the primary authority's URL.</p>
<p>:return: URL of the primary authority or None if not available.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">key_book</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the primary authority&#39;s URL.</span>

<span class="sd">    :return: URL of the primary authority or None if not available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AccountAuth.manager_key_book" class="doc doc-heading">
            <code class=" language-python"><span class="n">manager_key_book</span><span class="p">()</span></code>

<a href="#accumulate.models.auth.AccountAuth.manager_key_book" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the secondary authority's URL.</p>
<p>:return: URL of the secondary authority or None if not available.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">manager_key_book</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the secondary authority&#39;s URL.</span>

<span class="sd">    :return: URL of the secondary authority or None if not available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">url</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AccountAuth.remove_authority" class="doc doc-heading">
            <code class=" language-python"><span class="n">remove_authority</span><span class="p">(</span><span class="n">entry_url</span><span class="p">)</span></code>

<a href="#accumulate.models.auth.AccountAuth.remove_authority" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Remove an authority entry by its URL.</p>
<p>:param entry_url: The URL of the authority to remove.
:return: True if the authority was removed, False otherwise.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_authority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove an authority entry by its URL.</span>

<span class="sd">    :param entry_url: The URL of the authority to remove.</span>
<span class="sd">    :return: True if the authority was removed, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">authority</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">authority</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">entry_url</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.auth.AuthorityEntry" class="doc doc-heading">
            <code>AuthorityEntry</code>


<a href="#accumulate.models.auth.AuthorityEntry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an authority entry with a URL and a disabled flag.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\auth.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AuthorityEntry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an authority entry with a URL and a disabled flag.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">disabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an AuthorityEntry.</span>

<span class="sd">        :param url: The URL of the authority.</span>
<span class="sd">        :param disabled: Boolean flag indicating if the authority is disabled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="n">disabled</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.auth.AuthorityEntry.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#accumulate.models.auth.AuthorityEntry.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize an AuthorityEntry.</p>
<p>:param url: The URL of the authority.
:param disabled: Boolean flag indicating if the authority is disabled.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\auth.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">disabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize an AuthorityEntry.</span>

<span class="sd">    :param url: The URL of the authority.</span>
<span class="sd">    :param disabled: Boolean flag indicating if the authority is disabled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="n">disabled</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.base_transactions" class="doc doc-heading">
            <code>base_transactions</code>


<a href="#accumulate.models.base_transactions" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.base_transactions.ExpireOptions" class="doc doc-heading">
            <code>ExpireOptions</code>


<a href="#accumulate.models.base_transactions.ExpireOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents expiration options for a transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExpireOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents expiration options for a transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">at_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param at_time: The expiration time as a Unix timestamp.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">at_time</span> <span class="o">=</span> <span class="n">at_time</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.ExpireOptions.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">at_time</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.base_transactions.ExpireOptions.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param at_time: The expiration time as a Unix timestamp.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">at_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param at_time: The expiration time as a Unix timestamp.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">at_time</span> <span class="o">=</span> <span class="n">at_time</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.base_transactions.HoldUntilOptions" class="doc doc-heading">
            <code>HoldUntilOptions</code>


<a href="#accumulate.models.base_transactions.HoldUntilOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents hold-until options for a transaction.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HoldUntilOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents hold-until options for a transaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor_block</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param minor_block: The minor block at which the transaction is held until.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minor_block</span> <span class="o">=</span> <span class="n">minor_block</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.HoldUntilOptions.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">minor_block</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.base_transactions.HoldUntilOptions.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>:param minor_block: The minor block at which the transaction is held until.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor_block</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param minor_block: The minor block at which the transaction is held until.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">minor_block</span> <span class="o">=</span> <span class="n">minor_block</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.base_transactions.TransactionBodyBase" class="doc doc-heading">
            <code>TransactionBodyBase</code>


<a href="#accumulate.models.base_transactions.TransactionBodyBase" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Base class for all transaction bodies, providing standardized marshaling/unmarshaling.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TransactionBodyBase</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all transaction bodies, providing standardized marshaling/unmarshaling.&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the transaction type.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the fields to encode as a list of (field_id, value, encoding_function).&quot;&quot;&quot;</span>
        <span class="k">pass</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generic marshaling for all transactions using structured encoding.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; START Marshaling </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">serialized</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="c1">#  Confirm Execution (Force an Output to Ensure it Runs)</span>
        <span class="k">assert</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot; DEBUG: `marshal()` method is being executed!&quot;</span>

        <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">encode_func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields_to_encode</span><span class="p">():</span>
            <span class="n">encoded_value</span> <span class="o">=</span> <span class="n">encode_func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

            <span class="c1">#  Explicit Debugging of Each Field</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Encoding Field </span><span class="si">{</span><span class="n">field_num</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">encoded_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">encoded_value</span><span class="p">,</span><span class="w"> </span><span class="nb">bytes</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">encoded_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">serialized</span> <span class="o">+=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="n">field_num</span><span class="p">,</span> <span class="n">encoded_value</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Marshaled </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (HEX): </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">serialized</span>


    <span class="nd">@classmethod</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generic unmarshaling method to be implemented per transaction type.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert transaction to a dictionary with correct type formatting.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_format_transaction_type</span><span class="p">(</span><span class="n">transaction_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert ENUM transaction type to lowerCamelCase for JSON compatibility.&quot;&quot;&quot;</span>
        <span class="n">words</span> <span class="o">=</span> <span class="n">transaction_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionBodyBase._format_transaction_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">_format_transaction_type</span><span class="p">(</span><span class="n">transaction_type</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.base_transactions.TransactionBodyBase._format_transaction_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert ENUM transaction type to lowerCamelCase for JSON compatibility.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_format_transaction_type</span><span class="p">(</span><span class="n">transaction_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert ENUM transaction type to lowerCamelCase for JSON compatibility.&quot;&quot;&quot;</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">transaction_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionBodyBase.fields_to_encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">fields_to_encode</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.models.base_transactions.TransactionBodyBase.fields_to_encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the fields to encode as a list of (field_id, value, encoding_function).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fields_to_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the fields to encode as a list of (field_id, value, encoding_function).&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionBodyBase.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.base_transactions.TransactionBodyBase.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generic marshaling for all transactions using structured encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic marshaling for all transactions using structured encoding.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; START Marshaling </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">serialized</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="c1">#  Confirm Execution (Force an Output to Ensure it Runs)</span>
    <span class="k">assert</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot; DEBUG: `marshal()` method is being executed!&quot;</span>

    <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">encode_func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields_to_encode</span><span class="p">():</span>
        <span class="n">encoded_value</span> <span class="o">=</span> <span class="n">encode_func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="c1">#  Explicit Debugging of Each Field</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Encoding Field </span><span class="si">{</span><span class="n">field_num</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">encoded_value</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">encoded_value</span><span class="p">,</span><span class="w"> </span><span class="nb">bytes</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">encoded_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">serialized</span> <span class="o">+=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="n">field_num</span><span class="p">,</span> <span class="n">encoded_value</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FINAL Marshaled </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (HEX): </span><span class="si">{</span><span class="n">serialized</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">serialized</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionBodyBase.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.base_transactions.TransactionBodyBase.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert transaction to a dictionary with correct type formatting.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert transaction to a dictionary with correct type formatting.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_transaction_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionBodyBase.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.models.base_transactions.TransactionBodyBase.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the transaction type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the transaction type.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionBodyBase.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.base_transactions.TransactionBodyBase.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generic unmarshaling method to be implemented per transaction type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic unmarshaling method to be implemented per transaction type.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.base_transactions.TransactionBodyFactory" class="doc doc-heading">
            <code>TransactionBodyFactory</code>


<a href="#accumulate.models.base_transactions.TransactionBodyFactory" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Factory for creating transaction body instances based on transaction type.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TransactionBodyFactory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Factory for creating transaction body instances based on transaction type.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">:</span> <span class="n">TransactionType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TransactionBodyBase</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically create a transaction body instance of the specified type.</span>

<span class="sd">        :param client: AccumulateClient instance (optional, for API interactions).</span>
<span class="sd">        :param transaction_type: Enum specifying the transaction type.</span>
<span class="sd">        :param args: Positional arguments for the transaction body constructor.</span>
<span class="sd">        :param kwargs: Keyword arguments for the transaction body constructor.</span>
<span class="sd">        :return: A fully initialized TransactionBodyBase subclass instance, or None if unsupported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.transactions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">AddCredits</span><span class="p">,</span> <span class="n">CreateIdentity</span><span class="p">,</span> <span class="n">SendTokens</span><span class="p">,</span> <span class="n">CreateDataAccount</span><span class="p">,</span> <span class="n">CreateTokenAccount</span><span class="p">,</span>
            <span class="n">WriteData</span><span class="p">,</span> <span class="n">IssueTokens</span><span class="p">,</span> <span class="n">BurnTokens</span><span class="p">,</span> <span class="n">TransferCredits</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">,</span> 
            <span class="n">UpdateKeyPage</span><span class="p">,</span> <span class="n">UpdateAccountAuth</span><span class="p">,</span> <span class="n">CreateToken</span>
        <span class="p">)</span>

        <span class="n">TRANSACTION_TYPE_MAP</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">TransactionType</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">TransactionBodyBase</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">ADD_CREDITS</span><span class="p">:</span> <span class="n">AddCredits</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_IDENTITY</span><span class="p">:</span> <span class="n">CreateIdentity</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">SEND_TOKENS</span><span class="p">:</span> <span class="n">SendTokens</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_DATA_ACCOUNT</span><span class="p">:</span> <span class="n">CreateDataAccount</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN_ACCOUNT</span><span class="p">:</span> <span class="n">CreateTokenAccount</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">WRITE_DATA</span><span class="p">:</span> <span class="n">WriteData</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">ISSUE_TOKENS</span><span class="p">:</span> <span class="n">IssueTokens</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">BURN_TOKENS</span><span class="p">:</span> <span class="n">BurnTokens</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">TRANSFER_CREDITS</span><span class="p">:</span> <span class="n">TransferCredits</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">REMOTE</span><span class="p">:</span> <span class="n">RemoteTransaction</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">UPDATE_KEY_PAGE</span><span class="p">:</span> <span class="n">UpdateKeyPage</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">UPDATE_ACCOUNT_AUTH</span><span class="p">:</span> <span class="n">UpdateAccountAuth</span><span class="p">,</span>
            <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN</span><span class="p">:</span> <span class="n">CreateToken</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">transaction_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">TRANSACTION_TYPE_MAP</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unsupported transaction type: </span><span class="si">{</span><span class="n">transaction_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Or raise an exception if you prefer</span>

        <span class="n">transaction_class</span> <span class="o">=</span> <span class="n">TRANSACTION_TYPE_MAP</span><span class="p">[</span><span class="n">transaction_type</span><span class="p">]</span>

        <span class="c1">#  Create the transaction body instance dynamically</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="n">transaction_class</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1">#  If it has an initialize method, call it asynchronously (e.g., fetching oracle price)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;initialize&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">initialize</span><span class="p">):</span>
            <span class="k">await</span> <span class="n">instance</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionBodyFactory.create" class="doc doc-heading">
            <code class=" language-python"><span class="n">create</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.base_transactions.TransactionBodyFactory.create" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Dynamically create a transaction body instance of the specified type.</p>
<p>:param client: AccumulateClient instance (optional, for API interactions).
:param transaction_type: Enum specifying the transaction type.
:param args: Positional arguments for the transaction body constructor.
:param kwargs: Keyword arguments for the transaction body constructor.
:return: A fully initialized TransactionBodyBase subclass instance, or None if unsupported.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">:</span> <span class="n">TransactionType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TransactionBodyBase</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically create a transaction body instance of the specified type.</span>

<span class="sd">    :param client: AccumulateClient instance (optional, for API interactions).</span>
<span class="sd">    :param transaction_type: Enum specifying the transaction type.</span>
<span class="sd">    :param args: Positional arguments for the transaction body constructor.</span>
<span class="sd">    :param kwargs: Keyword arguments for the transaction body constructor.</span>
<span class="sd">    :return: A fully initialized TransactionBodyBase subclass instance, or None if unsupported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.transactions</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">AddCredits</span><span class="p">,</span> <span class="n">CreateIdentity</span><span class="p">,</span> <span class="n">SendTokens</span><span class="p">,</span> <span class="n">CreateDataAccount</span><span class="p">,</span> <span class="n">CreateTokenAccount</span><span class="p">,</span>
        <span class="n">WriteData</span><span class="p">,</span> <span class="n">IssueTokens</span><span class="p">,</span> <span class="n">BurnTokens</span><span class="p">,</span> <span class="n">TransferCredits</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">,</span> 
        <span class="n">UpdateKeyPage</span><span class="p">,</span> <span class="n">UpdateAccountAuth</span><span class="p">,</span> <span class="n">CreateToken</span>
    <span class="p">)</span>

    <span class="n">TRANSACTION_TYPE_MAP</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">TransactionType</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">TransactionBodyBase</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">ADD_CREDITS</span><span class="p">:</span> <span class="n">AddCredits</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_IDENTITY</span><span class="p">:</span> <span class="n">CreateIdentity</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">SEND_TOKENS</span><span class="p">:</span> <span class="n">SendTokens</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_DATA_ACCOUNT</span><span class="p">:</span> <span class="n">CreateDataAccount</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN_ACCOUNT</span><span class="p">:</span> <span class="n">CreateTokenAccount</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">WRITE_DATA</span><span class="p">:</span> <span class="n">WriteData</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">ISSUE_TOKENS</span><span class="p">:</span> <span class="n">IssueTokens</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">BURN_TOKENS</span><span class="p">:</span> <span class="n">BurnTokens</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">TRANSFER_CREDITS</span><span class="p">:</span> <span class="n">TransferCredits</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">REMOTE</span><span class="p">:</span> <span class="n">RemoteTransaction</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">UPDATE_KEY_PAGE</span><span class="p">:</span> <span class="n">UpdateKeyPage</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">UPDATE_ACCOUNT_AUTH</span><span class="p">:</span> <span class="n">UpdateAccountAuth</span><span class="p">,</span>
        <span class="n">TransactionType</span><span class="o">.</span><span class="n">CREATE_TOKEN</span><span class="p">:</span> <span class="n">CreateToken</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">transaction_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">TRANSACTION_TYPE_MAP</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unsupported transaction type: </span><span class="si">{</span><span class="n">transaction_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Or raise an exception if you prefer</span>

    <span class="n">transaction_class</span> <span class="o">=</span> <span class="n">TRANSACTION_TYPE_MAP</span><span class="p">[</span><span class="n">transaction_type</span><span class="p">]</span>

    <span class="c1">#  Create the transaction body instance dynamically</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="n">transaction_class</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1">#  If it has an initialize method, call it asynchronously (e.g., fetching oracle price)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;initialize&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">initialize</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">instance</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.base_transactions.TransactionHeader" class="doc doc-heading">
            <code>TransactionHeader</code>


<a href="#accumulate.models.base_transactions.TransactionHeader" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents the header of a transaction, containing metadata and conditions.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TransactionHeader</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the header of a transaction, containing metadata and conditions.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">principal</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">initiator</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">,</span>
        <span class="n">memo</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">expire</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ExpireOptions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hold_until</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HoldUntilOptions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">authorities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">principal</span> <span class="o">=</span> <span class="n">principal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span> <span class="o">=</span> <span class="n">initiator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span> <span class="o">=</span> <span class="n">signature_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memo</span> <span class="o">=</span> <span class="n">memo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expire</span> <span class="o">=</span> <span class="n">expire</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span> <span class="o">=</span> <span class="n">hold_until</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span> <span class="o">=</span> <span class="n">authorities</span> <span class="ow">or</span> <span class="p">[]</span>


    <span class="nd">@classmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">principal</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">signer</span><span class="p">:</span> <span class="s2">&quot;Signer&quot;</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">transaction_body</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1">#  Add transaction body to check for RemoteTransaction</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionHeader&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically compute the initiator hash and return a fully constructed TransactionHeader.&quot;&quot;&quot;</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.signing.signer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Signer</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.signing.timestamp</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimestampFromVariable</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.transactions</span><span class="w"> </span><span class="kn">import</span> <span class="n">RemoteTransaction</span>  <span class="c1">#  Import RemoteTransaction</span>

        <span class="c1">#  If this is a RemoteTransaction, set header differently</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">transaction_body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; RemoteTransaction detected! Adjusting header...&quot;</span><span class="p">)</span>

            <span class="c1">#  Use the referenced transaction&#39;s hash as the initiator</span>
            <span class="n">initiator_hash</span> <span class="o">=</span> <span class="n">transaction_body</span><span class="o">.</span><span class="n">hash</span>  <span class="c1"># This should be the original signed transaction hash</span>

            <span class="c1">#  Remote Transactions do not need a new timestamp</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="kc">None</span>  

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Using referenced transaction hash: </span><span class="si">{</span><span class="n">initiator_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="c1">#  Generate timestamp only if it&#39;s not provided</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="ow">or</span> <span class="n">TimestampFromVariable</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

            <span class="c1">#  Fetch signer version dynamically</span>
            <span class="n">signer_version</span> <span class="o">=</span> <span class="k">await</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_signer_version</span><span class="p">()</span>

            <span class="c1">#  Fetch the correct signature type dynamically</span>
            <span class="n">signature_type</span> <span class="o">=</span> <span class="k">await</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_signature_type</span><span class="p">()</span>

            <span class="c1">#  Use the correct Lite Identity URL (not a token sub-account)</span>
            <span class="n">signer_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">signer</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>  <span class="c1">#  Extract URL from Signer object</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Correcting Signer URL (used in metadata hash): </span><span class="si">{</span><span class="n">signer_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1">#  Compute initiator hash using the same function as `Signer.sign_transaction()`</span>
            <span class="n">initiator_hash</span> <span class="o">=</span> <span class="n">Signer</span><span class="o">.</span><span class="n">calculate_metadata_hash</span><span class="p">(</span>
                <span class="n">public_key</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signer_url</span><span class="p">,</span> <span class="n">signer_version</span><span class="p">,</span> <span class="n">signature_type</span><span class="o">.</span><span class="n">value</span>
            <span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (public key): </span><span class="si">{</span><span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (timestamp): </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (signer): </span><span class="si">{</span><span class="n">principal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (signer_version): </span><span class="si">{</span><span class="n">signer_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (signature_type.value): </span><span class="si">{</span><span class="n">signature_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash (from TransactionHeader.create()): </span><span class="si">{</span><span class="n">initiator_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1">#  Ensure timestamp and signature type are included when creating the instance</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">principal</span><span class="o">=</span><span class="n">principal</span><span class="p">,</span>
            <span class="n">initiator</span><span class="o">=</span><span class="n">initiator_hash</span><span class="p">,</span>
            <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>  <span class="c1">#  This will be None for Remote Transactions</span>
            <span class="n">signature_type</span><span class="o">=</span><span class="n">signature_type</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">transaction_body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the transaction header to a dictionary while conditionally including optional fields.&quot;&quot;&quot;</span>
        <span class="n">txn_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;principal&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">principal</span><span class="p">,</span>
            <span class="s2">&quot;initiator&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span><span class="p">:</span>
            <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;memo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
            <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="p">:</span>
            <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;expire&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="o">.</span><span class="n">at_time</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="p">:</span>
            <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;hold_until&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="o">.</span><span class="n">minor_block</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span>
        <span class="k">return</span> <span class="n">txn_dict</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the transaction header to bytes using the updated field‐based encoding.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> DEBUG: Marshaling Transaction Header&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="c1"># Field 1: Principal – encode as: [varint(length)] + principal_bytes</span>
        <span class="n">principal_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">principal</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">field1</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">principal_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">principal_bytes</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">field1</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 1 (Principal): </span><span class="si">{</span><span class="n">field1</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Field 2: Initiator – raw bytes (assumed fixed length, e.g. 32 bytes)</span>
        <span class="n">field2</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">field2</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 2 (Initiator): </span><span class="si">{</span><span class="n">field2</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Optional Field 4: Memo (if present)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span><span class="p">:</span>
            <span class="n">memo_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">field4</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">memo_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">memo_bytes</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">field4</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 4 (Memo): </span><span class="si">{</span><span class="n">field4</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Optional Field 5: Metadata (if present)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">))</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">field5</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 5 (Metadata): </span><span class="si">{</span><span class="n">field5</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Optional Field 6: Expire (if present; fixed 8 bytes)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="p">:</span>
            <span class="n">expire_bytes</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="o">.</span><span class="n">at_time</span><span class="p">)</span>
            <span class="n">field6</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">expire_bytes</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">field6</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 6 (Expire): </span><span class="si">{</span><span class="n">field6</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Optional Field 7: Hold Until (if present; fixed 8 bytes)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="p">:</span>
            <span class="n">hold_until_bytes</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="o">.</span><span class="n">minor_block</span><span class="p">)</span>
            <span class="n">field7</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">hold_until_bytes</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">field7</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 7 (Hold Until): </span><span class="si">{</span><span class="n">field7</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Optional Field 8: Authorities (if present; encoded as length-prefixed UTF-8 string)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
            <span class="n">auth_str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">)</span>
            <span class="n">auth_bytes</span> <span class="o">=</span> <span class="n">auth_str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">field8</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">auth_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">auth_bytes</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">field8</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 8 (Authorities): </span><span class="si">{</span><span class="n">field8</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Final Header Encoding: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionHeader&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize the transaction header from bytes using the updated encoding scheme.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> DEBUG: Unmarshaling Transaction Header&quot;</span><span class="p">)</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">principal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">initiator</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">memo</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">expire</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">hold_until</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">authorities</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Process fields one by one (each field starts with a 1-byte field id)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">field_id_byte</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_id_byte</span><span class="p">:</span>
                <span class="k">break</span>  <span class="c1"># End of header data</span>
            <span class="n">field_id</span> <span class="o">=</span> <span class="n">field_id_byte</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Principal is length-prefixed: read length then string</span>
                <span class="n">plen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
                <span class="n">principal</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">plen</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 1 (Principal): </span><span class="si">{</span><span class="n">principal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="c1"># Initiator: fixed length (assume 32 bytes)</span>
                <span class="n">initiator</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 2 (Initiator): </span><span class="si">{</span><span class="n">initiator</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="c1"># Memo: length-prefixed string</span>
                <span class="n">mlen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
                <span class="n">memo</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">mlen</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 4 (Memo): </span><span class="si">{</span><span class="n">memo</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="c1"># Metadata: length-prefixed bytes</span>
                <span class="n">mlen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">mlen</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 5 (Metadata): </span><span class="si">{</span><span class="n">metadata</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="c1"># Expire: fixed 8 bytes</span>
                <span class="n">expire_val</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">expire_val</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">expire</span> <span class="o">=</span> <span class="n">ExpireOptions</span><span class="p">(</span><span class="n">expire_val</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 6 (Expire): </span><span class="si">{</span><span class="n">expire_val</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                <span class="c1"># Hold Until: fixed 8 bytes</span>
                <span class="n">hold_val</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hold_val</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">hold_until</span> <span class="o">=</span> <span class="n">HoldUntilOptions</span><span class="p">(</span><span class="n">hold_val</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 7 (Hold Until): </span><span class="si">{</span><span class="n">hold_val</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                <span class="c1"># Authorities: length-prefixed string (comma-separated)</span>
                <span class="n">alen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
                <span class="n">auth_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">alen</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="n">authorities</span> <span class="o">=</span> <span class="n">auth_data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 8 (Authorities): </span><span class="si">{</span><span class="n">authorities</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Unknown field – skip (or break)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unknown field id </span><span class="si">{</span><span class="n">field_id</span><span class="si">}</span><span class="s2"> encountered. Skipping.&quot;</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">TransactionHeader</span><span class="p">(</span>
            <span class="n">principal</span><span class="o">=</span><span class="n">principal</span><span class="p">,</span>
            <span class="n">initiator</span><span class="o">=</span><span class="n">initiator</span><span class="p">,</span>
            <span class="n">memo</span><span class="o">=</span><span class="n">memo</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">expire</span><span class="o">=</span><span class="n">expire</span><span class="p">,</span>
            <span class="n">hold_until</span><span class="o">=</span><span class="n">hold_until</span><span class="p">,</span>
            <span class="n">authorities</span><span class="o">=</span><span class="n">authorities</span><span class="p">,</span>
        <span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">build_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txn</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build transaction JSON while conditionally including optional fields.</span>
<span class="sd">        Ensures transactionHash matches header[&#39;initiator&#39;] for validation.</span>
<span class="sd">        Automatically wraps the transaction inside a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.transactions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Transaction</span>

        <span class="n">txn_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">get_hash</span><span class="p">()</span>

        <span class="n">expected_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">if</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Verifying Transaction Hash Before Sending&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Transaction Hash: </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;vs Expected Hash from Initiator: </span><span class="si">{</span><span class="n">expected_hash</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">expected_hash</span> <span class="ow">and</span> <span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="o">!=</span> <span class="n">expected_hash</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot; Transaction hash mismatch! Computed hash does not match the expected initiator hash.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction hash mismatch! Computed hash does not match the expected initiator hash.&quot;</span><span class="p">)</span>

        <span class="n">txn_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="p">}</span>

        <span class="c1">#  Automatically wrap the transaction inside a list</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">txn_data</span><span class="p">]}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionHeader.build_transaction" class="doc doc-heading">
            <code class=" language-python"><span class="n">build_transaction</span><span class="p">(</span><span class="n">txn</span><span class="p">)</span></code>

<a href="#accumulate.models.base_transactions.TransactionHeader.build_transaction" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Build transaction JSON while conditionally including optional fields.
Ensures transactionHash matches header['initiator'] for validation.
Automatically wraps the transaction inside a list.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_transaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build transaction JSON while conditionally including optional fields.</span>
<span class="sd">    Ensures transactionHash matches header[&#39;initiator&#39;] for validation.</span>
<span class="sd">    Automatically wraps the transaction inside a list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.transactions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Transaction</span>

    <span class="n">txn_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">get_hash</span><span class="p">()</span>

    <span class="n">expected_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">if</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Verifying Transaction Hash Before Sending&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Transaction Hash: </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;vs Expected Hash from Initiator: </span><span class="si">{</span><span class="n">expected_hash</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">expected_hash</span> <span class="ow">and</span> <span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="o">!=</span> <span class="n">expected_hash</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot; Transaction hash mismatch! Computed hash does not match the expected initiator hash.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction hash mismatch! Computed hash does not match the expected initiator hash.&quot;</span><span class="p">)</span>

    <span class="n">txn_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
        <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span> <span class="k">else</span> <span class="p">{}</span>
    <span class="p">}</span>

    <span class="c1">#  Automatically wrap the transaction inside a list</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">txn_data</span><span class="p">]}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionHeader.create" class="doc doc-heading">
            <code class=" language-python"><span class="n">create</span><span class="p">(</span><span class="n">principal</span><span class="p">,</span> <span class="n">public_key</span><span class="p">,</span> <span class="n">signer</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transaction_body</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.base_transactions.TransactionHeader.create" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Automatically compute the initiator hash and return a fully constructed TransactionHeader.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">principal</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
    <span class="n">signer</span><span class="p">:</span> <span class="s2">&quot;Signer&quot;</span><span class="p">,</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">transaction_body</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1">#  Add transaction body to check for RemoteTransaction</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionHeader&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Automatically compute the initiator hash and return a fully constructed TransactionHeader.&quot;&quot;&quot;</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.signing.signer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Signer</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.signing.timestamp</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimestampFromVariable</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.models.transactions</span><span class="w"> </span><span class="kn">import</span> <span class="n">RemoteTransaction</span>  <span class="c1">#  Import RemoteTransaction</span>

    <span class="c1">#  If this is a RemoteTransaction, set header differently</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">transaction_body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; RemoteTransaction detected! Adjusting header...&quot;</span><span class="p">)</span>

        <span class="c1">#  Use the referenced transaction&#39;s hash as the initiator</span>
        <span class="n">initiator_hash</span> <span class="o">=</span> <span class="n">transaction_body</span><span class="o">.</span><span class="n">hash</span>  <span class="c1"># This should be the original signed transaction hash</span>

        <span class="c1">#  Remote Transactions do not need a new timestamp</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="kc">None</span>  

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Using referenced transaction hash: </span><span class="si">{</span><span class="n">initiator_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="c1">#  Generate timestamp only if it&#39;s not provided</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="ow">or</span> <span class="n">TimestampFromVariable</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="c1">#  Fetch signer version dynamically</span>
        <span class="n">signer_version</span> <span class="o">=</span> <span class="k">await</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_signer_version</span><span class="p">()</span>

        <span class="c1">#  Fetch the correct signature type dynamically</span>
        <span class="n">signature_type</span> <span class="o">=</span> <span class="k">await</span> <span class="n">signer</span><span class="o">.</span><span class="n">get_signature_type</span><span class="p">()</span>

        <span class="c1">#  Use the correct Lite Identity URL (not a token sub-account)</span>
        <span class="n">signer_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">signer</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>  <span class="c1">#  Extract URL from Signer object</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Correcting Signer URL (used in metadata hash): </span><span class="si">{</span><span class="n">signer_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1">#  Compute initiator hash using the same function as `Signer.sign_transaction()`</span>
        <span class="n">initiator_hash</span> <span class="o">=</span> <span class="n">Signer</span><span class="o">.</span><span class="n">calculate_metadata_hash</span><span class="p">(</span>
            <span class="n">public_key</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signer_url</span><span class="p">,</span> <span class="n">signer_version</span><span class="p">,</span> <span class="n">signature_type</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (public key): </span><span class="si">{</span><span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (timestamp): </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (signer): </span><span class="si">{</span><span class="n">principal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (signer_version): </span><span class="si">{</span><span class="n">signer_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash Header (signature_type.value): </span><span class="si">{</span><span class="n">signature_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Computed Initiator Hash (from TransactionHeader.create()): </span><span class="si">{</span><span class="n">initiator_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1">#  Ensure timestamp and signature type are included when creating the instance</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">principal</span><span class="o">=</span><span class="n">principal</span><span class="p">,</span>
        <span class="n">initiator</span><span class="o">=</span><span class="n">initiator_hash</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>  <span class="c1">#  This will be None for Remote Transactions</span>
        <span class="n">signature_type</span><span class="o">=</span><span class="n">signature_type</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">transaction_body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionHeader.marshal_binary" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal_binary</span><span class="p">()</span></code>

<a href="#accumulate.models.base_transactions.TransactionHeader.marshal_binary" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the transaction header to bytes using the updated field‐based encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize the transaction header to bytes using the updated field‐based encoding.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> DEBUG: Marshaling Transaction Header&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="c1"># Field 1: Principal – encode as: [varint(length)] + principal_bytes</span>
    <span class="n">principal_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">principal</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="n">field1</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">principal_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">principal_bytes</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">field1</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 1 (Principal): </span><span class="si">{</span><span class="n">field1</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Field 2: Initiator – raw bytes (assumed fixed length, e.g. 32 bytes)</span>
    <span class="n">field2</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">field2</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 2 (Initiator): </span><span class="si">{</span><span class="n">field2</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Optional Field 4: Memo (if present)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span><span class="p">:</span>
        <span class="n">memo_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">field4</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">memo_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">memo_bytes</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">field4</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 4 (Memo): </span><span class="si">{</span><span class="n">field4</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Optional Field 5: Metadata (if present)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
        <span class="n">field5</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">))</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">field5</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 5 (Metadata): </span><span class="si">{</span><span class="n">field5</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Optional Field 6: Expire (if present; fixed 8 bytes)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="p">:</span>
        <span class="n">expire_bytes</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="o">.</span><span class="n">at_time</span><span class="p">)</span>
        <span class="n">field6</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">expire_bytes</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">field6</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 6 (Expire): </span><span class="si">{</span><span class="n">field6</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Optional Field 7: Hold Until (if present; fixed 8 bytes)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="p">:</span>
        <span class="n">hold_until_bytes</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="o">.</span><span class="n">minor_block</span><span class="p">)</span>
        <span class="n">field7</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">hold_until_bytes</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">field7</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 7 (Hold Until): </span><span class="si">{</span><span class="n">field7</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Optional Field 8: Authorities (if present; encoded as length-prefixed UTF-8 string)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">auth_str</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">)</span>
        <span class="n">auth_bytes</span> <span class="o">=</span> <span class="n">auth_str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">field8</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">auth_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">auth_bytes</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">field8</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Field 8 (Authorities): </span><span class="si">{</span><span class="n">field8</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Final Header Encoding: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionHeader.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.base_transactions.TransactionHeader.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the transaction header to a dictionary while conditionally including optional fields.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the transaction header to a dictionary while conditionally including optional fields.&quot;&quot;&quot;</span>
    <span class="n">txn_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;principal&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">principal</span><span class="p">,</span>
        <span class="s2">&quot;initiator&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiator</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span><span class="p">:</span>
        <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;memo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
        <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="p">:</span>
        <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;expire&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="o">.</span><span class="n">at_time</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="p">:</span>
        <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;hold_until&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hold_until</span><span class="o">.</span><span class="n">minor_block</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span><span class="p">:</span>
        <span class="n">txn_dict</span><span class="p">[</span><span class="s2">&quot;authorities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorities</span>
    <span class="k">return</span> <span class="n">txn_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.base_transactions.TransactionHeader.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.base_transactions.TransactionHeader.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize the transaction header from bytes using the updated encoding scheme.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\base_transactions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionHeader&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize the transaction header from bytes using the updated encoding scheme.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> DEBUG: Unmarshaling Transaction Header&quot;</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">principal</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">initiator</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">memo</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">expire</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hold_until</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">authorities</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Process fields one by one (each field starts with a 1-byte field id)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">field_id_byte</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_id_byte</span><span class="p">:</span>
            <span class="k">break</span>  <span class="c1"># End of header data</span>
        <span class="n">field_id</span> <span class="o">=</span> <span class="n">field_id_byte</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># Principal is length-prefixed: read length then string</span>
            <span class="n">plen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="n">principal</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">plen</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 1 (Principal): </span><span class="si">{</span><span class="n">principal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># Initiator: fixed length (assume 32 bytes)</span>
            <span class="n">initiator</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 2 (Initiator): </span><span class="si">{</span><span class="n">initiator</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1"># Memo: length-prefixed string</span>
            <span class="n">mlen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="n">memo</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">mlen</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 4 (Memo): </span><span class="si">{</span><span class="n">memo</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="c1"># Metadata: length-prefixed bytes</span>
            <span class="n">mlen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">mlen</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 5 (Metadata): </span><span class="si">{</span><span class="n">metadata</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="c1"># Expire: fixed 8 bytes</span>
            <span class="n">expire_val</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">expire_val</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">expire</span> <span class="o">=</span> <span class="n">ExpireOptions</span><span class="p">(</span><span class="n">expire_val</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 6 (Expire): </span><span class="si">{</span><span class="n">expire_val</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="c1"># Hold Until: fixed 8 bytes</span>
            <span class="n">hold_val</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;Q&quot;</span><span class="p">,</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">hold_val</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">hold_until</span> <span class="o">=</span> <span class="n">HoldUntilOptions</span><span class="p">(</span><span class="n">hold_val</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 7 (Hold Until): </span><span class="si">{</span><span class="n">hold_val</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_id</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="c1"># Authorities: length-prefixed string (comma-separated)</span>
            <span class="n">alen</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="n">auth_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">alen</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">authorities</span> <span class="o">=</span> <span class="n">auth_data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unmarshaled Field 8 (Authorities): </span><span class="si">{</span><span class="n">authorities</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Unknown field – skip (or break)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Unknown field id </span><span class="si">{</span><span class="n">field_id</span><span class="si">}</span><span class="s2"> encountered. Skipping.&quot;</span><span class="p">)</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">TransactionHeader</span><span class="p">(</span>
        <span class="n">principal</span><span class="o">=</span><span class="n">principal</span><span class="p">,</span>
        <span class="n">initiator</span><span class="o">=</span><span class="n">initiator</span><span class="p">,</span>
        <span class="n">memo</span><span class="o">=</span><span class="n">memo</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">expire</span><span class="o">=</span><span class="n">expire</span><span class="p">,</span>
        <span class="n">hold_until</span><span class="o">=</span><span class="n">hold_until</span><span class="p">,</span>
        <span class="n">authorities</span><span class="o">=</span><span class="n">authorities</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.credits" class="doc doc-heading">
            <code>credits</code>


<a href="#accumulate.models.credits" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.credits.CreditsAccount" class="doc doc-heading">
            <code>CreditsAccount</code>


<a href="#accumulate.models.credits.CreditsAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an account with a credit balance.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\credits.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CreditsAccount</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an account with a credit balance.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">credit_balance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a credits account.</span>

<span class="sd">        :param credit_balance: Initial credit balance of the account.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span> <span class="o">=</span> <span class="n">credit_balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_credit_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the current credit balance.</span>

<span class="sd">        :return: The credit balance as an integer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">credit_credits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add credits to the account.</span>

<span class="sd">        :param amount: The amount of credits to add.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span> <span class="o">+=</span> <span class="n">amount</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">can_debit_credits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the account has enough credits to debit.</span>

<span class="sd">        :param amount: The amount to check for debiting.</span>
<span class="sd">        :return: True if the account can debit the amount, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">debit_credits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Debit credits from the account.</span>

<span class="sd">        :param amount: The amount of credits to debit.</span>
<span class="sd">        :return: True if the debit was successful, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_debit_credits</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span> <span class="o">-=</span> <span class="n">amount</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.credits.CreditsAccount.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">credit_balance</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#accumulate.models.credits.CreditsAccount.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize a credits account.</p>
<p>:param credit_balance: Initial credit balance of the account.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\credits.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">credit_balance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize a credits account.</span>

<span class="sd">    :param credit_balance: Initial credit balance of the account.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span> <span class="o">=</span> <span class="n">credit_balance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.credits.CreditsAccount.can_debit_credits" class="doc doc-heading">
            <code class=" language-python"><span class="n">can_debit_credits</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span></code>

<a href="#accumulate.models.credits.CreditsAccount.can_debit_credits" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the account has enough credits to debit.</p>
<p>:param amount: The amount to check for debiting.
:return: True if the account can debit the amount, False otherwise.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\credits.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">can_debit_credits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the account has enough credits to debit.</span>

<span class="sd">    :param amount: The amount to check for debiting.</span>
<span class="sd">    :return: True if the account can debit the amount, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.credits.CreditsAccount.credit_credits" class="doc doc-heading">
            <code class=" language-python"><span class="n">credit_credits</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span></code>

<a href="#accumulate.models.credits.CreditsAccount.credit_credits" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add credits to the account.</p>
<p>:param amount: The amount of credits to add.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\credits.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">credit_credits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add credits to the account.</span>

<span class="sd">    :param amount: The amount of credits to add.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span> <span class="o">+=</span> <span class="n">amount</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.credits.CreditsAccount.debit_credits" class="doc doc-heading">
            <code class=" language-python"><span class="n">debit_credits</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span></code>

<a href="#accumulate.models.credits.CreditsAccount.debit_credits" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Debit credits from the account.</p>
<p>:param amount: The amount of credits to debit.
:return: True if the debit was successful, False otherwise.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\credits.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">debit_credits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Debit credits from the account.</span>

<span class="sd">    :param amount: The amount of credits to debit.</span>
<span class="sd">    :return: True if the debit was successful, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_debit_credits</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span> <span class="o">-=</span> <span class="n">amount</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.credits.CreditsAccount.get_credit_balance" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_credit_balance</span><span class="p">()</span></code>

<a href="#accumulate.models.credits.CreditsAccount.get_credit_balance" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the current credit balance.</p>
<p>:return: The credit balance as an integer.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\credits.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_credit_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the current credit balance.</span>

<span class="sd">    :return: The credit balance as an integer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">credit_balance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.data_entries" class="doc doc-heading">
            <code>data_entries</code>


<a href="#accumulate.models.data_entries" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.data_entries.AccumulateDataEntry" class="doc doc-heading">
            <code>AccumulateDataEntry</code>


<a href="#accumulate.models.data_entries.AccumulateDataEntry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.data_entries.DataEntry" href="#accumulate.models.data_entries.DataEntry">DataEntry</a></code></p>


        <p>Represents a single-hash data entry.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccumulateDataEntry</span><span class="p">(</span><span class="n">DataEntry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a single-hash data entry.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataEntryType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">ACCUMULATE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="n">hasher</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the DataEntry to bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">type_byte</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">chunk_count</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>  <span class="c1">#  Use uvarint encoding for chunk count</span>
        <span class="n">serialized_chunks</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">type_byte</span> <span class="o">+</span> <span class="n">chunk_count</span> <span class="o">+</span> <span class="n">serialized_chunks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Convert AccumulateDataEntry to a JSON-serializable dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;accumulate&quot;</span><span class="p">,</span>  <span class="c1">#  Ensure type matches expected JSON output</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">chunk</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">]</span>  <span class="c1">#  Convert bytes to hex</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.AccumulateDataEntry.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.AccumulateDataEntry.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the DataEntry to bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize the DataEntry to bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">type_byte</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">chunk_count</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>  <span class="c1">#  Use uvarint encoding for chunk count</span>
    <span class="n">serialized_chunks</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">type_byte</span> <span class="o">+</span> <span class="n">chunk_count</span> <span class="o">+</span> <span class="n">serialized_chunks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.AccumulateDataEntry.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.AccumulateDataEntry.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert AccumulateDataEntry to a JSON-serializable dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Convert AccumulateDataEntry to a JSON-serializable dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;accumulate&quot;</span><span class="p">,</span>  <span class="c1">#  Ensure type matches expected JSON output</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">chunk</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">]</span>  <span class="c1">#  Convert bytes to hex</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.data_entries.DataEntry" class="doc doc-heading">
            <code>DataEntry</code>


<a href="#accumulate.models.data_entries.DataEntry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for data entries.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataEntry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for data entries.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Data must be a list of byte arrays.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataEntryType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the data entry type (must be implemented by subclasses).&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Type method must be implemented by subclasses.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the raw data of the entry.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the hash of the data entry (must be implemented by subclasses).&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Hash method must be implemented by subclasses.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the DataEntry to bytes.</span>
<span class="sd">         FIX: Ensure the correct entry encoding.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">type_byte</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1">#  Correctly encode DataEntryType</span>
        <span class="n">serialized_chunks</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">type_byte</span> <span class="o">+</span> <span class="n">serialized_chunks</span>


    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DataEntry&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize a data entry from bytes.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling DataEntry&quot;</span><span class="p">)</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1">#  Step 1: Read **DataEntryType**</span>
        <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">type_value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="n">DataEntryType</span><span class="o">.</span><span class="n">ACCUMULATE</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">DOUBLE_HASH</span><span class="o">.</span><span class="n">value</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown DataEntryType: </span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1">#  Step 2: Read **Chunk Count**</span>
        <span class="n">chunk_count</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="c1">#  Step 3: Read **Each Data Chunk**</span>
        <span class="n">chunks</span> <span class="o">=</span> <span class="p">[</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">chunk_count</span><span class="p">)]</span>

        <span class="c1">#  Step 4: Return the correct DataEntry subclass</span>
        <span class="k">if</span> <span class="n">type_value</span> <span class="o">==</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">ACCUMULATE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AccumulateDataEntry</span><span class="p">(</span><span class="n">chunks</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">type_value</span> <span class="o">==</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">DOUBLE_HASH</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DoubleHashDataEntry</span><span class="p">(</span><span class="n">chunks</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected DataEntryType: </span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DataEntry.get_data" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_data</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DataEntry.get_data" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the raw data of the entry.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the raw data of the entry.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DataEntry.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DataEntry.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the hash of the data entry (must be implemented by subclasses).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the hash of the data entry (must be implemented by subclasses).&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Hash method must be implemented by subclasses.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DataEntry.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DataEntry.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the DataEntry to bytes.
 FIX: Ensure the correct entry encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize the DataEntry to bytes.</span>
<span class="sd">     FIX: Ensure the correct entry encoding.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">type_byte</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1">#  Correctly encode DataEntryType</span>
    <span class="n">serialized_chunks</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">type_byte</span> <span class="o">+</span> <span class="n">serialized_chunks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DataEntry.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DataEntry.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the data entry type (must be implemented by subclasses).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataEntryType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the data entry type (must be implemented by subclasses).&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Type method must be implemented by subclasses.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DataEntry.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.data_entries.DataEntry.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a data entry from bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DataEntry&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize a data entry from bytes.&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unmarshaling DataEntry&quot;</span><span class="p">)</span>

    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1">#  Step 1: Read **DataEntryType**</span>
    <span class="n">type_value</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">type_value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="n">DataEntryType</span><span class="o">.</span><span class="n">ACCUMULATE</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">DOUBLE_HASH</span><span class="o">.</span><span class="n">value</span><span class="p">}:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown DataEntryType: </span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1">#  Step 2: Read **Chunk Count**</span>
    <span class="n">chunk_count</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="c1">#  Step 3: Read **Each Data Chunk**</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[</span><span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">chunk_count</span><span class="p">)]</span>

    <span class="c1">#  Step 4: Return the correct DataEntry subclass</span>
    <span class="k">if</span> <span class="n">type_value</span> <span class="o">==</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">ACCUMULATE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AccumulateDataEntry</span><span class="p">(</span><span class="n">chunks</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">type_value</span> <span class="o">==</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">DOUBLE_HASH</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DoubleHashDataEntry</span><span class="p">(</span><span class="n">chunks</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected DataEntryType: </span><span class="si">{</span><span class="n">type_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.data_entries.DataEntryUtils" class="doc doc-heading">
            <code>DataEntryUtils</code>


<a href="#accumulate.models.data_entries.DataEntryUtils" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Utility functions for data entries.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataEntryUtils</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Utility functions for data entries.&quot;&quot;&quot;</span>

    <span class="n">TRANSACTION_SIZE_MAX</span> <span class="o">=</span> <span class="mi">20480</span>  <span class="c1"># Maximum transaction size</span>
    <span class="n">FEE_DATA_UNIT</span> <span class="o">=</span> <span class="mi">256</span>          <span class="c1"># Fee unit size</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_data_entry_size</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="n">DataEntry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate the size of the data entry.</span>

<span class="sd">        :param entry: The data entry to check.</span>
<span class="sd">        :return: The size of the marshaled data entry in bytes.</span>
<span class="sd">        :raises ValueError: If the entry is empty or exceeds the size limit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">entry</span><span class="o">.</span><span class="n">get_data</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">TRANSACTION_SIZE_MAX</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data exceeds </span><span class="si">{</span><span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">TRANSACTION_SIZE_MAX</span><span class="si">}</span><span class="s2"> byte entry limit.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No data provided for WriteData.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">size</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_data_entry_cost</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="n">DataEntry</span><span class="p">,</span> <span class="n">fee_data</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the cost of writing a data entry.</span>

<span class="sd">        :param entry: The data entry to calculate the cost for.</span>
<span class="sd">        :param fee_data: The base fee multiplier for data entries.</span>
<span class="sd">        :return: The cost in credits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">check_data_entry_size</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fee_data</span> <span class="o">*</span> <span class="p">((</span><span class="n">size</span> <span class="o">//</span> <span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">FEE_DATA_UNIT</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DataEntryUtils.calculate_data_entry_cost" class="doc doc-heading">
            <code class=" language-python"><span class="n">calculate_data_entry_cost</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">fee_data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.data_entries.DataEntryUtils.calculate_data_entry_cost" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculate the cost of writing a data entry.</p>
<p>:param entry: The data entry to calculate the cost for.
:param fee_data: The base fee multiplier for data entries.
:return: The cost in credits.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_data_entry_cost</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="n">DataEntry</span><span class="p">,</span> <span class="n">fee_data</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the cost of writing a data entry.</span>

<span class="sd">    :param entry: The data entry to calculate the cost for.</span>
<span class="sd">    :param fee_data: The base fee multiplier for data entries.</span>
<span class="sd">    :return: The cost in credits.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">check_data_entry_size</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fee_data</span> <span class="o">*</span> <span class="p">((</span><span class="n">size</span> <span class="o">//</span> <span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">FEE_DATA_UNIT</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DataEntryUtils.check_data_entry_size" class="doc doc-heading">
            <code class=" language-python"><span class="n">check_data_entry_size</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.data_entries.DataEntryUtils.check_data_entry_size" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the size of the data entry.</p>
<p>:param entry: The data entry to check.
:return: The size of the marshaled data entry in bytes.
:raises ValueError: If the entry is empty or exceeds the size limit.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_data_entry_size</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="n">DataEntry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate the size of the data entry.</span>

<span class="sd">    :param entry: The data entry to check.</span>
<span class="sd">    :return: The size of the marshaled data entry in bytes.</span>
<span class="sd">    :raises ValueError: If the entry is empty or exceeds the size limit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">size</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">entry</span><span class="o">.</span><span class="n">get_data</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">TRANSACTION_SIZE_MAX</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data exceeds </span><span class="si">{</span><span class="n">DataEntryUtils</span><span class="o">.</span><span class="n">TRANSACTION_SIZE_MAX</span><span class="si">}</span><span class="s2"> byte entry limit.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No data provided for WriteData.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">size</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.data_entries.DoubleHashDataEntry" class="doc doc-heading">
            <code>DoubleHashDataEntry</code>


<a href="#accumulate.models.data_entries.DoubleHashDataEntry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.data_entries.DataEntry" href="#accumulate.models.data_entries.DataEntry">DataEntry</a></code></p>


        <p>Represents a double-hash data entry (Used in Go JSON).</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DoubleHashDataEntry</span><span class="p">(</span><span class="n">DataEntry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a double-hash data entry (Used in Go JSON).&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataEntryType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the DataEntryType for double-hash entries.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">DOUBLE_HASH</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute the double SHA-256 hash (Merkle root of the data).&quot;&quot;&quot;</span>
        <span class="n">hasher</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="n">merkle_root</span> <span class="o">=</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">merkle_root</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the DataEntry to bytes.</span>
<span class="sd">         FIX: Ensure the correct entry encoding.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entry_type</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#  Entry field identifier is always `01`</span>
        <span class="n">type_value</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1">#  Encode `03` for doubleHash</span>
        <span class="n">data_field</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">#  Data field identifier is always `02`</span>

        <span class="n">serialized_chunks</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">entry_type</span> <span class="o">+</span> <span class="n">type_value</span> <span class="o">+</span> <span class="n">data_field</span> <span class="o">+</span> <span class="n">serialized_chunks</span>  <span class="c1">#  Fix order!</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Convert DoubleHashDataEntry to a JSON-serializable dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;doubleHash&quot;</span><span class="p">,</span>  <span class="c1">#  Ensure type matches expected JSON output</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">chunk</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">]</span>  <span class="c1">#  Convert bytes to hex</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DoubleHashDataEntry.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DoubleHashDataEntry.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Compute the double SHA-256 hash (Merkle root of the data).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute the double SHA-256 hash (Merkle root of the data).&quot;&quot;&quot;</span>
    <span class="n">hasher</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
        <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="n">merkle_root</span> <span class="o">=</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">merkle_root</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DoubleHashDataEntry.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DoubleHashDataEntry.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the DataEntry to bytes.
 FIX: Ensure the correct entry encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize the DataEntry to bytes.</span>
<span class="sd">     FIX: Ensure the correct entry encoding.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entry_type</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#  Entry field identifier is always `01`</span>
    <span class="n">type_value</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1">#  Encode `03` for doubleHash</span>
    <span class="n">data_field</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">#  Data field identifier is always `02`</span>

    <span class="n">serialized_chunks</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bytes_marshal_binary</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">entry_type</span> <span class="o">+</span> <span class="n">type_value</span> <span class="o">+</span> <span class="n">data_field</span> <span class="o">+</span> <span class="n">serialized_chunks</span>  <span class="c1">#  Fix order!</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DoubleHashDataEntry.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DoubleHashDataEntry.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert DoubleHashDataEntry to a JSON-serializable dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Convert DoubleHashDataEntry to a JSON-serializable dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;doubleHash&quot;</span><span class="p">,</span>  <span class="c1">#  Ensure type matches expected JSON output</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">chunk</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">]</span>  <span class="c1">#  Convert bytes to hex</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.data_entries.DoubleHashDataEntry.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span><span class="p">()</span></code>

<a href="#accumulate.models.data_entries.DoubleHashDataEntry.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the DataEntryType for double-hash entries.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\data_entries.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataEntryType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the DataEntryType for double-hash entries.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">DataEntryType</span><span class="o">.</span><span class="n">DOUBLE_HASH</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.enums" class="doc doc-heading">
            <code>enums</code>


<a href="#accumulate.models.enums" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.AccountAuthOperationType" class="doc doc-heading">
            <code>AccountAuthOperationType</code>


<a href="#accumulate.models.enums.AccountAuthOperationType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Operations for account authorization.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccountAuthOperationType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Operations for account authorization.&quot;&quot;&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ENABLE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">DISABLE</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ADD_AUTHORITY</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">REMOVE_AUTHORITY</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.AccountType" class="doc doc-heading">
            <code>AccountType</code>


<a href="#accumulate.models.enums.AccountType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of accounts in the Accumulate blockchain.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccountType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of accounts in the Accumulate blockchain.&quot;&quot;&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ANCHOR_LEDGER</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">IDENTITY</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">TOKEN_ISSUER</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">TOKEN_ACCOUNT</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">LITE_TOKEN_ACCOUNT</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">BLOCK_LEDGER</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">KEY_PAGE</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">KEY_BOOK</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">DATA_ACCOUNT</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">LITE_DATA_ACCOUNT</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">SYSTEM_LEDGER</span> <span class="o">=</span> <span class="mi">14</span>
    <span class="n">LITE_IDENTITY</span> <span class="o">=</span> <span class="mi">15</span>
    <span class="n">SYNTHETIC_LEDGER</span> <span class="o">=</span> <span class="mi">16</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.BookType" class="doc doc-heading">
            <code>BookType</code>


<a href="#accumulate.models.enums.BookType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of key books.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BookType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of key books.&quot;&quot;&quot;</span>
    <span class="n">NORMAL</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">VALIDATOR</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">OPERATOR</span> <span class="o">=</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.DataEntryType" class="doc doc-heading">
            <code>DataEntryType</code>


<a href="#accumulate.models.enums.DataEntryType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of data entries in the blockchain.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataEntryType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of data entries in the blockchain.&quot;&quot;&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mh">0x00</span>
    <span class="n">FACTOM</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">ACCUMULATE</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">DOUBLE_HASH</span> <span class="o">=</span> <span class="mh">0x03</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.EventType" class="doc doc-heading">
            <code>EventType</code>


<a href="#accumulate.models.enums.EventType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of blockchain events.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EventType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of blockchain events.&quot;&quot;&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">BLOCK</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">GLOBALS</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.ExecutorVersion" class="doc doc-heading">
            <code>ExecutorVersion</code>


<a href="#accumulate.models.enums.ExecutorVersion" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Versions of the executor system.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExecutorVersion</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Versions of the executor system.&quot;&quot;&quot;</span>
    <span class="n">V1</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">V1_SIGNATURE_ANCHORING</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">V1_DOUBLE_HASH_ENTRIES</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">V1_HALT</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">V2</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">V2_BAIKONUR</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">V2_VANDENBERG</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">V2_JIUQUAN</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">V_NEXT</span> <span class="o">=</span> <span class="mi">9</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.KeyPageOperationType" class="doc doc-heading">
            <code>KeyPageOperationType</code>


<a href="#accumulate.models.enums.KeyPageOperationType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Operations for key pages.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">KeyPageOperationType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Operations for key pages.&quot;&quot;&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">UPDATE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">REMOVE</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ADD</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">SET_THRESHOLD</span> <span class="o">=</span> <span class="mi">15</span>
    <span class="n">UPDATE_ALLOWED</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">SET_REJECT_THRESHOLD</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">SET_RESPONSE_THRESHOLD</span> <span class="o">=</span> <span class="mi">7</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.KnownPeerStatus" class="doc doc-heading">
            <code>KnownPeerStatus</code>


<a href="#accumulate.models.enums.KnownPeerStatus" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Statuses of known peers in the network.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">KnownPeerStatus</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Statuses of known peers in the network.&quot;&quot;&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">GOOD</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">BAD</span> <span class="o">=</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.QueryType" class="doc doc-heading">
            <code>QueryType</code>


<a href="#accumulate.models.enums.QueryType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Query types for retrieving blockchain data.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">QueryType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query types for retrieving blockchain data.&quot;&quot;&quot;</span>
    <span class="n">DEFAULT</span> <span class="o">=</span> <span class="mh">0x00</span>
    <span class="n">CHAIN</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">DATA</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">DIRECTORY</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="n">PENDING</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="n">BLOCK</span> <span class="o">=</span> <span class="mh">0x05</span>
    <span class="n">ANCHOR_SEARCH</span> <span class="o">=</span> <span class="mh">0x10</span>
    <span class="n">PUBLIC_KEY_SEARCH</span> <span class="o">=</span> <span class="mh">0x11</span>
    <span class="n">PUBLIC_KEY_HASH_SEARCH</span> <span class="o">=</span> <span class="mh">0x12</span>
    <span class="n">DELEGATE_SEARCH</span> <span class="o">=</span> <span class="mh">0x13</span>
    <span class="n">MESSAGE_HASH_SEARCH</span> <span class="o">=</span> <span class="mh">0x14</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve an enum instance by its numeric value.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">item</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid QueryType value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_rpc_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert to the expected JSON-RPC queryType format (camelCase).&quot;&quot;&quot;</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;DEFAULT&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;CHAIN&quot;</span><span class="p">:</span> <span class="s2">&quot;chain&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DATA&quot;</span><span class="p">:</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DIRECTORY&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PENDING&quot;</span><span class="p">:</span> <span class="s2">&quot;pending&quot;</span><span class="p">,</span>
            <span class="s2">&quot;BLOCK&quot;</span><span class="p">:</span> <span class="s2">&quot;block&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ANCHOR_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;anchor&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PUBLIC_KEY_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;publicKeySearch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PUBLIC_KEY_HASH_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;publicKeyHashSearch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DELEGATE_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;delegateSearch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MESSAGE_HASH_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;messageHashSearch&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.enums.QueryType.from_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.enums.QueryType.from_value" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve an enum instance by its numeric value.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve an enum instance by its numeric value.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">item</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid QueryType value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.enums.QueryType.to_rpc_format" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_rpc_format</span><span class="p">()</span></code>

<a href="#accumulate.models.enums.QueryType.to_rpc_format" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert to the expected JSON-RPC queryType format (camelCase).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_rpc_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert to the expected JSON-RPC queryType format (camelCase).&quot;&quot;&quot;</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;DEFAULT&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="s2">&quot;CHAIN&quot;</span><span class="p">:</span> <span class="s2">&quot;chain&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DATA&quot;</span><span class="p">:</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DIRECTORY&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PENDING&quot;</span><span class="p">:</span> <span class="s2">&quot;pending&quot;</span><span class="p">,</span>
        <span class="s2">&quot;BLOCK&quot;</span><span class="p">:</span> <span class="s2">&quot;block&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ANCHOR_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;anchor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PUBLIC_KEY_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;publicKeySearch&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PUBLIC_KEY_HASH_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;publicKeyHashSearch&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DELEGATE_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;delegateSearch&quot;</span><span class="p">,</span>
        <span class="s2">&quot;MESSAGE_HASH_SEARCH&quot;</span><span class="p">:</span> <span class="s2">&quot;messageHashSearch&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.RecordType" class="doc doc-heading">
            <code>RecordType</code>


<a href="#accumulate.models.enums.RecordType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of records stored in the blockchain.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RecordType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of records stored in the blockchain.&quot;&quot;&quot;</span>
    <span class="n">ACCOUNT</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">CHAIN</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">CHAIN_ENTRY</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="n">KEY</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="n">MESSAGE</span> <span class="o">=</span> <span class="mh">0x10</span>
    <span class="n">SIGNATURE_SET</span> <span class="o">=</span> <span class="mh">0x11</span>
    <span class="n">MINOR_BLOCK</span> <span class="o">=</span> <span class="mh">0x20</span>
    <span class="n">MAJOR_BLOCK</span> <span class="o">=</span> <span class="mh">0x21</span>
    <span class="n">RANGE</span> <span class="o">=</span> <span class="mh">0x80</span>
    <span class="n">URL</span> <span class="o">=</span> <span class="mh">0x81</span>
    <span class="n">TX_ID</span> <span class="o">=</span> <span class="mh">0x82</span>
    <span class="n">INDEX_ENTRY</span> <span class="o">=</span> <span class="mh">0x83</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="mh">0x8F</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.ServiceType" class="doc doc-heading">
            <code>ServiceType</code>


<a href="#accumulate.models.enums.ServiceType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of services available in the Accumulate network, using hexadecimal values.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ServiceType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of services available in the Accumulate network, using hexadecimal values.&quot;&quot;&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mh">0x00</span>  <span class="c1"># Indicates an unknown service type</span>
    <span class="n">NODE</span> <span class="o">=</span> <span class="mh">0x01</span>  <span class="c1"># Node service</span>
    <span class="n">CONSENSUS</span> <span class="o">=</span> <span class="mh">0x02</span>  <span class="c1"># Consensus service</span>
    <span class="n">NETWORK</span> <span class="o">=</span> <span class="mh">0x03</span>  <span class="c1"># Network service</span>
    <span class="n">METRICS</span> <span class="o">=</span> <span class="mh">0x04</span>  <span class="c1"># Metrics service</span>
    <span class="n">QUERY</span> <span class="o">=</span> <span class="mh">0x05</span>  <span class="c1"># Querier service</span>
    <span class="n">EVENT</span> <span class="o">=</span> <span class="mh">0x06</span>  <span class="c1"># Event service</span>
    <span class="n">SUBMIT</span> <span class="o">=</span> <span class="mh">0x07</span>  <span class="c1"># Submitter service</span>
    <span class="n">VALIDATE</span> <span class="o">=</span> <span class="mh">0x08</span>  <span class="c1"># Validator service</span>
    <span class="n">FAUCET</span> <span class="o">=</span> <span class="mh">0x09</span>  <span class="c1"># Faucet service</span>
    <span class="n">SNAPSHOT</span> <span class="o">=</span> <span class="mh">0x0A</span>  <span class="c1"># Snapshot service</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.TransactionType" class="doc doc-heading">
            <code>TransactionType</code>


<a href="#accumulate.models.enums.TransactionType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Transaction types supported by the Accumulate blockchain.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TransactionType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transaction types supported by the Accumulate blockchain.&quot;&quot;&quot;</span>
    <span class="c1"># User Transactions</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mh">0x00</span>
    <span class="n">CREATE_IDENTITY</span> <span class="o">=</span> <span class="mh">0x01</span>
    <span class="n">CREATE_TOKEN_ACCOUNT</span> <span class="o">=</span> <span class="mh">0x02</span>
    <span class="n">SEND_TOKENS</span> <span class="o">=</span> <span class="mh">0x03</span>
    <span class="n">CREATE_DATA_ACCOUNT</span> <span class="o">=</span> <span class="mh">0x04</span>
    <span class="n">WRITE_DATA</span> <span class="o">=</span> <span class="mh">0x05</span>
    <span class="n">WRITE_DATA_TO</span> <span class="o">=</span> <span class="mh">0x06</span>
    <span class="n">ACME_FAUCET</span> <span class="o">=</span> <span class="mh">0x07</span>
    <span class="n">CREATE_TOKEN</span> <span class="o">=</span> <span class="mh">0x08</span>
    <span class="n">ISSUE_TOKENS</span> <span class="o">=</span> <span class="mh">0x09</span>
    <span class="n">BURN_TOKENS</span> <span class="o">=</span> <span class="mh">0x0A</span>
    <span class="n">CREATE_LITE_TOKEN_ACCOUNT</span> <span class="o">=</span> <span class="mh">0x0B</span>
    <span class="n">CREATE_KEY_PAGE</span> <span class="o">=</span> <span class="mh">0x0C</span>
    <span class="n">CREATE_KEY_BOOK</span> <span class="o">=</span> <span class="mh">0x0D</span>
    <span class="n">ADD_CREDITS</span> <span class="o">=</span> <span class="mh">0x0E</span>
    <span class="n">UPDATE_KEY_PAGE</span> <span class="o">=</span> <span class="mh">0x0F</span>
    <span class="n">LOCK_ACCOUNT</span> <span class="o">=</span> <span class="mh">0x10</span>
    <span class="n">BURN_CREDITS</span> <span class="o">=</span> <span class="mh">0x11</span>
    <span class="n">TRANSFER_CREDITS</span> <span class="o">=</span> <span class="mh">0x12</span>
    <span class="n">UPDATE_ACCOUNT_AUTH</span> <span class="o">=</span> <span class="mh">0x15</span>
    <span class="n">UPDATE_KEY</span> <span class="o">=</span> <span class="mh">0x16</span>
    <span class="n">NETWORK_MAINTENANCE</span> <span class="o">=</span> <span class="mh">0x2E</span>
    <span class="n">ACTIVATE_PROTOCOL_VERSION</span> <span class="o">=</span> <span class="mh">0x2F</span>
    <span class="n">REMOTE</span> <span class="o">=</span> <span class="mh">0x30</span>

    <span class="c1"># Systems Transactions</span>
    <span class="n">SYNTHETIC_CREATE_IDENTITY</span> <span class="o">=</span> <span class="mh">0x31</span>
    <span class="n">SYNTHETIC_WRITE_DATA</span> <span class="o">=</span> <span class="mh">0x32</span>
    <span class="n">SYNTHETIC_DEPOSIT_TOKENS</span> <span class="o">=</span> <span class="mh">0x33</span>
    <span class="n">SYNTHETIC_DEPOSIT_CREDITS</span> <span class="o">=</span> <span class="mh">0x34</span>
    <span class="n">SYNTHETIC_BURN_TOKENS</span> <span class="o">=</span> <span class="mh">0x35</span>
    <span class="n">SYNTHETIC_FORWARD_TRANSACTION</span> <span class="o">=</span> <span class="mh">0x36</span>

    <span class="c1">##### SYSTEM TRANSACTIONS #####</span>
    <span class="n">SYSTEM_GENESIS</span> <span class="o">=</span> <span class="mh">0x60</span>
    <span class="n">DIRECTORY_ANCHOR</span> <span class="o">=</span> <span class="mh">0x61</span>
    <span class="n">BLOCK_VALIDATOR_ANCHOR</span> <span class="o">=</span> <span class="mh">0x62</span>
    <span class="n">SYSTEM_WRITE_DATA</span> <span class="o">=</span> <span class="mh">0x63</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">is_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the transaction type is a user transaction.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mh">0x31</span>  <span class="c1"># Synthetic transactions start at 0x31</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_synthetic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the transaction type is synthetic.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mh">0x31</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="mh">0x36</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the transaction type is an anchor transaction.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="p">{</span><span class="n">TransactionType</span><span class="o">.</span><span class="n">DIRECTORY_ANCHOR</span><span class="p">,</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">BLOCK_VALIDATOR_ANCHOR</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.enums.TransactionType.is_anchor" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_anchor</span><span class="p">()</span></code>

<a href="#accumulate.models.enums.TransactionType.is_anchor" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the transaction type is an anchor transaction.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the transaction type is an anchor transaction.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="p">{</span><span class="n">TransactionType</span><span class="o">.</span><span class="n">DIRECTORY_ANCHOR</span><span class="p">,</span> <span class="n">TransactionType</span><span class="o">.</span><span class="n">BLOCK_VALIDATOR_ANCHOR</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.enums.TransactionType.is_synthetic" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_synthetic</span><span class="p">()</span></code>

<a href="#accumulate.models.enums.TransactionType.is_synthetic" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the transaction type is synthetic.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_synthetic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the transaction type is synthetic.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mh">0x31</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="mh">0x36</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.enums.TransactionType.is_user" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_user</span><span class="p">()</span></code>

<a href="#accumulate.models.enums.TransactionType.is_user" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the transaction type is a user transaction.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the transaction type is a user transaction.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mh">0x31</span>  <span class="c1"># Synthetic transactions start at 0x31</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.enums.VoteType" class="doc doc-heading">
            <code>VoteType</code>


<a href="#accumulate.models.enums.VoteType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Vote types used in governance.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\enums.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">VoteType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Vote types used in governance.&quot;&quot;&quot;</span>
    <span class="n">ACCEPT</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">REJECT</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">ABSTAIN</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">SUGGEST</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.models.enums.enum_from_name" class="doc doc-heading">
            <code class=" language-python"><span class="n">enum_from_name</span><span class="p">(</span><span class="n">enum_cls</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>

<a href="#accumulate.models.enums.enum_from_name" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieve enum value by name.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\enums.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enum_from_name</span><span class="p">(</span><span class="n">enum_cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve enum value by name.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">enum_cls</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid </span><span class="si">{</span><span class="n">enum_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.errors" class="doc doc-heading">
            <code>errors</code>


<a href="#accumulate.models.errors" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.errors.AccumulateError" class="doc doc-heading">
            <code>AccumulateError</code>


<a href="#accumulate.models.errors.AccumulateError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base class for Accumulate-related errors.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\errors.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccumulateError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for Accumulate-related errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">ErrorCode</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="ow">or</span> <span class="n">code</span><span class="o">.</span><span class="n">description</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.errors.EncodingError" class="doc doc-heading">
            <code>EncodingError</code>


<a href="#accumulate.models.errors.EncodingError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.errors.AccumulateError" href="#accumulate.models.errors.AccumulateError">AccumulateError</a></code></p>


        <p>Error raised when encoding or decoding fails.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\errors.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EncodingError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Error raised when encoding or decoding fails.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">ENCODING_ERROR</span><span class="o">.</span><span class="n">description</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ErrorCode</span><span class="o">.</span><span class="n">ENCODING_ERROR</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.errors.ErrorCode" class="doc doc-heading">
            <code>ErrorCode</code>


<a href="#accumulate.models.errors.ErrorCode" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Enumeration of error codes and their descriptions.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\errors.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ErrorCode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enumeration of error codes and their descriptions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">OK</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Indicates the request succeeded&quot;</span><span class="p">)</span>
    <span class="n">ENCODING_ERROR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Indicates something could not be decoded or encoded&quot;</span><span class="p">)</span>
    <span class="n">FAILED</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Indicates the request failed&quot;</span><span class="p">)</span>
    <span class="n">DID_PANIC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;Indicates the request failed due to a fatal error&quot;</span><span class="p">)</span>
    <span class="n">UNKNOWN_ERROR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;Indicates the request failed due to an unknown error&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">success</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines if the error code represents a successful state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">OK</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ErrorCode&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the error code enum from its integer value.</span>

<span class="sd">        :param value: The integer value of the error code.</span>
<span class="sd">        :return: The corresponding ErrorCode enum.</span>
<span class="sd">        :raises ValueError: If the value is not a valid error code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">error</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown ErrorCode value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.errors.ErrorCode.from_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.errors.ErrorCode.from_value" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve the error code enum from its integer value.</p>
<p>:param value: The integer value of the error code.
:return: The corresponding ErrorCode enum.
:raises ValueError: If the value is not a valid error code.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\errors.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ErrorCode&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the error code enum from its integer value.</span>

<span class="sd">    :param value: The integer value of the error code.</span>
<span class="sd">    :return: The corresponding ErrorCode enum.</span>
<span class="sd">    :raises ValueError: If the value is not a valid error code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">error</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">error</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown ErrorCode value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.errors.ErrorCode.success" class="doc doc-heading">
            <code class=" language-python"><span class="n">success</span><span class="p">()</span></code>

<a href="#accumulate.models.errors.ErrorCode.success" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Determines if the error code represents a successful state.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\errors.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">success</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines if the error code represents a successful state.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">OK</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.errors.FailedError" class="doc doc-heading">
            <code>FailedError</code>


<a href="#accumulate.models.errors.FailedError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.errors.AccumulateError" href="#accumulate.models.errors.AccumulateError">AccumulateError</a></code></p>


        <p>Error raised for general failure cases.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\errors.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FailedError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Error raised for general failure cases.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Request failed&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ErrorCode</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.errors.PanicError" class="doc doc-heading">
            <code>PanicError</code>


<a href="#accumulate.models.errors.PanicError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.errors.AccumulateError" href="#accumulate.models.errors.AccumulateError">AccumulateError</a></code></p>


        <p>Error raised for fatal errors.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\errors.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PanicError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Error raised for fatal errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;A fatal error occurred&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ErrorCode</span><span class="o">.</span><span class="n">DID_PANIC</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.errors.UnknownError" class="doc doc-heading">
            <code>UnknownError</code>


<a href="#accumulate.models.errors.UnknownError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.errors.AccumulateError" href="#accumulate.models.errors.AccumulateError">AccumulateError</a></code></p>


        <p>Error raised for unknown issues.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\errors.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UnknownError</span><span class="p">(</span><span class="n">AccumulateError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Error raised for unknown issues.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;An unknown error occurred&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ErrorCode</span><span class="o">.</span><span class="n">UNKNOWN_ERROR</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.errors.ValidationError" class="doc doc-heading">
            <code>ValidationError</code>


<a href="#accumulate.models.errors.ValidationError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Raised when validation fails.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\errors.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when validation fails.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.models.errors.raise_for_error_code" class="doc doc-heading">
            <code class=" language-python"><span class="n">raise_for_error_code</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.errors.raise_for_error_code" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Raise the appropriate exception based on the error code.</p>
<p>:param code: The error code as an integer.
:param message: An optional message describing the error.
:raises AccumulateError: The corresponding exception for the error code.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\errors.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">raise_for_error_code</span><span class="p">(</span><span class="n">code</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Raise the appropriate exception based on the error code.</span>

<span class="sd">    :param code: The error code as an integer.</span>
<span class="sd">    :param message: An optional message describing the error.</span>
<span class="sd">    :raises AccumulateError: The corresponding exception for the error code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">error_code</span> <span class="o">=</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">error_code</span> <span class="o">==</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">OK</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># No error</span>

    <span class="n">error_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">ErrorCode</span><span class="o">.</span><span class="n">ENCODING_ERROR</span><span class="p">:</span> <span class="n">EncodingError</span><span class="p">,</span>
        <span class="n">ErrorCode</span><span class="o">.</span><span class="n">FAILED</span><span class="p">:</span> <span class="n">FailedError</span><span class="p">,</span>
        <span class="n">ErrorCode</span><span class="o">.</span><span class="n">DID_PANIC</span><span class="p">:</span> <span class="n">PanicError</span><span class="p">,</span>
        <span class="n">ErrorCode</span><span class="o">.</span><span class="n">UNKNOWN_ERROR</span><span class="p">:</span> <span class="n">UnknownError</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">exception_class</span> <span class="o">=</span> <span class="n">error_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">error_code</span><span class="p">,</span> <span class="n">AccumulateError</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">exception_class</span><span class="p">(</span><span class="n">message</span> <span class="ow">or</span> <span class="n">error_code</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.events" class="doc doc-heading">
            <code>events</code>


<a href="#accumulate.models.events" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.events.BlockEvent" class="doc doc-heading">
            <code>BlockEvent</code>


<a href="#accumulate.models.events.BlockEvent" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.records.Record" href="#accumulate.models.records.Record">Record</a></code></p>


        <p>Represents a block event.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\events.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BlockEvent</span><span class="p">(</span><span class="n">Record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a block event.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">partition</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span>
        <span class="n">major</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">entries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">record_type</span><span class="o">=</span><span class="s2">&quot;BlockEvent&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">partition</span> <span class="o">=</span> <span class="n">partition</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="n">major</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="n">entries</span> <span class="ow">or</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert to dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;record_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">record_type</span><span class="p">,</span>
            <span class="s2">&quot;partition&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">partition</span><span class="p">,</span>
            <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s2">&quot;major&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span><span class="p">,</span>
            <span class="s2">&quot;entries&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;BlockEvent&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a BlockEvent from a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BlockEvent</span><span class="p">(</span>
            <span class="n">partition</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;partition&quot;</span><span class="p">],</span>
            <span class="n">index</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">],</span>
            <span class="n">time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]),</span>
            <span class="n">major</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">],</span>
            <span class="n">entries</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entries&quot;</span><span class="p">,</span> <span class="p">[]),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.events.BlockEvent.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.events.BlockEvent.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a BlockEvent from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\events.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;BlockEvent&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a BlockEvent from a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">BlockEvent</span><span class="p">(</span>
        <span class="n">partition</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;partition&quot;</span><span class="p">],</span>
        <span class="n">index</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">],</span>
        <span class="n">time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]),</span>
        <span class="n">major</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">],</span>
        <span class="n">entries</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entries&quot;</span><span class="p">,</span> <span class="p">[]),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.events.BlockEvent.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.events.BlockEvent.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert to dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\events.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert to dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;record_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">record_type</span><span class="p">,</span>
        <span class="s2">&quot;partition&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">partition</span><span class="p">,</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
        <span class="s2">&quot;major&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">major</span><span class="p">,</span>
        <span class="s2">&quot;entries&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.events.ErrorEvent" class="doc doc-heading">
            <code>ErrorEvent</code>


<a href="#accumulate.models.events.ErrorEvent" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an error event in the system.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\events.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ErrorEvent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an error event in the system.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">err</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">err</span> <span class="o">=</span> <span class="n">err</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert to dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;err&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">err</span><span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ErrorEvent&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an ErrorEvent from a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ErrorEvent</span><span class="p">(</span><span class="n">err</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;err&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.events.ErrorEvent.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.events.ErrorEvent.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create an ErrorEvent from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\events.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;ErrorEvent&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an ErrorEvent from a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ErrorEvent</span><span class="p">(</span><span class="n">err</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;err&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.events.ErrorEvent.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.events.ErrorEvent.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert to dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\events.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert to dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;err&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">err</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.events.GlobalsEvent" class="doc doc-heading">
            <code>GlobalsEvent</code>


<a href="#accumulate.models.events.GlobalsEvent" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a global values change event.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\events.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GlobalsEvent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a global values change event.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">new</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">old</span> <span class="o">=</span> <span class="n">old</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new</span> <span class="o">=</span> <span class="n">new</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert to dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;old&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">old</span><span class="p">,</span> <span class="s2">&quot;new&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;GlobalsEvent&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a GlobalsEvent from a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">GlobalsEvent</span><span class="p">(</span>
            <span class="n">old</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;old&quot;</span><span class="p">),</span>
            <span class="n">new</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;new&quot;</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.events.GlobalsEvent.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.events.GlobalsEvent.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a GlobalsEvent from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\events.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;GlobalsEvent&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a GlobalsEvent from a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">GlobalsEvent</span><span class="p">(</span>
        <span class="n">old</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;old&quot;</span><span class="p">),</span>
        <span class="n">new</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;new&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.events.GlobalsEvent.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.events.GlobalsEvent.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert to dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\events.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert to dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;old&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">old</span><span class="p">,</span> <span class="s2">&quot;new&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.faucet" class="doc doc-heading">
            <code>faucet</code>


<a href="#accumulate.models.faucet" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.faucet.Faucet" class="doc doc-heading">
            <code>Faucet</code>


<a href="#accumulate.models.faucet.Faucet" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents the Accumulate faucet account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Faucet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the Accumulate faucet account.&quot;&quot;&quot;</span>

    <span class="n">ACME_FAUCET_AMOUNT</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">ACME_FAUCET_BALANCE</span> <span class="o">=</span> <span class="mi">200_000_000</span>

    <span class="c1"># Generate the faucet key using a fixed seed</span>
    <span class="n">FAUCET_SEED</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;faucet&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">FAUCET_KEY</span> <span class="o">=</span> <span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">from_private_bytes</span><span class="p">(</span><span class="n">FAUCET_SEED</span><span class="p">[:</span><span class="mi">32</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the Faucet.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">faucet_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_faucet_url</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_faucet_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the faucet URL using the public key.</span>

<span class="sd">        :return: A string representing the faucet URL.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">public_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">LiteAuthorityForKey</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span><span class="w"> </span><span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">)</span><span class="si">}</span><span class="s2">/ACME&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the public key of the faucet.</span>

<span class="sd">        :return: The public key as bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">FAUCET_KEY</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
            <span class="n">encoding</span><span class="o">=</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>  <span class="c1"># Use PEM for portability</span>
            <span class="nb">format</span><span class="o">=</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>  <span class="c1"># Standard format for public keys</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">signer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FaucetSigner&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new faucet signer with the current timestamp.</span>

<span class="sd">        :return: A FaucetSigner instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FaucetSigner</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e9</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.Faucet.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">()</span></code>

<a href="#accumulate.models.faucet.Faucet.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize the Faucet.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the Faucet.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">faucet_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_faucet_url</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.Faucet._generate_faucet_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">_generate_faucet_url</span><span class="p">()</span></code>

<a href="#accumulate.models.faucet.Faucet._generate_faucet_url" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate the faucet URL using the public key.</p>
<p>:return: A string representing the faucet URL.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_generate_faucet_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the faucet URL using the public key.</span>

<span class="sd">    :return: A string representing the faucet URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">public_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">LiteAuthorityForKey</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span><span class="w"> </span><span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">)</span><span class="si">}</span><span class="s2">/ACME&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.Faucet.public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">public_key</span><span class="p">()</span></code>

<a href="#accumulate.models.faucet.Faucet.public_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the public key of the faucet.</p>
<p>:return: The public key as bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the public key of the faucet.</span>

<span class="sd">    :return: The public key as bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">FAUCET_KEY</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>  <span class="c1"># Use PEM for portability</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>  <span class="c1"># Standard format for public keys</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.Faucet.signer" class="doc doc-heading">
            <code class=" language-python"><span class="n">signer</span><span class="p">()</span></code>

<a href="#accumulate.models.faucet.Faucet.signer" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a new faucet signer with the current timestamp.</p>
<p>:return: A FaucetSigner instance.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">signer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FaucetSigner&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a new faucet signer with the current timestamp.</span>

<span class="sd">    :return: A FaucetSigner instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FaucetSigner</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e9</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.faucet.FaucetSigner" class="doc doc-heading">
            <code>FaucetSigner</code>


<a href="#accumulate.models.faucet.FaucetSigner" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Handles signing for the faucet.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FaucetSigner</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles signing for the faucet.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the FaucetSigner.</span>

<span class="sd">        :param timestamp: The timestamp to use for signing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the version of the signer.</span>

<span class="sd">        :return: Version as an integer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">:</span> <span class="n">Signature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the public key for a given signature.</span>

<span class="sd">        :param sig: The signature object to update.</span>
<span class="sd">        :raises ValueError: If the signature type is unsupported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="p">(</span><span class="n">LegacyED25519Signature</span><span class="p">,</span> <span class="n">ED25519Signature</span><span class="p">,</span> <span class="n">RCD1Signature</span><span class="p">)):</span>
            <span class="n">sig</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">Faucet</span><span class="o">.</span><span class="n">FAUCET_KEY</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
                <span class="n">encoding</span><span class="o">=</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set the public key on </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">:</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">sig_md_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sign the message with the faucet key.</span>

<span class="sd">        :param sig: The signature object to update.</span>
<span class="sd">        :param sig_md_hash: The metadata hash for the signature.</span>
<span class="sd">        :param message: The message to sign.</span>
<span class="sd">        :raises ValueError: If the signature type is unsupported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="p">(</span><span class="n">LegacyED25519Signature</span><span class="p">,</span> <span class="n">ED25519Signature</span><span class="p">,</span> <span class="n">RCD1Signature</span><span class="p">)):</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">Faucet</span><span class="o">.</span><span class="n">FAUCET_KEY</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="n">sig</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot sign </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> with a key.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.FaucetSigner.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

<a href="#accumulate.models.faucet.FaucetSigner.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize the FaucetSigner.</p>
<p>:param timestamp: The timestamp to use for signing.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the FaucetSigner.</span>

<span class="sd">    :param timestamp: The timestamp to use for signing.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.FaucetSigner.set_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_public_key</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span></code>

<a href="#accumulate.models.faucet.FaucetSigner.set_public_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the public key for a given signature.</p>
<p>:param sig: The signature object to update.
:raises ValueError: If the signature type is unsupported.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">:</span> <span class="n">Signature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the public key for a given signature.</span>

<span class="sd">    :param sig: The signature object to update.</span>
<span class="sd">    :raises ValueError: If the signature type is unsupported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="p">(</span><span class="n">LegacyED25519Signature</span><span class="p">,</span> <span class="n">ED25519Signature</span><span class="p">,</span> <span class="n">RCD1Signature</span><span class="p">)):</span>
        <span class="n">sig</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">Faucet</span><span class="o">.</span><span class="n">FAUCET_KEY</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
            <span class="n">encoding</span><span class="o">=</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set the public key on </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.FaucetSigner.sign" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">sig_md_hash</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

<a href="#accumulate.models.faucet.FaucetSigner.sign" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign the message with the faucet key.</p>
<p>:param sig: The signature object to update.
:param sig_md_hash: The metadata hash for the signature.
:param message: The message to sign.
:raises ValueError: If the signature type is unsupported.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">:</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">sig_md_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sign the message with the faucet key.</span>

<span class="sd">    :param sig: The signature object to update.</span>
<span class="sd">    :param sig_md_hash: The metadata hash for the signature.</span>
<span class="sd">    :param message: The message to sign.</span>
<span class="sd">    :raises ValueError: If the signature type is unsupported.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="p">(</span><span class="n">LegacyED25519Signature</span><span class="p">,</span> <span class="n">ED25519Signature</span><span class="p">,</span> <span class="n">RCD1Signature</span><span class="p">)):</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">Faucet</span><span class="o">.</span><span class="n">FAUCET_KEY</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">sig</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot sign </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> with a key.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.faucet.FaucetSigner.version" class="doc doc-heading">
            <code class=" language-python"><span class="n">version</span><span class="p">()</span></code>

<a href="#accumulate.models.faucet.FaucetSigner.version" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the version of the signer.</p>
<p>:return: Version as an integer.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\faucet.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the version of the signer.</span>

<span class="sd">    :return: Version as an integer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.fee_schedule" class="doc doc-heading">
            <code>fee_schedule</code>


<a href="#accumulate.models.fee_schedule" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.fee_schedule.Fee" class="doc doc-heading">
            <code>Fee</code>


<a href="#accumulate.models.fee_schedule.Fee" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Enumeration of transaction fees in credits.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\fee_schedule.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Fee</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enumeration of transaction fees in credits.&quot;&quot;&quot;</span>
    <span class="n">FEE_FAILED_MAXIMUM</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># $0.01</span>
    <span class="n">FEE_SIGNATURE</span> <span class="o">=</span> <span class="mi">1</span>         <span class="c1"># $0.0001</span>
    <span class="n">FEE_CREATE_IDENTITY</span> <span class="o">=</span> <span class="mi">50000</span>  <span class="c1"># $5.00</span>
    <span class="n">FEE_CREATE_DIRECTORY</span> <span class="o">=</span> <span class="mi">1000</span>  <span class="c1"># $0.10</span>
    <span class="n">FEE_CREATE_ACCOUNT</span> <span class="o">=</span> <span class="mi">2500</span>    <span class="c1"># $0.25</span>
    <span class="n">FEE_TRANSFER_TOKENS</span> <span class="o">=</span> <span class="mi">300</span>    <span class="c1"># $0.03</span>
    <span class="n">FEE_TRANSFER_TOKENS_EXTRA</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># $0.01</span>
    <span class="n">FEE_CREATE_TOKEN</span> <span class="o">=</span> <span class="mi">500000</span>    <span class="c1"># $50.00</span>
    <span class="n">FEE_GENERAL_TINY</span> <span class="o">=</span> <span class="mi">1</span>         <span class="c1"># $0.001</span>
    <span class="n">FEE_GENERAL_SMALL</span> <span class="o">=</span> <span class="mi">10</span>       <span class="c1"># $0.001</span>
    <span class="n">FEE_CREATE_KEY_PAGE</span> <span class="o">=</span> <span class="mi">10000</span>  <span class="c1"># $1.00</span>
    <span class="n">FEE_CREATE_KEY_PAGE_EXTRA</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># $0.01</span>
    <span class="n">FEE_DATA</span> <span class="o">=</span> <span class="mi">10</span>                <span class="c1"># $0.001 / 256 bytes</span>
    <span class="n">FEE_SCRATCH_DATA</span> <span class="o">=</span> <span class="mi">1</span>         <span class="c1"># $0.0001 / 256 bytes</span>
    <span class="n">FEE_UPDATE_AUTH</span> <span class="o">=</span> <span class="mi">300</span>        <span class="c1"># $0.03</span>
    <span class="n">FEE_UPDATE_AUTH_EXTRA</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># $0.01</span>
    <span class="n">FEE_MINIMUM_CREDIT_PURCHASE</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># $0.01</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.fee_schedule.FeeSchedule" class="doc doc-heading">
            <code>FeeSchedule</code>


<a href="#accumulate.models.fee_schedule.FeeSchedule" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\models\fee_schedule.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FeeSchedule</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">compute_signature_fee</span><span class="p">(</span><span class="n">sig</span><span class="p">:</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">signature_size_max</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting compute_signature_fee with signature: </span><span class="si">{</span><span class="n">sig</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sig</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial signature size: </span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">signature_size_max</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signature size exceeds </span><span class="si">{</span><span class="n">signature_size_max</span><span class="si">}</span><span class="s2"> bytes.&quot;</span><span class="p">)</span>

        <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_SIGNATURE</span>
        <span class="n">chunks</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">fee</span> <span class="o">+=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_SIGNATURE</span> <span class="o">*</span> <span class="p">(</span><span class="n">chunks</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fee after chunk calculation for main signature: </span><span class="si">{</span><span class="n">fee</span><span class="si">}</span><span class="s2"> (chunks: </span><span class="si">{</span><span class="n">chunks</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

        <span class="n">visited_signatures</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># Avoid repeated processing</span>
        <span class="k">while</span> <span class="n">sig</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="s2">&quot;delegated_signature&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">sig</span> <span class="ow">in</span> <span class="n">visited_signatures</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Circular delegation detected.&quot;</span><span class="p">)</span>
            <span class="n">visited_signatures</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span>

            <span class="n">sig</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">delegated_signature</span>
            <span class="k">if</span> <span class="n">sig</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Break if no further delegation</span>
                <span class="k">break</span>

            <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sig</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Delegated signature size: </span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">chunks</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">fee</span> <span class="o">+=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_SIGNATURE</span> <span class="o">*</span> <span class="n">chunks</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated fee after processing delegated signature: </span><span class="si">{</span><span class="n">fee</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final computed fee: </span><span class="si">{</span><span class="n">fee</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fee</span>



    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">compute_transaction_fee</span><span class="p">(</span><span class="n">tx</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">,</span> <span class="n">transaction_size_max</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20480</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the fee for a given transaction.</span>

<span class="sd">        :param tx: The transaction object.</span>
<span class="sd">        :param transaction_size_max: Maximum allowed size for a transaction.</span>
<span class="sd">        :return: The calculated fee in credits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">transaction_size_max</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction size exceeds </span><span class="si">{</span><span class="n">transaction_size_max</span><span class="si">}</span><span class="s2"> bytes.&quot;</span><span class="p">)</span>

        <span class="n">fee</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">tx_type</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;CreateToken&quot;</span><span class="p">:</span>
            <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_TOKEN</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;CreateIdentity&quot;</span><span class="p">:</span>
            <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_IDENTITY</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tx_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;CreateTokenAccount&quot;</span><span class="p">,</span> <span class="s2">&quot;CreateDataAccount&quot;</span><span class="p">}:</span>
            <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_ACCOUNT</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;SendTokens&quot;</span><span class="p">:</span>
            <span class="n">fee</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_TRANSFER_TOKENS</span>
                <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_TRANSFER_TOKENS_EXTRA</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">to</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;CreateKeyPage&quot;</span><span class="p">:</span>
            <span class="n">fee</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_KEY_PAGE</span>
                <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_KEY_PAGE_EXTRA</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_GENERAL_SMALL</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fee</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">compute_synthetic_refund</span><span class="p">(</span><span class="n">tx</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">,</span> <span class="n">synth_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">paid</span> <span class="o">=</span> <span class="n">FeeSchedule</span><span class="o">.</span><span class="n">compute_transaction_fee</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">paid</span> <span class="o">&lt;=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_FAILED_MAXIMUM</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="n">tx_type</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">tx_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;SendTokens&quot;</span><span class="p">,</span> <span class="s2">&quot;IssueTokens&quot;</span><span class="p">}:</span>
            <span class="k">if</span> <span class="n">synth_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># Ensure this condition is correctly evaluated</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">tx_type</span><span class="si">}</span><span class="s2"> transaction cannot have multiple outputs.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_TRANSFER_TOKENS_EXTRA</span>

        <span class="k">return</span> <span class="n">paid</span> <span class="o">-</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_FAILED_MAXIMUM</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.fee_schedule.FeeSchedule.compute_transaction_fee" class="doc doc-heading">
            <code class=" language-python"><span class="n">compute_transaction_fee</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">transaction_size_max</span><span class="o">=</span><span class="mi">20480</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.fee_schedule.FeeSchedule.compute_transaction_fee" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Compute the fee for a given transaction.</p>
<p>:param tx: The transaction object.
:param transaction_size_max: Maximum allowed size for a transaction.
:return: The calculated fee in credits.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\fee_schedule.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">compute_transaction_fee</span><span class="p">(</span><span class="n">tx</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">,</span> <span class="n">transaction_size_max</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20480</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the fee for a given transaction.</span>

<span class="sd">    :param tx: The transaction object.</span>
<span class="sd">    :param transaction_size_max: Maximum allowed size for a transaction.</span>
<span class="sd">    :return: The calculated fee in credits.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">transaction_size_max</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction size exceeds </span><span class="si">{</span><span class="n">transaction_size_max</span><span class="si">}</span><span class="s2"> bytes.&quot;</span><span class="p">)</span>

    <span class="n">fee</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">tx_type</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;CreateToken&quot;</span><span class="p">:</span>
        <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_TOKEN</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;CreateIdentity&quot;</span><span class="p">:</span>
        <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_IDENTITY</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tx_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;CreateTokenAccount&quot;</span><span class="p">,</span> <span class="s2">&quot;CreateDataAccount&quot;</span><span class="p">}:</span>
        <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_ACCOUNT</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;SendTokens&quot;</span><span class="p">:</span>
        <span class="n">fee</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_TRANSFER_TOKENS</span>
            <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_TRANSFER_TOKENS_EXTRA</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">to</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">tx_type</span> <span class="o">==</span> <span class="s2">&quot;CreateKeyPage&quot;</span><span class="p">:</span>
        <span class="n">fee</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_KEY_PAGE</span>
            <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_CREATE_KEY_PAGE_EXTRA</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tx</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fee</span> <span class="o">=</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_GENERAL_SMALL</span> <span class="o">+</span> <span class="n">Fee</span><span class="o">.</span><span class="n">FEE_DATA</span> <span class="o">*</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fee</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.general" class="doc doc-heading">
            <code>general</code>


<a href="#accumulate.models.general" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.AccountAuth" class="doc doc-heading">
            <code>AccountAuth</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.AccountAuth" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents account authorization details.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AccountAuth</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents account authorization details.&quot;&quot;&quot;</span>
    <span class="n">authorities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;AuthorityEntry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.AnchorMetadata" class="doc doc-heading">
            <code>AnchorMetadata</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.AnchorMetadata" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Metadata for an anchor.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AnchorMetadata</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Metadata for an anchor.&quot;&quot;&quot;</span>
    <span class="n">account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span>
    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">source_index</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">source_block</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">entry</span><span class="p">:</span> <span class="nb">bytes</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.AuthorityEntry" class="doc doc-heading">
            <code>AuthorityEntry</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.AuthorityEntry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an entry in the account's authorization list.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AuthorityEntry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an entry in the account&#39;s authorization list.&quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span>
    <span class="n">disabled</span><span class="p">:</span> <span class="nb">bool</span>  <span class="c1"># True if auth checks are disabled for this authority</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.BlockEntry" class="doc doc-heading">
            <code>BlockEntry</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.BlockEntry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a single entry in a block.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BlockEntry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a single entry in a block.&quot;&quot;&quot;</span>
    <span class="n">account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span>
    <span class="n">chain</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.CreditRecipient" class="doc doc-heading">
            <code>CreditRecipient</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.CreditRecipient" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CreditRecipient</span><span class="p">:</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span>
    <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert TokenRecipient to dictionary format for JSON serialization.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span>  <span class="c1"># Convert to string to match Accumulate JSON format</span>
        <span class="p">}</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize CreditRecipient to bytes.&quot;&quot;&quot;</span>
        <span class="n">url_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
        <span class="n">amount_data</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url_data</span> <span class="o">+</span> <span class="n">amount_data</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreditRecipient&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize bytes into CreditRecipient.&quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Read the URL</span>
        <span class="n">url_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">url_length</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

        <span class="c1"># Read the amount</span>
        <span class="n">amount</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.general.CreditRecipient.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.general.CreditRecipient.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize CreditRecipient to bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\general.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize CreditRecipient to bytes.&quot;&quot;&quot;</span>
    <span class="n">url_data</span> <span class="o">=</span> <span class="n">string_marshal_binary</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
    <span class="n">amount_data</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">url_data</span> <span class="o">+</span> <span class="n">amount_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.general.CreditRecipient.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.general.CreditRecipient.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert TokenRecipient to dictionary format for JSON serialization.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\general.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert TokenRecipient to dictionary format for JSON serialization.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span>  <span class="c1"># Convert to string to match Accumulate JSON format</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.general.CreditRecipient.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.general.CreditRecipient.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize bytes into CreditRecipient.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\general.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;CreditRecipient&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize bytes into CreditRecipient.&quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Read the URL</span>
    <span class="n">url_length</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">url_str</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">url_length</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

    <span class="c1"># Read the amount</span>
    <span class="n">amount</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">decode_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.FeeSchedule" class="doc doc-heading">
            <code>FeeSchedule</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.FeeSchedule" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a fee schedule for the network.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FeeSchedule</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a fee schedule for the network.&quot;&quot;&quot;</span>
    <span class="n">create_identity_sliding</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">create_sub_identity</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">bare_identity_discount</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.IndexEntry" class="doc doc-heading">
            <code>IndexEntry</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.IndexEntry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an index entry in a chain.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">IndexEntry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an index entry in a chain.&quot;&quot;&quot;</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">anchor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">block_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">block_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Unix timestamp</span>
    <span class="n">root_index_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.NetworkGlobals" class="doc doc-heading">
            <code>NetworkGlobals</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.NetworkGlobals" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents network-level global configurations.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NetworkGlobals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents network-level global configurations.&quot;&quot;&quot;</span>
    <span class="n">operator_accept_threshold</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">validator_accept_threshold</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">major_block_schedule</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">anchor_empty_blocks</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">fee_schedule</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;FeeSchedule&quot;</span><span class="p">]</span>
    <span class="n">limits</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;NetworkLimits&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.NetworkLimits" class="doc doc-heading">
            <code>NetworkLimits</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.NetworkLimits" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents network protocol limits.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NetworkLimits</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents network protocol limits.&quot;&quot;&quot;</span>
    <span class="n">data_entry_parts</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">account_authorities</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">book_pages</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">page_entries</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">identity_accounts</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">pending_major_blocks</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">events_per_block</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.Object" class="doc doc-heading">
            <code>Object</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.Object" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Generic object with chains and pending transactions.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic object with chains and pending transactions.&quot;&quot;&quot;</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Enum for ObjectType</span>
    <span class="n">chains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;ChainMetadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">pending</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;TxIdSet&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Pending transactions</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.general.TokenRecipient" class="doc doc-heading">
            <code>TokenRecipient</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.general.TokenRecipient" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\models\general.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TokenRecipient</span><span class="p">:</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">URL</span>
    <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;URL cannot be None.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Amount must be a non-negative integer.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert TokenRecipient to dictionary format for JSON serialization.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>  
            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span>  
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;TokenRecipient(url=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">, amount=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.general.TokenRecipient.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.general.TokenRecipient.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert TokenRecipient to dictionary format for JSON serialization.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\general.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert TokenRecipient to dictionary format for JSON serialization.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>  
        <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span>  
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.key_management" class="doc doc-heading">
            <code>key_management</code>


<a href="#accumulate.models.key_management" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.AddKeyOperation" class="doc doc-heading">
            <code>AddKeyOperation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.AddKeyOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an operation to add a key to a key page.</p>
<p>:param entry: The key specification to add.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AddKeyOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to add a key to a key page.</span>

<span class="sd">    :param entry: The key specification to add.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entry</span><span class="p">:</span> <span class="n">KeySpec</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.KeyPage" class="doc doc-heading">
            <code>KeyPage</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.KeyPage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a page of keys with threshold signature requirements.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">KeyPage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a page of keys with threshold signature requirements.&quot;&quot;&quot;</span>
    <span class="n">accept_threshold</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">KeySpec</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_m_of_n</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the signature requirements for the key page.</span>

<span class="sd">        :return: A tuple (m, n) where m is the threshold and n is the total number of keys.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">accept_threshold</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the signature threshold for the key page.</span>

<span class="sd">        :param m: The required number of signatures.</span>
<span class="sd">        :raises ValueError: If the threshold is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Threshold must be greater than 0.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot require </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2"> signatures with only </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span><span class="si">}</span><span class="s2"> keys available.&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept_threshold</span> <span class="o">=</span> <span class="n">m</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">entry_by_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KeySpec</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find a key entry by its hash.</span>

<span class="sd">        :param key_hash: The hash of the key to search for.</span>
<span class="sd">        :return: A tuple (index, key_spec, found) where index is the position, key_spec is the found key, and found is a boolean.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key_spec</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key_spec</span><span class="o">.</span><span class="n">public_key_hash</span> <span class="o">==</span> <span class="n">key_hash</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span><span class="p">,</span> <span class="n">key_spec</span><span class="p">,</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_key_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_spec</span><span class="p">:</span> <span class="n">KeySpec</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a key specification to the key page.</span>

<span class="sd">        :param key_spec: The key specification to add.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key_spec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ks</span><span class="p">:</span> <span class="p">(</span><span class="n">ks</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">,</span> <span class="n">ks</span><span class="o">.</span><span class="n">delegate</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove_key_spec_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove a key specification at a specific index.</span>

<span class="sd">        :param index: The index of the key to remove.</span>
<span class="sd">        :raises IndexError: If the index is out of range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Key index out of range&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeyPage.add_key_spec" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_key_spec</span><span class="p">(</span><span class="n">key_spec</span><span class="p">)</span></code>

<a href="#accumulate.models.key_management.KeyPage.add_key_spec" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add a key specification to the key page.</p>
<p>:param key_spec: The key specification to add.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_key_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_spec</span><span class="p">:</span> <span class="n">KeySpec</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a key specification to the key page.</span>

<span class="sd">    :param key_spec: The key specification to add.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key_spec</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
        <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ks</span><span class="p">:</span> <span class="p">(</span><span class="n">ks</span><span class="o">.</span><span class="n">public_key_hash</span><span class="p">,</span> <span class="n">ks</span><span class="o">.</span><span class="n">delegate</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeyPage.entry_by_key_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">entry_by_key_hash</span><span class="p">(</span><span class="n">key_hash</span><span class="p">)</span></code>

<a href="#accumulate.models.key_management.KeyPage.entry_by_key_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Find a key entry by its hash.</p>
<p>:param key_hash: The hash of the key to search for.
:return: A tuple (index, key_spec, found) where index is the position, key_spec is the found key, and found is a boolean.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">entry_by_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KeySpec</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find a key entry by its hash.</span>

<span class="sd">    :param key_hash: The hash of the key to search for.</span>
<span class="sd">    :return: A tuple (index, key_spec, found) where index is the position, key_spec is the found key, and found is a boolean.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key_spec</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key_spec</span><span class="o">.</span><span class="n">public_key_hash</span> <span class="o">==</span> <span class="n">key_hash</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span><span class="p">,</span> <span class="n">key_spec</span><span class="p">,</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeyPage.get_m_of_n" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_m_of_n</span><span class="p">()</span></code>

<a href="#accumulate.models.key_management.KeyPage.get_m_of_n" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve the signature requirements for the key page.</p>
<p>:return: A tuple (m, n) where m is the threshold and n is the total number of keys.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_m_of_n</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the signature requirements for the key page.</span>

<span class="sd">    :return: A tuple (m, n) where m is the threshold and n is the total number of keys.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">accept_threshold</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeyPage.remove_key_spec_at" class="doc doc-heading">
            <code class=" language-python"><span class="n">remove_key_spec_at</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></code>

<a href="#accumulate.models.key_management.KeyPage.remove_key_spec_at" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Remove a key specification at a specific index.</p>
<p>:param index: The index of the key to remove.
:raises IndexError: If the index is out of range.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_key_spec_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove a key specification at a specific index.</span>

<span class="sd">    :param index: The index of the key to remove.</span>
<span class="sd">    :raises IndexError: If the index is out of range.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Key index out of range&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeyPage.set_threshold" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_threshold</span><span class="p">(</span><span class="n">m</span><span class="p">)</span></code>

<a href="#accumulate.models.key_management.KeyPage.set_threshold" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the signature threshold for the key page.</p>
<p>:param m: The required number of signatures.
:raises ValueError: If the threshold is invalid.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the signature threshold for the key page.</span>

<span class="sd">    :param m: The required number of signatures.</span>
<span class="sd">    :raises ValueError: If the threshold is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Threshold must be greater than 0.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Cannot require </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2"> signatures with only </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span><span class="si">}</span><span class="s2"> keys available.&quot;</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">accept_threshold</span> <span class="o">=</span> <span class="n">m</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.KeySpec" class="doc doc-heading">
            <code>KeySpec</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.KeySpec" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a key specification with metadata.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">KeySpec</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a key specification with metadata.&quot;&quot;&quot;</span>
    <span class="n">public_key_hash</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">delegate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">last_used_on</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_last_used_on</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the timestamp of the last key usage.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_used_on</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_last_used_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the timestamp of the last key usage.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_used_on</span> <span class="o">=</span> <span class="n">timestamp</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeySpec.get_last_used_on" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_last_used_on</span><span class="p">()</span></code>

<a href="#accumulate.models.key_management.KeySpec.get_last_used_on" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve the timestamp of the last key usage.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_last_used_on</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the timestamp of the last key usage.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_used_on</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeySpec.set_last_used_on" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_last_used_on</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>

<a href="#accumulate.models.key_management.KeySpec.set_last_used_on" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the timestamp of the last key usage.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_last_used_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the timestamp of the last key usage.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_used_on</span> <span class="o">=</span> <span class="n">timestamp</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.KeySpecParams" class="doc doc-heading">
            <code>KeySpecParams</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.KeySpecParams" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents the parameters for a key specification.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">KeySpecParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the parameters for a key specification.&quot;&quot;&quot;</span>
    <span class="n">key_hash</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">delegate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the KeySpecParams to bytes correctly.&quot;&quot;&quot;</span>
        <span class="n">key_hash_data</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mh">0x20</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span><span class="p">))</span>  <span class="c1">#  keyHash encoding with `0x20`</span>

        <span class="n">delegate_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span><span class="p">:</span>
            <span class="n">delegate_data</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">key_hash_data</span> <span class="o">+</span> <span class="n">delegate_data</span>  <span class="c1">#  Concatenating</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KeySpecParams&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize bytes into a KeySpecParams instance using field-based encoding.&quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">key_hash</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">delegate</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>  <span class="c1">#  Process all fields</span>
            <span class="n">field_number</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1">#  Read the field number</span>
            <span class="k">if</span> <span class="n">field_number</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1">#  Key Hash</span>
                <span class="n">key_hash</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">field_number</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1">#  Delegate (if present)</span>
                <span class="n">delegate</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">key_hash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot; Missing key_hash in KeySpecParams deserialization!&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">key_hash</span><span class="o">=</span><span class="n">key_hash</span><span class="p">,</span> <span class="n">delegate</span><span class="o">=</span><span class="n">delegate</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeySpecParams.marshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal</span><span class="p">()</span></code>

<a href="#accumulate.models.key_management.KeySpecParams.marshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the KeySpecParams to bytes correctly.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize the KeySpecParams to bytes correctly.&quot;&quot;&quot;</span>
    <span class="n">key_hash_data</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mh">0x20</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_hash</span><span class="p">))</span>  <span class="c1">#  keyHash encoding with `0x20`</span>

    <span class="n">delegate_data</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span><span class="p">:</span>
        <span class="n">delegate_data</span> <span class="o">=</span> <span class="n">field_marshal_binary</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegate</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">key_hash_data</span> <span class="o">+</span> <span class="n">delegate_data</span>  <span class="c1">#  Concatenating</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_management.KeySpecParams.unmarshal" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.key_management.KeySpecParams.unmarshal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize bytes into a KeySpecParams instance using field-based encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KeySpecParams&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize bytes into a KeySpecParams instance using field-based encoding.&quot;&quot;&quot;</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">key_hash</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">delegate</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">while</span> <span class="n">reader</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>  <span class="c1">#  Process all fields</span>
        <span class="n">field_number</span> <span class="o">=</span> <span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>  <span class="c1">#  Read the field number</span>
        <span class="k">if</span> <span class="n">field_number</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1">#  Key Hash</span>
            <span class="n">key_hash</span> <span class="o">=</span> <span class="n">unmarshal_bytes</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_number</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1">#  Delegate (if present)</span>
            <span class="n">delegate</span> <span class="o">=</span> <span class="n">unmarshal_string</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">key_hash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot; Missing key_hash in KeySpecParams deserialization!&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">key_hash</span><span class="o">=</span><span class="n">key_hash</span><span class="p">,</span> <span class="n">delegate</span><span class="o">=</span><span class="n">delegate</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.RemoveKeyOperation" class="doc doc-heading">
            <code>RemoveKeyOperation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.RemoveKeyOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an operation to remove a key from a key page.</p>
<p>:param entry: The key specification to remove.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RemoveKeyOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to remove a key from a key page.</span>

<span class="sd">    :param entry: The key specification to remove.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entry</span><span class="p">:</span> <span class="n">KeySpec</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.SetRejectThresholdKeyPageOperation" class="doc doc-heading">
            <code>SetRejectThresholdKeyPageOperation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.SetRejectThresholdKeyPageOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an operation to set the rejection threshold for a key page.</p>
<p>:param threshold: The number of signatures required to reject.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SetRejectThresholdKeyPageOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to set the rejection threshold for a key page.</span>

<span class="sd">    :param threshold: The number of signatures required to reject.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.SetResponseThresholdKeyPageOperation" class="doc doc-heading">
            <code>SetResponseThresholdKeyPageOperation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.SetResponseThresholdKeyPageOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an operation to set the response threshold for a key page.</p>
<p>:param threshold: The number of signatures required for a response.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SetResponseThresholdKeyPageOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to set the response threshold for a key page.</span>

<span class="sd">    :param threshold: The number of signatures required for a response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.SetThresholdKeyPageOperation" class="doc doc-heading">
            <code>SetThresholdKeyPageOperation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.SetThresholdKeyPageOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an operation to set the signature threshold for a key page.</p>
<p>:param threshold: The required number of signatures.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SetThresholdKeyPageOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to set the signature threshold for a key page.</span>

<span class="sd">    :param threshold: The required number of signatures.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.UpdateAllowedKeyPageOperation" class="doc doc-heading">
            <code>UpdateAllowedKeyPageOperation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.UpdateAllowedKeyPageOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an operation to update the allowed or denied transactions for a key page.</p>
<p>:param allow: List of allowed transaction types.
:param deny: List of denied transaction types.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UpdateAllowedKeyPageOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to update the allowed or denied transactions for a key page.</span>

<span class="sd">    :param allow: List of allowed transaction types.</span>
<span class="sd">    :param deny: List of denied transaction types.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allow</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">deny</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_management.UpdateKeyOperation" class="doc doc-heading">
            <code>UpdateKeyOperation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.key_management.UpdateKeyOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents an operation to update a key in a key page.</p>
<p>:param old_entry: The existing key specification to update.
:param new_entry: The new key specification to replace the old one.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_management.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UpdateKeyOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an operation to update a key in a key page.</span>

<span class="sd">    :param old_entry: The existing key specification to update.</span>
<span class="sd">    :param new_entry: The new key specification to replace the old one.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">old_entry</span><span class="p">:</span> <span class="n">KeySpec</span>
    <span class="n">new_entry</span><span class="p">:</span> <span class="n">KeySpec</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.key_signature" class="doc doc-heading">
            <code>key_signature</code>


<a href="#accumulate.models.key_signature" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.key_signature.KeySignature" class="doc doc-heading">
            <code>KeySignature</code>


<a href="#accumulate.models.key_signature.KeySignature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class to represent a cryptographic signature.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\key_signature.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">KeySignature</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract base class to represent a cryptographic signature.&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the signature bytes.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the hash of the public key.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the public key bytes.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_signer_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the version of the signer.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the timestamp of the signature.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_signature.KeySignature.get_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.models.key_signature.KeySignature.get_public_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the public key bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_signature.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the public key bytes.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_signature.KeySignature.get_public_key_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key_hash</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.models.key_signature.KeySignature.get_public_key_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the hash of the public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_signature.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the hash of the public key.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_signature.KeySignature.get_signature" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_signature</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.models.key_signature.KeySignature.get_signature" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the signature bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_signature.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the signature bytes.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_signature.KeySignature.get_signer_version" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_signer_version</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.models.key_signature.KeySignature.get_signer_version" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the version of the signer.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_signature.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_signer_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the version of the signer.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.key_signature.KeySignature.get_timestamp" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_timestamp</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.models.key_signature.KeySignature.get_timestamp" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the timestamp of the signature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\key_signature.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the timestamp of the signature.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.node_info" class="doc doc-heading">
            <code>node_info</code>


<a href="#accumulate.models.node_info" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.node_info.NodeInfo" class="doc doc-heading">
            <code>NodeInfo</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.node_info.NodeInfo" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents information about a network node.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\node_info.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NodeInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents information about a network node.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">peer_id</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># node&#39;s unique ID</span>
    <span class="n">network</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># name of the network (e.g., &quot;mainnet&quot; or &quot;testnet&quot;)</span>
    <span class="n">services</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ServiceAddress</span><span class="p">]</span>  <span class="c1"># services the node provides</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># software version of the node</span>
    <span class="n">commit</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># commit hash of the software version</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NodeInfo&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize a dictionary into a NodeInfo object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">peer_id</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peer_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">network</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;network&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">services</span><span class="o">=</span><span class="p">[</span><span class="n">ServiceAddress</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">svc</span><span class="p">)</span> <span class="k">for</span> <span class="n">svc</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;services&quot;</span><span class="p">,</span> <span class="p">[])],</span>
            <span class="n">version</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">commit</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commit&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize a NodeInfo object into a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;peer_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">peer_id</span><span class="p">,</span>
            <span class="s2">&quot;network&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">,</span>
            <span class="s2">&quot;services&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">service</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">service</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">services</span><span class="p">],</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="s2">&quot;commit&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">commit</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.node_info.NodeInfo.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.node_info.NodeInfo.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a dictionary into a NodeInfo object.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\node_info.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NodeInfo&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize a dictionary into a NodeInfo object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">peer_id</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peer_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">network</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;network&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">services</span><span class="o">=</span><span class="p">[</span><span class="n">ServiceAddress</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">svc</span><span class="p">)</span> <span class="k">for</span> <span class="n">svc</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;services&quot;</span><span class="p">,</span> <span class="p">[])],</span>
        <span class="n">version</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">commit</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commit&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.node_info.NodeInfo.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.node_info.NodeInfo.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize a NodeInfo object into a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\node_info.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize a NodeInfo object into a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;peer_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">peer_id</span><span class="p">,</span>
        <span class="s2">&quot;network&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">,</span>
        <span class="s2">&quot;services&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">service</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">service</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">services</span><span class="p">],</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
        <span class="s2">&quot;commit&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">commit</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.options" class="doc doc-heading">
            <code>options</code>


<a href="#accumulate.models.options" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.options.FaucetOptions" class="doc doc-heading">
            <code>FaucetOptions</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.options.FaucetOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Options for requesting tokens from the faucet.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\options.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FaucetOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Options for requesting tokens from the faucet.&quot;&quot;&quot;</span>
    <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Token URL</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.options.RangeOptions" class="doc doc-heading">
            <code>RangeOptions</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.options.RangeOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Options for querying ranges.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\options.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RangeOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Options for querying ranges.&quot;&quot;&quot;</span>
    <span class="n">start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Starting index</span>
    <span class="n">count</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Number of results to return</span>
    <span class="n">expand</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Request expanded results</span>
    <span class="n">from_end</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Query from the end</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert RangeOptions to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
            <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">,</span>
            <span class="s2">&quot;from_end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_end</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.options.RangeOptions.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.options.RangeOptions.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert RangeOptions to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\options.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert RangeOptions to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
        <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">,</span>
        <span class="s2">&quot;from_end&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_end</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.options.ReceiptOptions" class="doc doc-heading">
            <code>ReceiptOptions</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.options.ReceiptOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Options for querying receipts.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\options.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ReceiptOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Options for querying receipts.&quot;&quot;&quot;</span>
    <span class="n">for_any</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Query for any receipt</span>
    <span class="n">for_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Query for receipts at a specific height</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert ReceiptOptions to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;for_any&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_any</span><span class="p">,</span>
            <span class="s2">&quot;for_height&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_height</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the receipt options.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_any</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.options.ReceiptOptions.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.options.ReceiptOptions.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the receipt options.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\options.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the receipt options.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_any</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.options.ReceiptOptions.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.options.ReceiptOptions.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert ReceiptOptions to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\options.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert ReceiptOptions to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;for_any&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_any</span><span class="p">,</span>
        <span class="s2">&quot;for_height&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_height</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.options.SubmitOptions" class="doc doc-heading">
            <code>SubmitOptions</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.options.SubmitOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Options for submitting transactions.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\options.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SubmitOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Options for submitting transactions.&quot;&quot;&quot;</span>
    <span class="n">verify</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Verify the envelope before submitting</span>
    <span class="n">wait</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Wait for inclusion into a block or rejection</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.options.SubscribeOptions" class="doc doc-heading">
            <code>SubscribeOptions</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.options.SubscribeOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Options for subscribing to events.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\options.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SubscribeOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Options for subscribing to events.&quot;&quot;&quot;</span>
    <span class="n">partition</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Partition name</span>
    <span class="n">account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Account URL</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.options.ValidateOptions" class="doc doc-heading">
            <code>ValidateOptions</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.options.ValidateOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Options for validating transactions.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\options.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ValidateOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Options for validating transactions.&quot;&quot;&quot;</span>
    <span class="n">full</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Fully validate signatures and transactions</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.protocol" class="doc doc-heading">
            <code>protocol</code>


<a href="#accumulate.models.protocol" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.AccountAuthOperation" class="doc doc-heading">
            <code>AccountAuthOperation</code>


<a href="#accumulate.models.protocol.AccountAuthOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for account authorization operations.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccountAuthOperation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for account authorization operations.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authority</span> <span class="o">=</span> <span class="n">authority</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.AccountWithTokens" class="doc doc-heading">
            <code>AccountWithTokens</code>


<a href="#accumulate.models.protocol.AccountWithTokens" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Interface for accounts that manage tokens.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AccountWithTokens</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface for accounts that manage tokens.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">balance</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">,</span> <span class="n">token_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_url</span> <span class="o">=</span> <span class="n">token_url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">token_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">credit_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="n">amount</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">can_debit_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">&gt;=</span> <span class="n">amount</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">debit_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_debit_tokens</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">amount</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_token_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_url</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.AddAccountAuthorityOperation" class="doc doc-heading">
            <code>AddAccountAuthorityOperation</code>


<a href="#accumulate.models.protocol.AddAccountAuthorityOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.protocol.AccountAuthOperation" href="#accumulate.models.protocol.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Add a new authority to an account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AddAccountAuthorityOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a new authority to an account.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.AllowedTransactions" class="doc doc-heading">
            <code>AllowedTransactions</code>


<a href="#accumulate.models.protocol.AllowedTransactions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Bit mask for allowed transactions.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AllowedTransactions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Bit mask for allowed transactions.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bit</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the bit to 1.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bit</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bit</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the bit (set to 0).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bit</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bit</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the bit is set.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bit</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List all set bits.&quot;&quot;&quot;</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="n">bit_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bit_index</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span>
            <span class="n">bit_index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">bits</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_enum_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the underlying integer value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_enum_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the value from an integer.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the object to JSON.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unpack</span><span class="p">())</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AllowedTransactions&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize from JSON.&quot;&quot;&quot;</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="n">bits</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.clear" class="doc doc-heading">
            <code class=" language-python"><span class="n">clear</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.AllowedTransactions.clear" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Clear the bit (set to 0).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bit</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear the bit (set to 0).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bit</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.from_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.protocol.AllowedTransactions.from_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize from JSON.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AllowedTransactions&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize from JSON.&quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="n">bits</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.get_enum_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_enum_value</span><span class="p">()</span></code>

<a href="#accumulate.models.protocol.AllowedTransactions.get_enum_value" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the underlying integer value.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_enum_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the underlying integer value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.is_set" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_set</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.AllowedTransactions.is_set" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the bit is set.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bit</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the bit is set.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bit</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.set" class="doc doc-heading">
            <code class=" language-python"><span class="nb">set</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.AllowedTransactions.set" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the bit to 1.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bit</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the bit to 1.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bit</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.set_enum_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_enum_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.AllowedTransactions.set_enum_value" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the value from an integer.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_enum_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the value from an integer.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.to_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_json</span><span class="p">()</span></code>

<a href="#accumulate.models.protocol.AllowedTransactions.to_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the object to JSON.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize the object to JSON.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unpack</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.AllowedTransactions.unpack" class="doc doc-heading">
            <code class=" language-python"><span class="n">unpack</span><span class="p">()</span></code>

<a href="#accumulate.models.protocol.AllowedTransactions.unpack" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>List all set bits.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List all set bits.&quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
    <span class="n">bit_index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bit_index</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span>
        <span class="n">bit_index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">bits</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.DisableAccountAuthOperation" class="doc doc-heading">
            <code>DisableAccountAuthOperation</code>


<a href="#accumulate.models.protocol.DisableAccountAuthOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.protocol.AccountAuthOperation" href="#accumulate.models.protocol.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Disable authorization for an account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DisableAccountAuthOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Disable authorization for an account.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.EnableAccountAuthOperation" class="doc doc-heading">
            <code>EnableAccountAuthOperation</code>


<a href="#accumulate.models.protocol.EnableAccountAuthOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.protocol.AccountAuthOperation" href="#accumulate.models.protocol.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Enable authorization for an account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EnableAccountAuthOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enable authorization for an account.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.LiteTokenAccount" class="doc doc-heading">
            <code>LiteTokenAccount</code>


<a href="#accumulate.models.protocol.LiteTokenAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.protocol.AccountWithTokens" href="#accumulate.models.protocol.AccountWithTokens">AccountWithTokens</a></code></p>


        <p>Represents a lite token account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LiteTokenAccount</span><span class="p">(</span><span class="n">AccountWithTokens</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a lite token account.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.Receipt" class="doc doc-heading">
            <code>Receipt</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.protocol.Receipt" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a receipt with block metadata.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Receipt</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a receipt with block metadata.&quot;&quot;&quot;</span>
    <span class="n">local_block</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">local_block_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># ISO 8601 datetime string</span>
    <span class="n">major_block</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the receipt to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;local_block&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">local_block</span><span class="p">,</span>
            <span class="s2">&quot;local_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">local_block_time</span><span class="p">,</span>
            <span class="s2">&quot;major_block&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_block</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Receipt&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a receipt from a dictionary.&quot;&quot;&quot;</span>
        <span class="n">local_block_time</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;local_block_time&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">local_block_time</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_iso8601</span><span class="p">(</span><span class="n">local_block_time</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">local_block</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;local_block&quot;</span><span class="p">),</span>
            <span class="n">local_block_time</span><span class="o">=</span><span class="n">local_block_time</span><span class="p">,</span>
            <span class="n">major_block</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;major_block&quot;</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_iso8601</span><span class="p">(</span><span class="n">date_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the string is in ISO 8601 format.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">date_str</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid ISO 8601 datetime: </span><span class="si">{</span><span class="n">date_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.Receipt._validate_iso8601" class="doc doc-heading">
            <code class=" language-python"><span class="n">_validate_iso8601</span><span class="p">(</span><span class="n">date_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.protocol.Receipt._validate_iso8601" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the string is in ISO 8601 format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_validate_iso8601</span><span class="p">(</span><span class="n">date_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the string is in ISO 8601 format.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">date_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid ISO 8601 datetime: </span><span class="si">{</span><span class="n">date_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.Receipt.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.protocol.Receipt.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a receipt from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Receipt&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a receipt from a dictionary.&quot;&quot;&quot;</span>
    <span class="n">local_block_time</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;local_block_time&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">local_block_time</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_iso8601</span><span class="p">(</span><span class="n">local_block_time</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">local_block</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;local_block&quot;</span><span class="p">),</span>
        <span class="n">local_block_time</span><span class="o">=</span><span class="n">local_block_time</span><span class="p">,</span>
        <span class="n">major_block</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;major_block&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.protocol.Receipt.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.protocol.Receipt.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the receipt to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the receipt to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;local_block&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">local_block</span><span class="p">,</span>
        <span class="s2">&quot;local_block_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">local_block_time</span><span class="p">,</span>
        <span class="s2">&quot;major_block&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">major_block</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.RemoveAccountAuthorityOperation" class="doc doc-heading">
            <code>RemoveAccountAuthorityOperation</code>


<a href="#accumulate.models.protocol.RemoveAccountAuthorityOperation" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.protocol.AccountAuthOperation" href="#accumulate.models.protocol.AccountAuthOperation">AccountAuthOperation</a></code></p>


        <p>Remove an authority from an account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RemoveAccountAuthorityOperation</span><span class="p">(</span><span class="n">AccountAuthOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove an authority from an account.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.TokenAccount" class="doc doc-heading">
            <code>TokenAccount</code>


<a href="#accumulate.models.protocol.TokenAccount" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.protocol.AccountWithTokens" href="#accumulate.models.protocol.AccountWithTokens">AccountWithTokens</a></code></p>


        <p>Represents a standard token account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TokenAccount</span><span class="p">(</span><span class="n">AccountWithTokens</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a standard token account.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.protocol.TokenIssuer" class="doc doc-heading">
            <code>TokenIssuer</code>


<a href="#accumulate.models.protocol.TokenIssuer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a token issuer.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TokenIssuer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a token issuer.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">issued</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">,</span> <span class="n">supply_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Decimal</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">issued</span> <span class="o">=</span> <span class="n">issued</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supply_limit</span> <span class="o">=</span> <span class="n">supply_limit</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">issue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">issued</span> <span class="o">+=</span> <span class="n">amount</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">issued</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_limit</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.models.protocol.acme_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">acme_url</span><span class="p">()</span></code>

<a href="#accumulate.models.protocol.acme_url" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the URL for the ACME token.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">acme_url</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the URL for the ACME token.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">ACME</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.protocol.lite_data_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">lite_data_address</span><span class="p">(</span><span class="n">chain_id</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.lite_data_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generates a lite data address from a chain ID.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">lite_data_address</span><span class="p">(</span><span class="n">chain_id</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a lite data address from a chain ID.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">chain_id</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;chain_id must be 32 bytes long&quot;</span><span class="p">)</span>
    <span class="n">key_str</span> <span class="o">=</span> <span class="n">chain_id</span><span class="o">.</span><span class="n">hex</span><span class="p">()[:</span><span class="mi">32</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">key_str</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.protocol.lite_token_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">lite_token_address</span><span class="p">(</span><span class="n">pub_key</span><span class="p">,</span> <span class="n">token_url_str</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.lite_token_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generates a lite token account URL from a public key and token URL.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">lite_token_address</span><span class="p">(</span><span class="n">pub_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">token_url_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a lite token account URL from a public key and token URL.&quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempting to generate lite token address for token URL: </span><span class="si">{</span><span class="n">token_url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Normalizing token URL: </span><span class="si">{</span><span class="n">token_url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Normalize and validate the token URL</span>
        <span class="n">token_url_str</span> <span class="o">=</span> <span class="n">normalize_acc_url</span><span class="p">(</span><span class="n">token_url_str</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Normalized token URL: </span><span class="si">{</span><span class="n">token_url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">token_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">token_url_str</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed token URL: </span><span class="si">{</span><span class="n">token_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Validate based on token URL type</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Validating token URL. Authority: </span><span class="si">{</span><span class="n">token_url</span><span class="o">.</span><span class="n">authority</span><span class="si">}</span><span class="s2">, Path: </span><span class="si">{</span><span class="n">token_url</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">token_url</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-fA-F0-9]{40,64}$&quot;</span><span class="p">,</span> <span class="n">token_url</span><span class="o">.</span><span class="n">authority</span><span class="p">):</span>
            <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">token_url</span><span class="o">.</span><span class="n">authority</span><span class="p">:</span>  <span class="c1"># Check if it&#39;s a valid ADI</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid token URL: Missing path or invalid identity format.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">token_url</span><span class="o">.</span><span class="n">query</span> <span class="ow">or</span> <span class="n">token_url</span><span class="o">.</span><span class="n">fragment</span> <span class="ow">or</span> <span class="n">token_url</span><span class="o">.</span><span class="n">user_info</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Token URL cannot include query, fragment, or user info.&quot;</span><span class="p">)</span>

        <span class="c1"># Generate authority</span>
        <span class="n">key_hash</span> <span class="o">=</span> <span class="n">sha256</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()[:</span><span class="mi">40</span><span class="p">]</span>
        <span class="n">checksum</span> <span class="o">=</span> <span class="n">sha256</span><span class="p">(</span><span class="n">key_hash</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()[</span><span class="o">-</span><span class="mi">8</span><span class="p">:]</span>
        <span class="n">authority</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key_hash</span><span class="si">}{</span><span class="n">checksum</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Generated authority: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">token_url</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to generate lite token address: </span><span class="si">{</span><span class="n">ve</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid token URL &#39;</span><span class="si">{</span><span class="n">token_url_str</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">ve</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">ve</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.protocol.normalize_acc_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">normalize_acc_url</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.normalize_acc_url" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Ensures a URL starts with the 'acc://' prefix.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">normalize_acc_url</span><span class="p">(</span><span class="n">url_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensures a URL starts with the &#39;acc://&#39; prefix.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">url_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.protocol.parse_lite_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_lite_address</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.models.protocol.parse_lite_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parses and validates a lite address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_lite_address</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parses and validates a lite address.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Too short&quot;</span><span class="p">)</span>
        <span class="n">byte_value</span><span class="p">,</span> <span class="n">byte_check</span> <span class="o">=</span> <span class="n">b</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">checksum</span> <span class="o">=</span> <span class="n">sha256</span><span class="p">(</span><span class="n">byte_value</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">checksum</span> <span class="o">!=</span> <span class="n">byte_check</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid checksum&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">byte_value</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error parsing lite address: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.protocol.unknown_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">unknown_url</span><span class="p">()</span></code>

<a href="#accumulate.models.protocol.unknown_url" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the URL for unknown entities.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\protocol.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unknown_url</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the URL for unknown entities.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="n">UNKNOWN</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.responses" class="doc doc-heading">
            <code>responses</code>


<a href="#accumulate.models.responses" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.responses.SubmissionResponse" class="doc doc-heading">
            <code>SubmissionResponse</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.responses.SubmissionResponse" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents the response for a transaction submission.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\responses.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SubmissionResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents the response for a transaction submission.&quot;&quot;&quot;</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TransactionStatus</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Receipt</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Added Receipt integration</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the response to a dictionary.&quot;&quot;&quot;</span>
        <span class="n">serialized_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">success</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
            <span class="s2">&quot;receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receipt</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Serialize Receipt</span>
        <span class="p">}</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Serialized SubmissionResponse: </span><span class="si">{</span><span class="n">serialized_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">serialized_data</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SubmissionResponse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize the response from a dictionary.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserializing SubmissionResponse from data: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">TransactionStatus</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserialized status: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">None</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">receipt</span> <span class="o">=</span> <span class="n">Receipt</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;receipt&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;receipt&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserialized receipt: </span><span class="si">{</span><span class="n">receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">receipt</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">None</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">success</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="n">message</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">),</span>
            <span class="n">receipt</span><span class="o">=</span><span class="n">receipt</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Final SubmissionResponse object: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.responses.SubmissionResponse.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.responses.SubmissionResponse.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize the response from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\responses.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SubmissionResponse&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize the response from a dictionary.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserializing SubmissionResponse from data: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">TransactionStatus</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserialized status: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">None</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">receipt</span> <span class="o">=</span> <span class="n">Receipt</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;receipt&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;receipt&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserialized receipt: </span><span class="si">{</span><span class="n">receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">receipt</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">None</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">success</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">message</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">),</span>
        <span class="n">receipt</span><span class="o">=</span><span class="n">receipt</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Final SubmissionResponse object: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.responses.SubmissionResponse.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.responses.SubmissionResponse.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the response to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\responses.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize the response to a dictionary.&quot;&quot;&quot;</span>
    <span class="n">serialized_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">success</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
        <span class="s2">&quot;receipt&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">receipt</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receipt</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Serialize Receipt</span>
    <span class="p">}</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Serialized SubmissionResponse: </span><span class="si">{</span><span class="n">serialized_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">serialized_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.responses.TransactionResultSet" class="doc doc-heading">
            <code>TransactionResultSet</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.responses.TransactionResultSet" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a set of transaction results returned from a query.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\responses.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TransactionResultSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a set of transaction results returned from a query.&quot;&quot;&quot;</span>
    <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TransactionStatus</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">TransactionStatus</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a transaction status to the results.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Adding result: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the result set to a dictionary representation.&quot;&quot;&quot;</span>
        <span class="n">serialized_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">]}</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Serialized TransactionResultSet: </span><span class="si">{</span><span class="n">serialized_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">serialized_data</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionResultSet&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a TransactionResultSet from a dictionary.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserializing TransactionResultSet from data: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TransactionStatus</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserialized result </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">result_set</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Final TransactionResultSet object: </span><span class="si">{</span><span class="n">result_set</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_set</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.responses.TransactionResultSet.add_result" class="doc doc-heading">
            <code class=" language-python"><span class="n">add_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span></code>

<a href="#accumulate.models.responses.TransactionResultSet.add_result" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add a transaction status to the results.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\responses.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">TransactionStatus</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a transaction status to the results.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Adding result: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.responses.TransactionResultSet.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.responses.TransactionResultSet.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a TransactionResultSet from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\responses.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionResultSet&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a TransactionResultSet from a dictionary.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserializing TransactionResultSet from data: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">TransactionStatus</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Deserialized result </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">result_set</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Final TransactionResultSet object: </span><span class="si">{</span><span class="n">result_set</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result_set</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.responses.TransactionResultSet.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.responses.TransactionResultSet.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the result set to a dictionary representation.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\responses.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the result set to a dictionary representation.&quot;&quot;&quot;</span>
    <span class="n">serialized_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">]}</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] Serialized TransactionResultSet: </span><span class="si">{</span><span class="n">serialized_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">serialized_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.search" class="doc doc-heading">
            <code>search</code>


<a href="#accumulate.models.search" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.search.AnchorSearchQuery" class="doc doc-heading">
            <code>AnchorSearchQuery</code>


<a href="#accumulate.models.search.AnchorSearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.search.SearchQuery" href="#accumulate.models.search.SearchQuery">SearchQuery</a></code></p>


        <p>Search for an anchor in an account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\search.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AnchorSearchQuery</span><span class="p">(</span><span class="n">SearchQuery</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for an anchor in an account.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">include_receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            anchor (Union[bytes, str]): The anchor value (hash) to search for.</span>
<span class="sd">            include_receipt (Optional[bool]): Whether to include a receipt in the response.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">anchor_value</span> <span class="o">=</span> <span class="n">anchor</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="n">anchor</span>
        <span class="n">extra_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;include_receipt&quot;</span><span class="p">:</span> <span class="n">include_receipt</span><span class="p">}</span> <span class="k">if</span> <span class="n">include_receipt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">ANCHOR_SEARCH</span><span class="p">,</span> <span class="n">anchor_value</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.search.AnchorSearchQuery.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">include_receipt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.search.AnchorSearchQuery.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>anchor</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="bytes">bytes</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The anchor value (hash) to search for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_receipt</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include a receipt in the response.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\search.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">include_receipt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        anchor (Union[bytes, str]): The anchor value (hash) to search for.</span>
<span class="sd">        include_receipt (Optional[bool]): Whether to include a receipt in the response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">anchor_value</span> <span class="o">=</span> <span class="n">anchor</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="n">anchor</span>
    <span class="n">extra_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;include_receipt&quot;</span><span class="p">:</span> <span class="n">include_receipt</span><span class="p">}</span> <span class="k">if</span> <span class="n">include_receipt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">ANCHOR_SEARCH</span><span class="p">,</span> <span class="n">anchor_value</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.search.DelegateSearchQuery" class="doc doc-heading">
            <code>DelegateSearchQuery</code>


<a href="#accumulate.models.search.DelegateSearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.search.SearchQuery" href="#accumulate.models.search.SearchQuery">SearchQuery</a></code></p>


        <p>Search for a delegate in an account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\search.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DelegateSearchQuery</span><span class="p">(</span><span class="n">SearchQuery</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for a delegate in an account.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delegate_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delegate_url (str): The URL of the delegate being searched.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DELEGATE_SEARCH</span><span class="p">,</span> <span class="n">delegate_url</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.search.DelegateSearchQuery.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">delegate_url</span><span class="p">)</span></code>

<a href="#accumulate.models.search.DelegateSearchQuery.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>delegate_url</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the delegate being searched.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\search.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delegate_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        delegate_url (str): The URL of the delegate being searched.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DELEGATE_SEARCH</span><span class="p">,</span> <span class="n">delegate_url</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.search.PublicKeySearchQuery" class="doc doc-heading">
            <code>PublicKeySearchQuery</code>


<a href="#accumulate.models.search.PublicKeySearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.search.SearchQuery" href="#accumulate.models.search.SearchQuery">SearchQuery</a></code></p>


        <p>Search for a public key in an account.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\search.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PublicKeySearchQuery</span><span class="p">(</span><span class="n">SearchQuery</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for a public key in an account.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            public_key (str): The public key, address, or public key hash.</span>
<span class="sd">            key_type (Optional[str]): The type of public key (e.g., &#39;ed25519&#39;, &#39;btc&#39;, &#39;eth&#39;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">extra_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">key_type</span><span class="p">}</span> <span class="k">if</span> <span class="n">key_type</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">PUBLIC_KEY_SEARCH</span><span class="p">,</span> <span class="n">public_key</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.search.PublicKeySearchQuery.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">key_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.search.PublicKeySearchQuery.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>public_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The public key, address, or public key hash.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key_type</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of public key (e.g., 'ed25519', 'btc', 'eth').</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\search.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        public_key (str): The public key, address, or public key hash.</span>
<span class="sd">        key_type (Optional[str]): The type of public key (e.g., &#39;ed25519&#39;, &#39;btc&#39;, &#39;eth&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">extra_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">key_type</span><span class="p">}</span> <span class="k">if</span> <span class="n">key_type</span> <span class="k">else</span> <span class="p">{}</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QueryType</span><span class="o">.</span><span class="n">PUBLIC_KEY_SEARCH</span><span class="p">,</span> <span class="n">public_key</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.search.SearchQuery" class="doc doc-heading">
            <code>SearchQuery</code>


<a href="#accumulate.models.search.SearchQuery" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.queries.Query" href="#accumulate.models.queries.Query">Query</a></code></p>


        <p>Base class for all search queries (Anchor, Public Key, Delegate).</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\search.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SearchQuery</span><span class="p">(</span><span class="n">Query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all search queries (Anchor, Public Key, Delegate).&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_type</span><span class="p">:</span> <span class="n">QueryType</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            query_type (QueryType): The type of search query (anchor, publicKey, delegate).</span>
<span class="sd">            value (str): The value being searched (hash, public key, or delegate URL).</span>
<span class="sd">            extra_params (Optional[Dict[str, Any]]): Additional query parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">query_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_params</span> <span class="o">=</span> <span class="n">extra_params</span> <span class="ow">or</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the search query.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> search requires a valid value.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the search query into a dictionary that can be used with `client.search()`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="s2">&quot;extra_params&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra_params</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.search.SearchQuery.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">query_type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">extra_params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.search.SearchQuery.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="accumulate.models.enums.QueryType" href="#accumulate.models.enums.QueryType">QueryType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of search query (anchor, publicKey, delegate).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value being searched (hash, public key, or delegate URL).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>extra_params</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional query parameters.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\search.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_type</span><span class="p">:</span> <span class="n">QueryType</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extra_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        query_type (QueryType): The type of search query (anchor, publicKey, delegate).</span>
<span class="sd">        value (str): The value being searched (hash, public key, or delegate URL).</span>
<span class="sd">        extra_params (Optional[Dict[str, Any]]): Additional query parameters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">query_type</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extra_params</span> <span class="o">=</span> <span class="n">extra_params</span> <span class="ow">or</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.search.SearchQuery.is_valid" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid</span><span class="p">()</span></code>

<a href="#accumulate.models.search.SearchQuery.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the search query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\search.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the search query.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AccumulateError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> search requires a valid value.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.search.SearchQuery.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.search.SearchQuery.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the search query into a dictionary that can be used with <code>client.search()</code>.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\search.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the search query into a dictionary that can be used with `client.search()`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="s2">&quot;extra_params&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra_params</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.service" class="doc doc-heading">
            <code>service</code>


<a href="#accumulate.models.service" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.service.FindServiceOptions" class="doc doc-heading">
            <code>FindServiceOptions</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.service.FindServiceOptions" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents options for finding a service in the Accumulate network.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FindServiceOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents options for finding a service in the Accumulate network.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">network</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># network name</span>
    <span class="n">service</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ServiceAddress</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># service address to search for</span>
    <span class="n">known</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Restrict results to known peers</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">timedelta</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1">#  timeout for querying the DHT</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize a FindServiceOptions object into a dictionary.</span>
<span class="sd">        Removes `timeout` if it is None to prevent JSON-RPC errors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;network&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">,</span>
            <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">service</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;known&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">known</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># Only include timeout if it is set</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">params</span>


    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FindServiceOptions&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize a dictionary into a FindServiceOptions object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">network</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;network&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">service</span><span class="o">=</span><span class="n">ServiceAddress</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;service&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="s2">&quot;service&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">known</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;known&quot;</span><span class="p">),</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="s2">&quot;timeout&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.FindServiceOptions.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.service.FindServiceOptions.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a dictionary into a FindServiceOptions object.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FindServiceOptions&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize a dictionary into a FindServiceOptions object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">network</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;network&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">service</span><span class="o">=</span><span class="n">ServiceAddress</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;service&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="s2">&quot;service&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">known</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;known&quot;</span><span class="p">),</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="s2">&quot;timeout&quot;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.FindServiceOptions.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.service.FindServiceOptions.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize a FindServiceOptions object into a dictionary.
Removes <code>timeout</code> if it is None to prevent JSON-RPC errors.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize a FindServiceOptions object into a dictionary.</span>
<span class="sd">    Removes `timeout` if it is None to prevent JSON-RPC errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;network&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">,</span>
        <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">service</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;known&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">known</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># Only include timeout if it is set</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">params</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.service.FindServiceResult" class="doc doc-heading">
            <code>FindServiceResult</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.service.FindServiceResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents the result of a service search in the Accumulate network.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FindServiceResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the result of a service search in the Accumulate network.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">peer_id</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># unique ID of the peer providing the service</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># status of the known peer</span>
    <span class="n">addresses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># list of addresses associated with the service</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize a FindServiceResult object into a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;peer_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">peer_id</span><span class="p">,</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
            <span class="s2">&quot;addresses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">addresses</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FindServiceResult&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize a dictionary into a FindServiceResult object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">peer_id</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peer_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">status</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">addresses</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;addresses&quot;</span><span class="p">,</span> <span class="p">[]),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.FindServiceResult.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.service.FindServiceResult.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a dictionary into a FindServiceResult object.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FindServiceResult&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize a dictionary into a FindServiceResult object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">peer_id</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;peer_id&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">status</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">addresses</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;addresses&quot;</span><span class="p">,</span> <span class="p">[]),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.FindServiceResult.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.service.FindServiceResult.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize a FindServiceResult object into a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize a FindServiceResult object into a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;peer_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">peer_id</span><span class="p">,</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
        <span class="s2">&quot;addresses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">addresses</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.service.ServiceAddress" class="doc doc-heading">
            <code>ServiceAddress</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#accumulate.models.service.ServiceAddress" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a service address with type and argument.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\service.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ServiceAddress</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a service address with type and argument.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">service_type</span><span class="p">:</span> <span class="nb">int</span>  <span class="c1"># Type of the service, represented as an integer</span>
    <span class="n">argument</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optional argument for the service</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias for service_type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns {type}:{argument}, or {type} if the argument is empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argument</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument</span> <span class="k">else</span> <span class="n">base</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the object to a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="s2">&quot;argument&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument</span><span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ServiceAddress&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a ServiceAddress from a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ServiceAddress</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;argument&quot;</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parse_service_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ServiceAddress&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses a string into a ServiceAddress.</span>

<span class="sd">        :param address: A string representing the service address in the format {type}:{argument}.</span>
<span class="sd">        :return: A ServiceAddress instance.</span>
<span class="sd">        :raises ValueError: If the format is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span> <span class="ow">or</span> <span class="s2">&quot;:&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">address</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid service address: Missing &#39;:&#39; separator or empty string&quot;</span><span class="p">)</span>

        <span class="n">parts</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid service address: Missing type or argument&quot;</span><span class="p">)</span>

        <span class="n">service_type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span> <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">ServiceAddress</span><span class="p">(</span><span class="n">service_type</span><span class="o">=</span><span class="n">service_type</span><span class="p">,</span> <span class="n">argument</span><span class="o">=</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unpack_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simulates unpacking of an address string for its components.</span>

<span class="sd">        :param address: A string representing the service address.</span>
<span class="sd">        :return: A dictionary containing type and argument of the service address.</span>
<span class="sd">        :raises ValueError: If the address cannot be parsed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">service_address</span> <span class="o">=</span> <span class="n">ServiceAddress</span><span class="o">.</span><span class="n">parse_service_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">service_address</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="s2">&quot;argument&quot;</span><span class="p">:</span> <span class="n">service_address</span><span class="o">.</span><span class="n">argument</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse address: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="accumulate.models.service.ServiceAddress.type" class="doc doc-heading">
            <code class=" language-python"><span class="nb">type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#accumulate.models.service.ServiceAddress.type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Alias for service_type.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.ServiceAddress.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#accumulate.models.service.ServiceAddress.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Returns {type}:{argument}, or {type} if the argument is empty.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns {type}:{argument}, or {type} if the argument is empty.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">argument</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument</span> <span class="k">else</span> <span class="n">base</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.ServiceAddress.from_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.service.ServiceAddress.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a ServiceAddress from a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ServiceAddress&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a ServiceAddress from a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ServiceAddress</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;argument&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.ServiceAddress.parse_service_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_service_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.service.ServiceAddress.parse_service_address" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Parses a string into a ServiceAddress.</p>
<p>:param address: A string representing the service address in the format {type}:{argument}.
:return: A ServiceAddress instance.
:raises ValueError: If the format is invalid.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse_service_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ServiceAddress&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses a string into a ServiceAddress.</span>

<span class="sd">    :param address: A string representing the service address in the format {type}:{argument}.</span>
<span class="sd">    :return: A ServiceAddress instance.</span>
<span class="sd">    :raises ValueError: If the format is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span> <span class="ow">or</span> <span class="s2">&quot;:&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">address</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid service address: Missing &#39;:&#39; separator or empty string&quot;</span><span class="p">)</span>

    <span class="n">parts</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid service address: Missing type or argument&quot;</span><span class="p">)</span>

    <span class="n">service_type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span> <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">ServiceAddress</span><span class="p">(</span><span class="n">service_type</span><span class="o">=</span><span class="n">service_type</span><span class="p">,</span> <span class="n">argument</span><span class="o">=</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.ServiceAddress.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.service.ServiceAddress.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Converts the object to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the object to a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_type</span><span class="p">,</span> <span class="s2">&quot;argument&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.service.ServiceAddress.unpack_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">unpack_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.service.ServiceAddress.unpack_address" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Simulates unpacking of an address string for its components.</p>
<p>:param address: A string representing the service address.
:return: A dictionary containing type and argument of the service address.
:raises ValueError: If the address cannot be parsed.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\service.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unpack_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simulates unpacking of an address string for its components.</span>

<span class="sd">    :param address: A string representing the service address.</span>
<span class="sd">    :return: A dictionary containing type and argument of the service address.</span>
<span class="sd">    :raises ValueError: If the address cannot be parsed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">service_address</span> <span class="o">=</span> <span class="n">ServiceAddress</span><span class="o">.</span><span class="n">parse_service_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">service_address</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">&quot;argument&quot;</span><span class="p">:</span> <span class="n">service_address</span><span class="o">.</span><span class="n">argument</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse address: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.signatures" class="doc doc-heading">
            <code>signatures</code>


<a href="#accumulate.models.signatures" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.AuthoritySignature" class="doc doc-heading">
            <code>AuthoritySignature</code>


<a href="#accumulate.models.signatures.AuthoritySignature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AuthoritySignature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">vote</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">txid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;AuthoritySignature&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authority</span> <span class="o">=</span> <span class="n">authority</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vote</span> <span class="o">=</span> <span class="n">vote</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">txid</span> <span class="o">=</span> <span class="n">txid</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate hash for AuthoritySignature.&quot;&quot;&quot;</span>
        <span class="n">authority_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">)</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">)</span>
        <span class="n">authority_bytes</span> <span class="o">=</span> <span class="n">authority_str</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="n">vote_bytes</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vote</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vote</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

        <span class="n">combined</span> <span class="o">=</span> <span class="n">authority_bytes</span> <span class="o">+</span> <span class="n">vote_bytes</span>

        <span class="n">result_hash</span> <span class="o">=</span> <span class="n">do_sha256</span><span class="p">(</span><span class="n">combined</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_hash</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># TODO: Implement authority-specific verification</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.AuthoritySignature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.AuthoritySignature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculate hash for AuthoritySignature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate hash for AuthoritySignature.&quot;&quot;&quot;</span>
    <span class="n">authority_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">)</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">)</span>
    <span class="n">authority_bytes</span> <span class="o">=</span> <span class="n">authority_str</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">vote_bytes</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vote</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vote</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>

    <span class="n">combined</span> <span class="o">=</span> <span class="n">authority_bytes</span> <span class="o">+</span> <span class="n">vote_bytes</span>

    <span class="n">result_hash</span> <span class="o">=</span> <span class="n">do_sha256</span><span class="p">(</span><span class="n">combined</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result_hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.DelegatedSignature" class="doc doc-heading">
            <code>DelegatedSignature</code>


<a href="#accumulate.models.signatures.DelegatedSignature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DelegatedSignature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">delegator</span><span class="p">:</span> <span class="n">URL</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;DelegatedSignature&#39;</span><span class="p">,</span> <span class="n">signature</span><span class="o">.</span><span class="n">get_url</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegator</span> <span class="o">=</span> <span class="n">delegator</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate hash for DelegatedSignature.&quot;&quot;&quot;</span>
        <span class="n">delegator_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delegator</span><span class="p">)</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">)</span>
        <span class="n">base_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">hash</span><span class="p">()</span>
        <span class="n">delegator_bytes</span> <span class="o">=</span> <span class="n">delegator_str</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>

        <span class="n">combined</span> <span class="o">=</span> <span class="n">base_hash</span> <span class="o">+</span> <span class="n">delegator_bytes</span>

        <span class="n">result_hash</span> <span class="o">=</span> <span class="n">do_sha256</span><span class="p">(</span><span class="n">combined</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result_hash</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.DelegatedSignature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.DelegatedSignature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculate hash for DelegatedSignature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate hash for DelegatedSignature.&quot;&quot;&quot;</span>
    <span class="n">delegator_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delegator</span><span class="p">)</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">)</span>
    <span class="n">base_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">hash</span><span class="p">()</span>
    <span class="n">delegator_bytes</span> <span class="o">=</span> <span class="n">delegator_str</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>

    <span class="n">combined</span> <span class="o">=</span> <span class="n">base_hash</span> <span class="o">+</span> <span class="n">delegator_bytes</span>

    <span class="n">result_hash</span> <span class="o">=</span> <span class="n">do_sha256</span><span class="p">(</span><span class="n">combined</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result_hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.ECDSA_SHA256Signature" class="doc doc-heading">
            <code>ECDSA_SHA256Signature</code>


<a href="#accumulate.models.signatures.ECDSA_SHA256Signature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>


        <p>Represents an ECDSA SHA-256 signature.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ECDSA_SHA256Signature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an ECDSA SHA-256 signature.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;ECDSA_SHA256&#39;</span><span class="p">,</span> <span class="n">signer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">public_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the SHA-256 hash of the public key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verify the ECDSA SHA-256 signature for the provided message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">verifying_key</span> <span class="o">=</span> <span class="n">VerifyingKey</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="n">SECP256k1</span><span class="p">)</span>
            <span class="c1"># Use hashlib.sha256 directly as the hash function</span>
            <span class="k">return</span> <span class="n">verifying_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hashfunc</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Verification failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sign a message using ECDSA SHA-256 with the provided private key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">signing_key</span> <span class="o">=</span> <span class="n">SigningKey</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="n">SECP256k1</span><span class="p">)</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">signing_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">hashfunc</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
            <span class="k">return</span> <span class="n">signature</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signing failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ECDSA_SHA256Signature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.ECDSA_SHA256Signature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculate the SHA-256 hash of the public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the SHA-256 hash of the public key.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ECDSA_SHA256Signature.sign" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">private_key</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.ECDSA_SHA256Signature.sign" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign a message using ECDSA SHA-256 with the provided private key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sign a message using ECDSA SHA-256 with the provided private key.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">signing_key</span> <span class="o">=</span> <span class="n">SigningKey</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="n">SECP256k1</span><span class="p">)</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">signing_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">hashfunc</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="k">return</span> <span class="n">signature</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signing failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ECDSA_SHA256Signature.verify" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.ECDSA_SHA256Signature.verify" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify the ECDSA SHA-256 signature for the provided message.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verify the ECDSA SHA-256 signature for the provided message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">verifying_key</span> <span class="o">=</span> <span class="n">VerifyingKey</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="n">SECP256k1</span><span class="p">)</span>
        <span class="c1"># Use hashlib.sha256 directly as the hash function</span>
        <span class="k">return</span> <span class="n">verifying_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hashfunc</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Verification failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.ED25519Signature" class="doc doc-heading">
            <code>ED25519Signature</code>


<a href="#accumulate.models.signatures.ED25519Signature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ED25519Signature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">publicKey</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;ed25519&#39;</span><span class="p">,</span> <span class="n">signer</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">publicKey</span> <span class="o">=</span> <span class="n">publicKey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">)</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.hash_functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">hash_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transactionHash</span> <span class="o">=</span> <span class="n">hash_data</span><span class="p">(</span><span class="n">transaction_data</span><span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Follow JS hashing structure for ED25519.&quot;&quot;&quot;</span>
        <span class="n">sig_md_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">sig_md_hash</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">final_hash</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vk</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PublicKey</span><span class="o">.</span><span class="n">from_public_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">publicKey</span><span class="p">)</span>
            <span class="n">final_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>  <span class="c1"># Ensure message is hashed before verification</span>
            <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span> <span class="n">final_hash</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert ED25519 signature to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
            <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">publicKey</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
            <span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
            <span class="s2">&quot;signer&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="p">),</span>
            <span class="s2">&quot;signerVersion&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="s2">&quot;transactionHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">transactionHash</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ED25519Signature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.ED25519Signature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Follow JS hashing structure for ED25519.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Follow JS hashing structure for ED25519.&quot;&quot;&quot;</span>
    <span class="n">sig_md_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">sig_md_hash</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">final_hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ED25519Signature.to_dict" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.ED25519Signature.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert ED25519 signature to a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert ED25519 signature to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">publicKey</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
        <span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
        <span class="s2">&quot;signer&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="p">),</span>
        <span class="s2">&quot;signerVersion&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="s2">&quot;transactionHash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">transactionHash</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.EIP712Signature" class="doc doc-heading">
            <code>EIP712Signature</code>


<a href="#accumulate.models.signatures.EIP712Signature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EIP712Signature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">chain_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;EIP712&#39;</span><span class="p">,</span> <span class="n">signer</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">public_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chain_id</span> <span class="o">=</span> <span class="n">chain_id</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate EIP-712 compliant hash.&quot;&quot;&quot;</span>
        <span class="n">encoded_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">encoded_data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">message_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Debug: Verifying message_hash=</span><span class="si">{</span><span class="n">message_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">, signature=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">eth_key</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">PublicKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Debug: Using public_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Perform verification</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">verify_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">,</span> <span class="n">keys</span><span class="o">.</span><span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Debug: Verification result=</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="c1">#</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during verification: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1">#</span>
            <span class="k">return</span> <span class="kc">False</span> <span class="c1">#</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Encode EIP-712 typed data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.EIP712Signature._encode_typed_data" class="doc doc-heading">
            <code class=" language-python"><span class="n">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.signatures.EIP712Signature._encode_typed_data" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Encode EIP-712 typed data.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encode EIP-712 typed data.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.EIP712Signature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.EIP712Signature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate EIP-712 compliant hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate EIP-712 compliant hash.&quot;&quot;&quot;</span>
    <span class="n">encoded_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">encoded_data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.ETHSignature" class="doc doc-heading">
            <code>ETHSignature</code>


<a href="#accumulate.models.signatures.ETHSignature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>


        <p>Represents an Ethereum signature.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ETHSignature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an Ethereum signature.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;ETH&#39;</span><span class="p">,</span> <span class="n">signer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">public_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the Ethereum-specific hash of the public key.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">keccak</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)[</span><span class="o">-</span><span class="mi">20</span><span class="p">:]</span>  <span class="c1"># Return the last 20 bytes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify the Ethereum signature.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Hash the message using Ethereum&#39;s EIP-191 specification</span>
            <span class="n">message_hash</span> <span class="o">=</span> <span class="n">keccak</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x19</span><span class="s2">Ethereum Signed Message:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">))</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span>
            <span class="n">eth_key</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">PublicKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)</span>

            <span class="c1"># Create a Signature object</span>
            <span class="n">sig_obj</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">[:</span><span class="mi">64</span><span class="p">]</span> <span class="o">+</span> <span class="nb">bytes</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">[</span><span class="mi">64</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span><span class="p">]))</span>  <span class="c1"># Ensure v is 0 or 1</span>

            <span class="c1"># Verify the signature</span>
            <span class="k">return</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">verify_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">,</span> <span class="n">sig_obj</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during ETH signature verification: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the raw signature bytes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the public key bytes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ETHSignature.get_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.ETHSignature.get_public_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the public key bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the public key bytes.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ETHSignature.get_signature" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_signature</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.ETHSignature.get_signature" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the raw signature bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the raw signature bytes.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ETHSignature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.ETHSignature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculate the Ethereum-specific hash of the public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the Ethereum-specific hash of the public key.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">keccak</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)[</span><span class="o">-</span><span class="mi">20</span><span class="p">:]</span>  <span class="c1"># Return the last 20 bytes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.ETHSignature.verify" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.ETHSignature.verify" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify the Ethereum signature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify the Ethereum signature.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Hash the message using Ethereum&#39;s EIP-191 specification</span>
        <span class="n">message_hash</span> <span class="o">=</span> <span class="n">keccak</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x19</span><span class="s2">Ethereum Signed Message:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">))</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span>
        <span class="n">eth_key</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">PublicKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)</span>

        <span class="c1"># Create a Signature object</span>
        <span class="n">sig_obj</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">[:</span><span class="mi">64</span><span class="p">]</span> <span class="o">+</span> <span class="nb">bytes</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">[</span><span class="mi">64</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span><span class="p">]))</span>  <span class="c1"># Ensure v is 0 or 1</span>

        <span class="c1"># Verify the signature</span>
        <span class="k">return</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">verify_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">,</span> <span class="n">sig_obj</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during ETH signature verification: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.Lite" class="doc doc-heading">
            <code>Lite</code>


<a href="#accumulate.models.signatures.Lite" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a lite account URL and associated data.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Lite</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a lite account URL and associated data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bytes_</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bytes</span> <span class="o">=</span> <span class="n">bytes_</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Lite url=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">, bytes=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">bytes</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the URL of the lite account.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the raw bytes of the lite account.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytes</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the lite account.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.Lite.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.Lite.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>String representation of the lite account.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;String representation of the lite account.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.Lite.get_bytes" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_bytes</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.Lite.get_bytes" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the raw bytes of the lite account.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_bytes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the raw bytes of the lite account.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.Lite.get_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_url</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.Lite.get_url" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the URL of the lite account.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the URL of the lite account.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.PrivateKey" class="doc doc-heading">
            <code>PrivateKey</code>


<a href="#accumulate.models.signatures.PrivateKey" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a private key and its associated public key.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a private key and its associated public key.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a PrivateKey instance.</span>

<span class="sd">        :param key: The private key bytes.</span>
<span class="sd">        :param type_: The type of the private key (e.g., ED25519, ECDSA).</span>
<span class="sd">        :param public_key: The optional public key bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">PublicKey</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span> <span class="k">if</span> <span class="n">public_key</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;PrivateKey type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">, key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
            <span class="s2">&quot;public_key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the type of the private key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the raw private key bytes.</span>

<span class="sd">        :return: A tuple containing the private key bytes and a boolean indicating success.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PublicKey</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the associated public key.</span>

<span class="sd">        :return: The associated PublicKey instance or None if not set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the private key as a string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PrivateKey.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">type_</span><span class="p">,</span> <span class="n">public_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.PrivateKey.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize a PrivateKey instance.</p>
<p>:param key: The private key bytes.
:param type_: The type of the private key (e.g., ED25519, ECDSA).
:param public_key: The optional public key bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize a PrivateKey instance.</span>

<span class="sd">    :param key: The private key bytes.</span>
<span class="sd">    :param type_: The type of the private key (e.g., ED25519, ECDSA).</span>
<span class="sd">    :param public_key: The optional public key bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">PublicKey</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span> <span class="k">if</span> <span class="n">public_key</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PrivateKey.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PrivateKey.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Format the private key as a string representation.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Format the private key as a string representation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PrivateKey.get_private_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_private_key</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PrivateKey.get_private_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the raw private key bytes.</p>
<p>:return: A tuple containing the private key bytes and a boolean indicating success.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the raw private key bytes.</span>

<span class="sd">    :return: A tuple containing the private key bytes and a boolean indicating success.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PrivateKey.get_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PrivateKey.get_public_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the associated public key.</p>
<p>:return: The associated PublicKey instance or None if not set.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PublicKey</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the associated public key.</span>

<span class="sd">    :return: The associated PublicKey instance or None if not set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PrivateKey.get_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_type</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PrivateKey.get_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the type of the private key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the type of the private key.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.PublicKey" class="doc doc-heading">
            <code>PublicKey</code>


<a href="#accumulate.models.signatures.PublicKey" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a public key and provides methods for its operations.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PublicKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a public key and provides methods for its operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a PublicKey instance.</span>

<span class="sd">        :param key: The public key bytes.</span>
<span class="sd">        :param type_: The type of the public key (e.g., ED25519, ECDSA).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;PublicKey type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">, key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the type of the public key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the raw public key bytes.</span>

<span class="sd">        :return: A tuple containing the public key bytes and a boolean indicating success.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the hash of the public key.</span>

<span class="sd">        :return: A tuple containing the hashed public key bytes and a boolean indicating success.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">(),</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the public key as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pub_key_hash</span><span class="p">,</span> <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key_hash</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">pub_key_hash</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="k">if</span> <span class="n">success</span> <span class="k">else</span> <span class="s2">&quot;&lt;invalid address&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKey.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.PublicKey.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize a PublicKey instance.</p>
<p>:param key: The public key bytes.
:param type_: The type of the public key (e.g., ED25519, ECDSA).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize a PublicKey instance.</span>

<span class="sd">    :param key: The public key bytes.</span>
<span class="sd">    :param type_: The type of the public key (e.g., ED25519, ECDSA).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKey.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PublicKey.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Format the public key as a string.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Format the public key as a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pub_key_hash</span><span class="p">,</span> <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key_hash</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">pub_key_hash</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="k">if</span> <span class="n">success</span> <span class="k">else</span> <span class="s2">&quot;&lt;invalid address&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKey.get_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PublicKey.get_public_key" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the raw public key bytes.</p>
<p>:return: A tuple containing the public key bytes and a boolean indicating success.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the raw public key bytes.</span>

<span class="sd">    :return: A tuple containing the public key bytes and a boolean indicating success.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKey.get_public_key_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key_hash</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PublicKey.get_public_key_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the hash of the public key.</p>
<p>:return: A tuple containing the hashed public key bytes and a boolean indicating success.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the hash of the public key.</span>

<span class="sd">    :return: A tuple containing the hashed public key bytes and a boolean indicating success.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">(),</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKey.get_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_type</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PublicKey.get_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the type of the public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the type of the public key.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.PublicKeyHash" class="doc doc-heading">
            <code>PublicKeyHash</code>


<a href="#accumulate.models.signatures.PublicKeyHash" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a hash derived from a public key.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PublicKeyHash</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a hash derived from a public key.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hash_</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">hash_</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;PublicKeyHash type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">, hash=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the type of the public key hash.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the hash of the public key.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the address.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKeyHash.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PublicKeyHash.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>String representation of the address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;String representation of the address.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKeyHash.get_public_key_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_public_key_hash</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PublicKeyHash.get_public_key_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the hash of the public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_public_key_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the hash of the public key.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.PublicKeyHash.get_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_type</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.PublicKeyHash.get_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the type of the public key hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the type of the public key hash.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.RCD1Signature" class="doc doc-heading">
            <code>RCD1Signature</code>


<a href="#accumulate.models.signatures.RCD1Signature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RCD1Signature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;RCD1&#39;</span><span class="p">,</span> <span class="n">signer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">public_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate RCD1-specific hash.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">do_sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify the signature using ED25519.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vk</span> <span class="o">=</span> <span class="n">VerifyingKey</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="n">SECP256k1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.RCD1Signature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.RCD1Signature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculate RCD1-specific hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate RCD1-specific hash.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">do_sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.RCD1Signature.verify" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.RCD1Signature.verify" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify the signature using ED25519.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify the signature using ED25519.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">vk</span> <span class="o">=</span> <span class="n">VerifyingKey</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="n">SECP256k1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.Signature" class="doc doc-heading">
            <code>Signature</code>


<a href="#accumulate.models.signatures.Signature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for managing all signature types.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Signature</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for managing all signature types.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span> <span class="o">=</span> <span class="n">signature_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signer</span> <span class="o">=</span> <span class="n">signer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Follow JS hashing structure: First hash signature metadata, then concatenate and hash with message.&quot;&quot;&quot;</span>
        <span class="n">sig_md_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">sig_md_hash</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">final_hash</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize signature metadata for consistent hashing.&quot;&quot;&quot;</span>
        <span class="n">signer_bytes</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="n">signer_bytes</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses should implement this method.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.Signature.encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">encode</span><span class="p">()</span></code>

<a href="#accumulate.models.signatures.Signature.encode" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize signature metadata for consistent hashing.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize signature metadata for consistent hashing.&quot;&quot;&quot;</span>
    <span class="n">signer_bytes</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature_type</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="n">signer_bytes</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.Signature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.Signature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Follow JS hashing structure: First hash signature metadata, then concatenate and hash with message.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Follow JS hashing structure: First hash signature metadata, then concatenate and hash with message.&quot;&quot;&quot;</span>
    <span class="n">sig_md_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">sig_md_hash</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">final_hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.SignatureFactory" class="doc doc-heading">
            <code>SignatureFactory</code>


<a href="#accumulate.models.signatures.SignatureFactory" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Factory to create signatures based on type.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SignatureFactory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory to create signatures based on type.&quot;&quot;&quot;</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_signature</span><span class="p">(</span><span class="n">sig_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Signature</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">sig_type</span> <span class="o">==</span> <span class="s2">&quot;LegacyED25519&quot;</span><span class="p">:</span>
            <span class="c1"># Pass only the required arguments</span>
            <span class="n">required_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;signer&quot;</span><span class="p">,</span> <span class="s2">&quot;public_key&quot;</span><span class="p">,</span> <span class="s2">&quot;signature&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">LegacyED25519Signature</span><span class="p">(</span><span class="o">**</span><span class="n">required_args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sig_type</span> <span class="o">==</span> <span class="s2">&quot;TypedData&quot;</span><span class="p">:</span>
            <span class="n">required_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;signer&quot;</span><span class="p">,</span> <span class="s2">&quot;public_key&quot;</span><span class="p">,</span> <span class="s2">&quot;signature&quot;</span><span class="p">,</span> <span class="s2">&quot;chain_id&quot;</span><span class="p">,</span> <span class="s2">&quot;memo&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">TypedDataSignature</span><span class="p">(</span><span class="o">**</span><span class="n">required_args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sig_type</span> <span class="o">==</span> <span class="s2">&quot;RCD1&quot;</span><span class="p">:</span>
            <span class="n">required_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;signer&quot;</span><span class="p">,</span> <span class="s2">&quot;public_key&quot;</span><span class="p">,</span> <span class="s2">&quot;signature&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">RCD1Signature</span><span class="p">(</span><span class="o">**</span><span class="n">required_args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sig_type</span> <span class="o">==</span> <span class="s2">&quot;BTC&quot;</span><span class="p">:</span>
            <span class="n">required_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;signer&quot;</span><span class="p">,</span> <span class="s2">&quot;public_key&quot;</span><span class="p">,</span> <span class="s2">&quot;signature&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">BTCSignature</span><span class="p">(</span><span class="o">**</span><span class="n">required_args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sig_type</span> <span class="o">==</span> <span class="s2">&quot;DelegatedSignature&quot;</span><span class="p">:</span>
            <span class="n">required_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">,</span> <span class="s2">&quot;delegator&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">DelegatedSignature</span><span class="p">(</span><span class="o">**</span><span class="n">required_args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sig_type</span> <span class="o">==</span> <span class="s2">&quot;AuthoritySignature&quot;</span><span class="p">:</span>
            <span class="n">required_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;origin&quot;</span><span class="p">,</span> <span class="s2">&quot;authority&quot;</span><span class="p">,</span> <span class="s2">&quot;vote&quot;</span><span class="p">,</span> <span class="s2">&quot;txid&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">AuthoritySignature</span><span class="p">(</span><span class="o">**</span><span class="n">required_args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type: </span><span class="si">{</span><span class="n">sig_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.signatures.TypedDataSignature" class="doc doc-heading">
            <code>TypedDataSignature</code>


<a href="#accumulate.models.signatures.TypedDataSignature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.signatures.Signature" href="#accumulate.models.signatures.Signature">Signature</a></code></p>







              <details class="quote">
                <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TypedDataSignature</span><span class="p">(</span><span class="n">Signature</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">signer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">],</span>
        <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">chain_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">memo</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;TypedData&#39;</span><span class="p">,</span> <span class="n">signer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">public_key</span> <span class="o">=</span> <span class="n">public_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chain_id</span> <span class="o">=</span> <span class="n">chain_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memo</span> <span class="o">=</span> <span class="n">memo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate EIP-712 compliant hash.&quot;&quot;&quot;</span>
        <span class="n">encoded_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">encoded_data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span> <span class="c1">#</span>
            <span class="n">message_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">eth_key</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">PublicKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">public_key</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">verify_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">,</span> <span class="n">keys</span><span class="o">.</span><span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Encode EIP-712 typed data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.TypedDataSignature._encode_typed_data" class="doc doc-heading">
            <code class=" language-python"><span class="n">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.signatures.TypedDataSignature._encode_typed_data" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Encode EIP-712 typed data.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encode EIP-712 typed data.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.signatures.TypedDataSignature.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.TypedDataSignature.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate EIP-712 compliant hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate EIP-712 compliant hash.&quot;&quot;&quot;</span>
    <span class="n">encoded_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encode_typed_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">encoded_data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.models.signatures.do_btc_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">do_btc_hash</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.do_btc_hash" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Calculate the Bitcoin hash (RIPEMD160(SHA256(pub_key))).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">do_btc_hash</span><span class="p">(</span><span class="n">pub_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the Bitcoin hash (RIPEMD160(SHA256(pub_key))).&quot;&quot;&quot;</span>
    <span class="n">sha256_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">ripemd160</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;ripemd160&#39;</span><span class="p">)</span>
    <span class="n">ripemd160</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sha256_hash</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ripemd160</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span> 
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.signatures.do_eth_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">do_eth_hash</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span></code>

<a href="#accumulate.models.signatures.do_eth_hash" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Calculate the Ethereum address hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\signatures.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">do_eth_hash</span><span class="p">(</span><span class="n">pub_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the Ethereum address hash.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">eth_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">keccak</span>
    <span class="k">return</span> <span class="n">keccak</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)[</span><span class="o">-</span><span class="mi">20</span><span class="p">:]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.transaction_results" class="doc doc-heading">
            <code>transaction_results</code>


<a href="#accumulate.models.transaction_results" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transaction_results.AddCreditsResult" class="doc doc-heading">
            <code>AddCreditsResult</code>


<a href="#accumulate.models.transaction_results.AddCreditsResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.transaction_results.TransactionResult" href="#accumulate.models.transaction_results.TransactionResult">TransactionResult</a></code></p>


        <p>Represents the result of an Add Credits transaction.</p>
<p>:param amount: The amount of tokens added.
:param credits: The number of credits added.
:param oracle: The oracle rate used for conversion.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AddCreditsResult</span><span class="p">(</span><span class="n">TransactionResult</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the result of an Add Credits transaction.</span>

<span class="sd">    :param amount: The amount of tokens added.</span>
<span class="sd">    :param credits: The number of credits added.</span>
<span class="sd">    :param oracle: The oracle rate used for conversion.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">credits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">oracle</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">credits</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">oracle</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Amount, credits, and oracle must be non-negative integers.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amount</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credits</span> <span class="o">=</span> <span class="n">credits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">=</span> <span class="n">oracle</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AddCreditsResult&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AddCreditsResult</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">amount</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">credits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;AddCreditsResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">AddCreditsResult</span><span class="p">)</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">amount</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">amount</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">credits</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">credits</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">oracle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">oracle</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transaction_results.EmptyResult" class="doc doc-heading">
            <code>EmptyResult</code>


<a href="#accumulate.models.transaction_results.EmptyResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.transaction_results.TransactionResult" href="#accumulate.models.transaction_results.TransactionResult">TransactionResult</a></code></p>


        <p>Represents an empty transaction result.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EmptyResult</span><span class="p">(</span><span class="n">TransactionResult</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an empty transaction result.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;EmptyResult&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">EmptyResult</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;EmptyResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">EmptyResult</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transaction_results.TransactionResult" class="doc doc-heading">
            <code>TransactionResult</code>


<a href="#accumulate.models.transaction_results.TransactionResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for transaction results.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TransactionResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for transaction results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TransactionResult&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;TransactionResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Subclasses must implement this method.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.transaction_results.WriteDataResult" class="doc doc-heading">
            <code>WriteDataResult</code>


<a href="#accumulate.models.transaction_results.WriteDataResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.models.transaction_results.TransactionResult" href="#accumulate.models.transaction_results.TransactionResult">TransactionResult</a></code></p>


        <p>Represents the result of a Write Data transaction.</p>
<p>:param entry_hash: The hash of the data entry.
:param account_url: The URL of the account associated with the entry.
:param account_id: The ID of the account associated with the entry.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WriteDataResult</span><span class="p">(</span><span class="n">TransactionResult</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the result of a Write Data transaction.</span>

<span class="sd">    :param entry_hash: The hash of the data entry.</span>
<span class="sd">    :param account_url: The URL of the account associated with the entry.</span>
<span class="sd">    :param account_id: The ID of the account associated with the entry.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entry_hash</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">account_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">account_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_hash</span> <span class="o">=</span> <span class="n">entry_hash</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">account_url</span> <span class="o">=</span> <span class="n">account_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">account_id</span> <span class="o">=</span> <span class="n">account_id</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WriteDataResult&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">WriteDataResult</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_hash</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;WriteDataResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">WriteDataResult</span><span class="p">)</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entry_hash</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">entry_hash</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">account_url</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">account_url</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">account_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">account_id</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="accumulate.models.transaction_results.copy_transaction_result" class="doc doc-heading">
            <code class=" language-python"><span class="n">copy_transaction_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span></code>

<a href="#accumulate.models.transaction_results.copy_transaction_result" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a copy of the transaction result.</p>
<p>:param result: The transaction result to copy.
:return: A copy of the transaction result.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">copy_transaction_result</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">TransactionResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a copy of the transaction result.</span>

<span class="sd">    :param result: The transaction result to copy.</span>
<span class="sd">    :return: A copy of the transaction result.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.transaction_results.deserialize_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">deserialize_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.models.transaction_results.deserialize_json" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Deserialize JSON bytes into a dictionary.</p>
<p>:param data: JSON bytes.
:return: A dictionary representation of the JSON data.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deserialize_json</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize JSON bytes into a dictionary.</span>

<span class="sd">    :param data: JSON bytes.</span>
<span class="sd">    :return: A dictionary representation of the JSON data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.transaction_results.equal_transaction_result" class="doc doc-heading">
            <code class=" language-python"><span class="n">equal_transaction_result</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></code>

<a href="#accumulate.models.transaction_results.equal_transaction_result" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compare two transaction results for equality.</p>
<p>:param a: The first transaction result.
:param b: The second transaction result.
:return: True if they are equal, False otherwise.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">equal_transaction_result</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">TransactionResult</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">TransactionResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compare two transaction results for equality.</span>

<span class="sd">    :param a: The first transaction result.</span>
<span class="sd">    :param b: The second transaction result.</span>
<span class="sd">    :return: True if they are equal, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.transaction_results.new_transaction_result" class="doc doc-heading">
            <code class=" language-python"><span class="n">new_transaction_result</span><span class="p">(</span><span class="n">typ</span><span class="p">)</span></code>

<a href="#accumulate.models.transaction_results.new_transaction_result" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Factory method to create a new transaction result based on the type.</p>
<p>:param typ: The transaction type.
:return: A new instance of the appropriate TransactionResult subclass.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">new_transaction_result</span><span class="p">(</span><span class="n">typ</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TransactionResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Factory method to create a new transaction result based on the type.</span>

<span class="sd">    :param typ: The transaction type.</span>
<span class="sd">    :return: A new instance of the appropriate TransactionResult subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">typ</span> <span class="o">==</span> <span class="s2">&quot;WriteDataResult&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">WriteDataResult</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">typ</span> <span class="o">==</span> <span class="s2">&quot;AddCreditsResult&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AddCreditsResult</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">typ</span> <span class="o">==</span> <span class="s2">&quot;EmptyResult&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">EmptyResult</span><span class="p">()</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown transaction result type: </span><span class="si">{</span><span class="n">typ</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.models.transaction_results.unmarshal_transaction_result" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal_transaction_result</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.models.transaction_results.unmarshal_transaction_result" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Deserialize a transaction result from raw data or JSON.</p>
<p>:param data: Raw bytes or JSON object containing the transaction result.
:return: The deserialized TransactionResult.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\transaction_results.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_transaction_result</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">TransactionResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize a transaction result from raw data or JSON.</span>

<span class="sd">    :param data: Raw bytes or JSON object containing the transaction result.</span>
<span class="sd">    :return: The deserialized TransactionResult.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">deserialize_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">result_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">result_type</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing transaction result type in data&quot;</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">new_transaction_result</span><span class="p">(</span><span class="n">result_type</span><span class="p">)</span>

    <span class="c1"># Deserialize fields and handle bytes explicitly</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;entry_hash&quot;</span> <span class="ow">or</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;account_id&quot;</span><span class="p">:</span>
            <span class="c1"># Convert hex strings back to bytes</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;account_url&quot;</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># Convert string to URL object</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.txid" class="doc doc-heading">
            <code>txid</code>


<a href="#accumulate.models.txid" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.txid.TxID" class="doc doc-heading">
            <code>TxID</code>


<a href="#accumulate.models.txid.TxID" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Represents a transaction ID.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\txid.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TxID</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a transaction ID.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">tx_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">URL</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;TxID must be initialized with a URL instance.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction hash must be a 32-byte value.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">tx_hash</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">txid_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TxID&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a TxID string into a TxID object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parsing TxID string: </span><span class="si">{</span><span class="n">txid_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Debugging input</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">txid_str</span><span class="p">)</span>

        <span class="c1"># Validate that &#39;@&#39; is present in the original string</span>
        <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">txid_str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid TxID structure: &#39;</span><span class="si">{</span><span class="n">txid_str</span><span class="si">}</span><span class="s2">&#39;. Must contain &#39;@&#39; separating hash and authority.&quot;</span><span class="p">)</span>

        <span class="c1"># Validate presence of user_info (TxHash)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MissingHashError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TxID missing hash: </span><span class="si">{</span><span class="n">txid_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">tx_hash</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InvalidHashError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction hash must be 32 bytes: </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidHashError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid transaction hash format: </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="si">}</span><span class="s2">. Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Clean URL (remove TxHash from user_info)</span>
        <span class="n">clean_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">with_user_info</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TxID</span><span class="p">(</span><span class="n">clean_url</span><span class="p">,</span> <span class="n">tx_hash</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the string representation of the TxID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Combine URL and hash as required</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;String representation of TxID: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Debugging</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;TxID&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Comparing TxIDs: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2"> vs </span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Debugging</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TxID</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Comparison must be between two TxIDs&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">tx_hash</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">tx_hash</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">tx_hash</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">url</span><span class="p">))</span> <span class="o">-</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>  <span class="c1"># Updated comparison</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">as_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct a URL representation of the TxID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">with_user_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">account</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the account URL associated with the TxID.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Equality operator.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TxID</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">tx_hash</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">url</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Hash operator.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the TxID to a JSON string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()})</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TxID&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize a JSON string into a TxID instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">])</span>
        <span class="n">tx_hash</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;hash&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">tx_hash</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.__eq__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#accumulate.models.txid.TxID.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Equality operator.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Equality operator.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TxID</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">tx_hash</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.__hash__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__hash__</span><span class="p">()</span></code>

<a href="#accumulate.models.txid.TxID.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Hash operator.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hash operator.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.__str__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__str__</span><span class="p">()</span></code>

<a href="#accumulate.models.txid.TxID.__str__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the string representation of the TxID.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the string representation of the TxID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Combine URL and hash as required</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;String representation of TxID: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Debugging</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.account" class="doc doc-heading">
            <code class=" language-python"><span class="n">account</span><span class="p">()</span></code>

<a href="#accumulate.models.txid.TxID.account" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the account URL associated with the TxID.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">account</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the account URL associated with the TxID.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.as_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">as_url</span><span class="p">()</span></code>

<a href="#accumulate.models.txid.TxID.as_url" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Construct a URL representation of the TxID.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">as_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct a URL representation of the TxID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">with_user_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.from_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#accumulate.models.txid.TxID.from_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize a JSON string into a TxID instance.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TxID&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize a JSON string into a TxID instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">])</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;hash&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">tx_hash</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.json" class="doc doc-heading">
            <code class=" language-python"><span class="n">json</span><span class="p">()</span></code>

<a href="#accumulate.models.txid.TxID.json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the TxID to a JSON string.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize the TxID to a JSON string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tx_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid.TxID.parse" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse</span><span class="p">(</span><span class="n">txid_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.models.txid.TxID.parse" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Parse a TxID string into a TxID object.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">txid_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TxID&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse a TxID string into a TxID object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parsing TxID string: </span><span class="si">{</span><span class="n">txid_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Debugging input</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">txid_str</span><span class="p">)</span>

    <span class="c1"># Validate that &#39;@&#39; is present in the original string</span>
    <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">txid_str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid TxID structure: &#39;</span><span class="si">{</span><span class="n">txid_str</span><span class="si">}</span><span class="s2">&#39;. Must contain &#39;@&#39; separating hash and authority.&quot;</span><span class="p">)</span>

    <span class="c1"># Validate presence of user_info (TxHash)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">MissingHashError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TxID missing hash: </span><span class="si">{</span><span class="n">txid_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">tx_hash</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidHashError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction hash must be 32 bytes: </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidHashError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid transaction hash format: </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">user_info</span><span class="si">}</span><span class="s2">. Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Clean URL (remove TxHash from user_info)</span>
    <span class="n">clean_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">with_user_info</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">TxID</span><span class="p">(</span><span class="n">clean_url</span><span class="p">,</span> <span class="n">tx_hash</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.txid_set" class="doc doc-heading">
            <code>txid_set</code>


<a href="#accumulate.models.txid_set" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.txid_set.TxIdSet" class="doc doc-heading">
            <code>TxIdSet</code>


<a href="#accumulate.models.txid_set.TxIdSet" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\models\txid_set.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TxIdSet</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TxID</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txid</span><span class="p">:</span> <span class="n">TxID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a transaction ID to the set using a sorted insertion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">):</span>
            <span class="n">comparison</span> <span class="o">=</span> <span class="n">txid</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">comparison</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Already exists</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="n">comparison</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Insert before</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">txid</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="c1"># Add to the end if no earlier position was found</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">txid</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txid</span><span class="p">:</span> <span class="n">TxID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove a transaction ID from the set if it exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">txid</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">contains_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a transaction ID with the given hash exists in the set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">==</span> <span class="n">hash_</span><span class="p">:</span>  <span class="c1"># Compare directly with the tx_hash attribute</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid_set.TxIdSet.add" class="doc doc-heading">
            <code class=" language-python"><span class="n">add</span><span class="p">(</span><span class="n">txid</span><span class="p">)</span></code>

<a href="#accumulate.models.txid_set.TxIdSet.add" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add a transaction ID to the set using a sorted insertion.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid_set.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txid</span><span class="p">:</span> <span class="n">TxID</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a transaction ID to the set using a sorted insertion.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">):</span>
        <span class="n">comparison</span> <span class="o">=</span> <span class="n">txid</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comparison</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Already exists</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">comparison</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Insert before</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">txid</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="c1"># Add to the end if no earlier position was found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">txid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid_set.TxIdSet.contains_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">contains_hash</span><span class="p">(</span><span class="n">hash_</span><span class="p">)</span></code>

<a href="#accumulate.models.txid_set.TxIdSet.contains_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if a transaction ID with the given hash exists in the set.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid_set.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">contains_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a transaction ID with the given hash exists in the set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">tx_hash</span> <span class="o">==</span> <span class="n">hash_</span><span class="p">:</span>  <span class="c1"># Compare directly with the tx_hash attribute</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.models.txid_set.TxIdSet.remove" class="doc doc-heading">
            <code class=" language-python"><span class="n">remove</span><span class="p">(</span><span class="n">txid</span><span class="p">)</span></code>

<a href="#accumulate.models.txid_set.TxIdSet.remove" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Remove a transaction ID from the set if it exists.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\txid_set.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txid</span><span class="p">:</span> <span class="n">TxID</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove a transaction ID from the set if it exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">txid</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.models.types" class="doc doc-heading">
            <code>types</code>


<a href="#accumulate.models.types" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.models.types.AtomicSlice" class="doc doc-heading">
            <code>AtomicSlice</code>


<a href="#accumulate.models.types.AtomicSlice" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Thread-safe list management.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\types.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AtomicSlice</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Thread-safe list management.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare the items with another list.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">==</span> <span class="n">other</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.models.types.AtomicSlice.compare" class="doc doc-heading">
            <code class=" language-python"><span class="n">compare</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#accumulate.models.types.AtomicSlice.compare" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Compare the items with another list.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\models\types.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compare the items with another list.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">==</span> <span class="n">other</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.models.types.AtomicUint" class="doc doc-heading">
            <code>AtomicUint</code>


<a href="#accumulate.models.types.AtomicUint" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Thread-safe atomic counter.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\models\types.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AtomicUint</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Thread-safe atomic counter.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div><hr />
<h2 id="utils">Utils<a class="headerlink" href="#utils" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.conversion" class="doc doc-heading">
            <code>conversion</code>


<a href="#accumulate.utils.conversion" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.conversion.camel_to_snake" class="doc doc-heading">
            <code class=" language-python"><span class="n">camel_to_snake</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#accumulate.utils.conversion.camel_to_snake" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Converts camelCase to snake_case.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\conversion.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">camel_to_snake</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts camelCase to snake_case.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;!^)(?=[A-Z])&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.address_from" class="doc doc-heading">
            <code>address_from</code>


<a href="#accumulate.utils.address_from" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_ecdsa_private_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_ecdsa_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_ecdsa_private_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PrivateKey instance from an ECDSA private key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_ecdsa_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">ec</span><span class="o">.</span><span class="n">EllipticCurvePrivateKey</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PrivateKey instance from an ECDSA private key.&quot;&quot;&quot;</span>
    <span class="n">private_key_bytes</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">private_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PrivateFormat</span><span class="o">.</span><span class="n">PKCS8</span><span class="p">,</span>
        <span class="n">encryption_algorithm</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">NoEncryption</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">public_key</span> <span class="o">=</span> <span class="n">from_ecdsa_public_key</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">public_key</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">PrivateKey</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">private_key_bytes</span><span class="p">,</span> <span class="n">public_key</span><span class="o">=</span><span class="n">public_key</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_ecdsa_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_ecdsa_public_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_ecdsa_public_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PublicKey instance from an ECDSA public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_ecdsa_public_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">ec</span><span class="o">.</span><span class="n">EllipticCurvePublicKey</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PublicKey instance from an ECDSA public key.&quot;&quot;&quot;</span>
    <span class="n">key_bytes</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">PublicKey</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_ed25519_private_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_ed25519_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_ed25519_private_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PrivateKey instance from an Ed25519 private key (must be 64 bytes).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_ed25519_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PrivateKey instance from an Ed25519 private key (must be 64 bytes).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">32</span><span class="p">:</span>
        <span class="n">private_key_bytes</span> <span class="o">=</span> <span class="n">key</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span>
        <span class="n">private_key_bytes</span> <span class="o">=</span> <span class="n">key</span><span class="p">[:</span><span class="mi">32</span><span class="p">]</span>  <span class="c1"># Extract first 32 bytes as the actual private key</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid Ed25519 private key length (must be 32 or 64 bytes).&quot;</span><span class="p">)</span>

    <span class="c1"># Generate the public key from the extracted private key</span>
    <span class="n">private_key</span> <span class="o">=</span> <span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">from_private_bytes</span><span class="p">(</span><span class="n">private_key_bytes</span><span class="p">)</span>
    <span class="n">public_key_bytes</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">Raw</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">PrivateKey</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">private_key_bytes</span><span class="p">,</span> <span class="n">public_key</span><span class="o">=</span><span class="n">public_key_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_ed25519_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_ed25519_public_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_ed25519_public_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PublicKey instance from an Ed25519 public key (must be 32 bytes).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_ed25519_public_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PublicKey instance from an Ed25519 public key (must be 32 bytes).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">32</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid Ed25519 public key length (must be 32 bytes).&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PublicKey</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_eth_private_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_eth_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_eth_private_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PrivateKey instance from an Ethereum private key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_eth_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PrivateKey instance from an Ethereum private key.&quot;&quot;&quot;</span>
    <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PrivateKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="n">public_key_bytes</span> <span class="o">=</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">public_key</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">PrivateKey</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">public_key</span><span class="o">=</span><span class="n">public_key_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_private_key_bytes" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_private_key_bytes</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_private_key_bytes" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PrivateKey instance from raw private key bytes.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_private_key_bytes</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PrivateKey instance from raw private key bytes.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Ed25519 key must be 32 or 64 bytes.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">from_ed25519_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span>
        <span class="n">private_key</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">rsa</span><span class="o">.</span><span class="n">RSAPrivateKey</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Provided key is not an RSA private key.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">from_rsa_private_key</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span>
        <span class="n">private_key</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">EllipticCurvePrivateKey</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Provided key is not an ECDSA private key.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">from_ecdsa_private_key</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC_LEGACY</span><span class="p">}:</span>
        <span class="k">return</span> <span class="n">from_eth_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type: </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_rsa_private_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_rsa_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_rsa_private_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PrivateKey instance from an RSA private key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_rsa_private_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">rsa</span><span class="o">.</span><span class="n">RSAPrivateKey</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PrivateKey instance from an RSA private key.&quot;&quot;&quot;</span>
    <span class="n">private_key_bytes</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">private_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PrivateFormat</span><span class="o">.</span><span class="n">PKCS8</span><span class="p">,</span>
        <span class="n">encryption_algorithm</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">NoEncryption</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">public_key</span> <span class="o">=</span> <span class="n">from_rsa_public_key</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">public_key</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">PrivateKey</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">private_key_bytes</span><span class="p">,</span> <span class="n">public_key</span><span class="o">=</span><span class="n">public_key</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.from_rsa_public_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_rsa_public_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_from.from_rsa_public_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create a PublicKey instance from an RSA public key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_rsa_public_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">rsa</span><span class="o">.</span><span class="n">RSAPublicKey</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a PublicKey instance from an RSA public key.&quot;&quot;&quot;</span>
    <span class="n">key_bytes</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">PublicKey</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_from.generate_ed25519_keypair" class="doc doc-heading">
            <code class=" language-python"><span class="n">generate_ed25519_keypair</span><span class="p">()</span></code>

<a href="#accumulate.utils.address_from.generate_ed25519_keypair" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate an Ed25519 keypair that matches TweetNaCl (64-byte private key, 32-byte public key).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_from.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_ed25519_keypair</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate an Ed25519 keypair that matches TweetNaCl (64-byte private key, 32-byte public key).&quot;&quot;&quot;</span>
    <span class="n">private_key</span> <span class="o">=</span> <span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>

    <span class="c1"># Extract private key bytes (32 bytes)</span>
    <span class="n">private_key_bytes</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">private_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PrivateFormat</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
        <span class="n">encryption_algorithm</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">NoEncryption</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Extract public key bytes (32 bytes)</span>
    <span class="n">public_key_bytes</span> <span class="o">=</span> <span class="n">private_key</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">Raw</span>
    <span class="p">)</span>

    <span class="c1"># Concatenate private key + public key to create a 64-byte private key</span>
    <span class="n">private_key_64</span> <span class="o">=</span> <span class="n">private_key_bytes</span> <span class="o">+</span> <span class="n">public_key_bytes</span>

    <span class="k">return</span> <span class="n">private_key_64</span><span class="p">,</span> <span class="n">public_key_bytes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.encoding" class="doc doc-heading">
            <code>encoding</code>


<a href="#accumulate.utils.encoding" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.consume" class="doc doc-heading">
            <code class=" language-python"><span class="n">consume</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">consumer</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.consume" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Extracts fields from an object and applies the consumer function to each field
Mirrors the JS <code>consume()</code> function</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">consume</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">consumer</span><span class="p">:</span> <span class="nb">callable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts fields from an object and applies the consumer function to each field</span>
<span class="sd">    Mirrors the JS `consume()` function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;consume() expects a dictionary as input&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">consumer</span><span class="p">(</span><span class="n">field_num</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.decode_uvarint" class="doc doc-heading">
            <code class=" language-python"><span class="n">decode_uvarint</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.decode_uvarint" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Decodes an unsigned integer from a bytes object using varint encoding</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">decode_uvarint</span><span class="p">(</span><span class="n">buf</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decodes an unsigned integer from a bytes object using varint encoding&quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">shift</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">buf</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">|=</span> <span class="p">(</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0x7F</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span>
        <span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="mh">0x80</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">shift</span> <span class="o">+=</span> <span class="mi">7</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.encode" class="doc doc-heading">
            <code class=" language-python"><span class="n">encode</span><span class="p">(</span><span class="n">target</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.encode" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Python equivalent of the JS encode() function
Encodes an object into a binary format using uvarint encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Python equivalent of the JS encode() function</span>
<span class="sd">    Encodes an object into a binary format using uvarint encoding.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;encode() expects a dictionary as input&quot;</span><span class="p">)</span>

    <span class="n">parts</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>

    <span class="c1"># Iterate through fields and encode each one</span>
    <span class="k">for</span> <span class="n">field_num</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">field_number_encoded</span> <span class="o">=</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">field_num</span><span class="p">)</span>
        <span class="n">value_encoded</span> <span class="o">=</span> <span class="n">encode_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="n">parts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">field_number_encoded</span><span class="p">)</span>  <span class="c1"># Field number</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value_encoded</span><span class="p">)</span>         <span class="c1"># Encoded value</span>

    <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.encode_compact_int" class="doc doc-heading">
            <code class=" language-python"><span class="n">encode_compact_int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.encode_compact_int" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Encodes an integer in compact form: a one‑byte length followed by the big‑endian bytes</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode_compact_int</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encodes an integer in compact form: a one‑byte length followed by the big‑endian bytes&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1">&#39;</span>
    <span class="n">num_bytes</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">num_bytes</span><span class="p">])</span> <span class="o">+</span> <span class="n">value</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">num_bytes</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;encode_compact_int: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.encode_uvarint" class="doc doc-heading">
            <code class=" language-python"><span class="n">encode_uvarint</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.encode_uvarint" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Encodes an unsigned integer using varint encoding.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode_uvarint</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encodes an unsigned integer using varint encoding.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot encode negative value as unsigned varint&quot;</span><span class="p">)</span>
    <span class="n">buf</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mh">0x7F</span><span class="p">:</span>
        <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mh">0x7F</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0x80</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">&gt;&gt;=</span> <span class="mi">7</span>
    <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mh">0x7F</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;encode_uvarint: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.encode_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">encode_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.encode_value" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Encodes a single value based on its type
Mirrors the encoding rules from the JavaScript library</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">encode_value</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encodes a single value based on its type</span>
<span class="sd">    Mirrors the encoding rules from the JavaScript library</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># Variable-length encoding for numbers</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">value_bytes</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">value_bytes</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="o">+</span> <span class="n">value</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># Recursive encoding for nested objects</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">encoded_list</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">encoded_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">encode_value</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">encoded_list</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported data type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.field_marshal_binary" class="doc doc-heading">
            <code class=" language-python"><span class="n">field_marshal_binary</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.field_marshal_binary" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Encodes a field by writing its field number as one byte,
then appending the provided value (which itself may already be length‑prefixed)</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">field_marshal_binary</span><span class="p">(</span><span class="n">field</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encodes a field by writing its field number as one byte,</span>
<span class="sd">    then appending the provided value (which itself may already be length‑prefixed)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">field</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">field</span> <span class="o">&gt;</span> <span class="mi">32</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValueOutOfRangeException</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span> <span class="o">+</span> <span class="n">val</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;field_marshal_binary (field </span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.encoding.read_uvarint" class="doc doc-heading">
            <code class=" language-python"><span class="n">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span></code>

<a href="#accumulate.utils.encoding.read_uvarint" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Reads an unsigned varint from a byte stream</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\encoding.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_uvarint</span><span class="p">(</span><span class="n">reader</span><span class="p">:</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reads an unsigned varint from a byte stream&quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">shift</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">EOFError</span><span class="p">(</span><span class="s2">&quot;Unexpected end of stream while reading uvarint&quot;</span><span class="p">)</span>
        <span class="n">b_val</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">|=</span> <span class="p">(</span><span class="n">b_val</span> <span class="o">&amp;</span> <span class="mh">0x7F</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span>
        <span class="k">if</span> <span class="n">b_val</span> <span class="o">&lt;</span> <span class="mh">0x80</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">shift</span> <span class="o">+=</span> <span class="mi">7</span>
    <span class="k">return</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.hash_functions" class="doc doc-heading">
            <code>hash_functions</code>


<a href="#accumulate.utils.hash_functions" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.hash_functions.LiteAuthorityForHash" class="doc doc-heading">
            <code class=" language-python"><span class="n">LiteAuthorityForHash</span><span class="p">(</span><span class="n">key_hash</span><span class="p">)</span></code>

<a href="#accumulate.utils.hash_functions.LiteAuthorityForHash" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a Lite Token Account suffix from a key hash</p>
<p>:param key_hash: The SHA-256 first 20 bytes
:return: A valid Lite Token Account suffix</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\hash_functions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">LiteAuthorityForHash</span><span class="p">(</span><span class="n">key_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a Lite Token Account suffix from a key hash</span>

<span class="sd">    :param key_hash: The SHA-256 first 20 bytes</span>
<span class="sd">    :return: A valid Lite Token Account suffix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">first20</span> <span class="o">=</span> <span class="n">key_hash</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>  <span class="c1"># Extract the first 20 bytes</span>
    <span class="n">first20_hex</span> <span class="o">=</span> <span class="n">first20</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>  <span class="c1"># Convert first 20 bytes to a hex string</span>
    <span class="n">checksum_full</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">first20_hex</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>  <span class="c1"># Hash the hex string</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">checksum_full</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>  <span class="c1"># Extract the last 4 bytes as checksum</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="p">(</span><span class="n">first20</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">checksum</span><span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># Append checksum and return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.hash_functions.LiteAuthorityForKey" class="doc doc-heading">
            <code class=" language-python"><span class="n">LiteAuthorityForKey</span><span class="p">(</span><span class="n">pub_key</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">)</span></code>

<a href="#accumulate.utils.hash_functions.LiteAuthorityForKey" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a Lite Token Account (LTA) URL from a public key</p>
<p>:param pub_key: The public key in bytes
:param signature_type: The signature type (e.g., "ED25519")
:return: A valid Lite Token Account (LTA) URL</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\hash_functions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">LiteAuthorityForKey</span><span class="p">(</span><span class="n">pub_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a Lite Token Account (LTA) URL from a public key</span>

<span class="sd">    :param pub_key: The public key in bytes</span>
<span class="sd">    :param signature_type: The signature type (e.g., &quot;ED25519&quot;)</span>
<span class="sd">    :return: A valid Lite Token Account (LTA) URL</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">key_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>  <span class="c1"># SHA-256 Hash</span>
    <span class="n">lite_account</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">LiteAuthorityForHash</span><span class="p">(</span><span class="n">key_hash</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">lite_account</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.hash_functions.btc_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span></code>

<a href="#accumulate.utils.hash_functions.btc_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a BTC address from a public key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\hash_functions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a BTC address from a public key</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="mi">33</span><span class="p">,</span> <span class="mi">65</span><span class="p">}:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid public key length for BTC&quot;</span><span class="p">)</span>
    <span class="n">pub_hash</span> <span class="o">=</span> <span class="n">public_key_hash</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">)</span>
    <span class="n">versioned_payload</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">pub_hash</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">hash_data</span><span class="p">(</span><span class="n">hash_data</span><span class="p">(</span><span class="n">versioned_payload</span><span class="p">))[:</span><span class="mi">4</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58encode</span><span class="p">(</span><span class="n">versioned_payload</span> <span class="o">+</span> <span class="n">checksum</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.hash_functions.compute_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">compute_hash</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

<a href="#accumulate.utils.hash_functions.compute_hash" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compute a SHA-256 hash for an object implementing a <code>marshal_binary()</code> method.
If raw bytes are provided, hash them directly.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\hash_functions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_hash</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute a SHA-256 hash for an object implementing a `marshal_binary()` method.</span>
<span class="sd">    If raw bytes are provided, hash them directly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>  <span class="c1">#  Allow raw bytes</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;marshal_binary&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">marshal_binary</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">EncodingError</span><span class="p">(</span><span class="s2">&quot;Object must implement a `marshal_binary` method&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">binary_data</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">marshal_binary</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">EncodingError</span><span class="p">(</span><span class="s2">&quot;Failed to marshal object for hashing&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">binary_data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.hash_functions.eth_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span></code>

<a href="#accumulate.utils.hash_functions.eth_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate an ETH address from a public key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\hash_functions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate an ETH address from a public key</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">65</span><span class="p">:</span>  <span class="c1"># Uncompressed key</span>
        <span class="n">public_key</span> <span class="o">=</span> <span class="n">public_key</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># Remove the prefix</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">64</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid public key length for ETH&quot;</span><span class="p">)</span>
    <span class="n">pub_hash</span> <span class="o">=</span> <span class="n">public_key_hash</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;0x&quot;</span> <span class="o">+</span> <span class="n">pub_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.hash_functions.hash_data" class="doc doc-heading">
            <code class=" language-python"><span class="n">hash_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.utils.hash_functions.hash_data" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Computes the SHA-256 hash of the given data</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\hash_functions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the SHA-256 hash of the given data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input must be of type bytes&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.hash_functions.public_key_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">public_key_hash</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">)</span></code>

<a href="#accumulate.utils.hash_functions.public_key_hash" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Calculate the public key hash based on the signature type</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\hash_functions.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">public_key_hash</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the public key hash based on the signature type</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">LEGACY_ED25519</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">,</span>
    <span class="p">]:</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">RCD1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;RCD&quot;</span> <span class="o">+</span> <span class="n">public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC_LEGACY</span><span class="p">]:</span>
        <span class="n">sha256_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">ripemd160</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;ripemd160&quot;</span><span class="p">)</span>
        <span class="n">ripemd160</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sha256_hash</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ripemd160</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">keccak</span><span class="p">(</span><span class="n">public_key</span><span class="p">)[</span><span class="o">-</span><span class="mi">20</span><span class="p">:]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type for public key hash: </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="additional-utils">Additional Utils<a class="headerlink" href="#additional-utils" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.address_parse" class="doc doc-heading">
            <code>address_parse</code>


<a href="#accumulate.utils.address_parse" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.is_wif_key" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_wif_key</span><span class="p">(</span><span class="n">wif</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.is_wif_key" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if a string is a valid WIF (Wallet Import Format) key.</p>
<p>:param wif: The WIF key string.
:return: True if valid, False otherwise.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_wif_key</span><span class="p">(</span><span class="n">wif</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a string is a valid WIF (Wallet Import Format) key.</span>

<span class="sd">    :param wif: The WIF key string.</span>
<span class="sd">    :return: True if valid, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">wif</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;K&quot;</span><span class="p">,</span> <span class="s2">&quot;L&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">wif</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">52</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58decode</span><span class="p">(</span><span class="n">wif</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">decoded</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="mi">38</span><span class="p">):</span>  <span class="c1"># 32 bytes private key + 4 bytes checksum (+1 byte for compression flag)</span>
            <span class="k">return</span> <span class="kc">False</span> <span class="c1">#</span>
        <span class="n">checksum</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">expected_checksum</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">decoded</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()[:</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">checksum</span> <span class="o">==</span> <span class="n">expected_checksum</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="kc">False</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_ac_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_ac_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_ac_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse an Accumulate public key (AC) address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_ac_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKeyHash</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an Accumulate public key (AC) address.&quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">address</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># Extract prefix (e.g., &quot;AC1&quot;)</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># Extract version (e.g., &quot;1&quot; from &quot;AC1&quot;)</span>
    <span class="n">prefix_map</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;AC1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;AC2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;AC3&quot;</span><span class="p">}</span>
    <span class="n">type_map</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;EcdsaSha256&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;RsaSha256&quot;</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prefix_map</span> <span class="ow">or</span> <span class="n">prefix</span> <span class="o">!=</span> <span class="n">prefix_map</span><span class="p">[</span><span class="n">version</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid AC address type: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Validate the rest of the address</span>
    <span class="n">hash_bytes</span> <span class="o">=</span> <span class="n">parse_with_prefix</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="n">prefix_map</span><span class="p">[</span><span class="n">version</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">PublicKeyHash</span><span class="p">(</span><span class="n">type_map</span><span class="p">[</span><span class="n">version</span><span class="p">],</span> <span class="n">hash_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_as_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_as_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_as_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse an Accumulate private key (AS) address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_as_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an Accumulate private key (AS) address.&quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">address</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># Extract prefix (e.g., &quot;AS1&quot;)</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># Extract version (e.g., &quot;1&quot; from &quot;AS1&quot;)</span>
    <span class="n">prefix_map</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;AS1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;AS2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;AS3&quot;</span><span class="p">}</span>
    <span class="n">type_map</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;ED25519&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;EcdsaSha256&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;RsaSha256&quot;</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prefix_map</span> <span class="ow">or</span> <span class="n">prefix</span> <span class="o">!=</span> <span class="n">prefix_map</span><span class="p">[</span><span class="n">version</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid AS address type: </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Validate the rest of the address</span>
    <span class="n">private_key_bytes</span> <span class="o">=</span> <span class="n">parse_with_prefix</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="n">prefix_map</span><span class="p">[</span><span class="n">version</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">PrivateKey</span><span class="p">(</span><span class="n">private_key_bytes</span><span class="p">,</span> <span class="n">type_map</span><span class="p">[</span><span class="n">version</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_btc_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_btc_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_btc_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse a Bitcoin public key (BT) address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_btc_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKeyHash</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a Bitcoin public key (BT) address.&quot;&quot;&quot;</span>
    <span class="n">hash_bytes</span> <span class="o">=</span> <span class="n">parse_with_checksum</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="mi">20</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PublicKeyHash</span><span class="p">(</span><span class="s2">&quot;BTC&quot;</span><span class="p">,</span> <span class="n">hash_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_eth_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_eth_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_eth_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse an Ethereum address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_eth_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKeyHash</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an Ethereum address.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Unknown address format&quot;</span><span class="p">)</span>  <span class="c1"># Standardized message</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">hash_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Unknown address format&quot;</span><span class="p">)</span>  <span class="c1"># Standardized message</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">20</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Unknown address format&quot;</span><span class="p">)</span>  <span class="c1"># Standardized message #</span>

    <span class="k">return</span> <span class="n">PublicKeyHash</span><span class="p">(</span><span class="s2">&quot;ETH&quot;</span><span class="p">,</span> <span class="n">hash_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_fa_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_fa_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_fa_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse a Factom public key (FA) address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_fa_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKeyHash</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a Factom public key (FA) address.&quot;&quot;&quot;</span>
    <span class="c1"># Strip the readable prefix before decoding</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;FA&quot;</span><span class="p">):</span>  <span class="c1"># This condition ensures the prefix validation</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid FA address prefix&quot;</span><span class="p">)</span>
    <span class="n">encoded_payload</span> <span class="o">=</span> <span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># Remove the &quot;FA&quot; prefix</span>
    <span class="n">hash_bytes</span> <span class="o">=</span> <span class="n">parse_with_checksum</span><span class="p">(</span><span class="n">encoded_payload</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x5f\xb1</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PublicKeyHash</span><span class="p">(</span><span class="s2">&quot;RCD1&quot;</span><span class="p">,</span> <span class="n">hash_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_fs_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_fs_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_fs_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse a Factom private key (Fs) address.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_fs_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a Factom private key (Fs) address.&quot;&quot;&quot;</span>
    <span class="c1"># Strip the readable prefix before decoding</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Fs&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid Fs address prefix&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="n">encoded_payload</span> <span class="o">=</span> <span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># Remove the &quot;Fs&quot; prefix</span>
    <span class="n">private_key_bytes</span> <span class="o">=</span> <span class="n">parse_with_checksum</span><span class="p">(</span><span class="n">encoded_payload</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x64\x78</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PrivateKey</span><span class="p">(</span><span class="n">private_key_bytes</span><span class="p">,</span> <span class="s2">&quot;RCD1&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_mh_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_mh_address</span><span class="p">(</span><span class="n">address</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_mh_address" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse an unknown hash (as a multihash).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_mh_address</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PublicKeyHash</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an unknown hash (as a multihash).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;MH&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid MH address: bad prefix&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58decode</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span> <span class="c1">#</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid MH address: decoding failed&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">return</span> <span class="n">PublicKeyHash</span><span class="p">(</span><span class="s2">&quot;Multihash&quot;</span><span class="p">,</span> <span class="n">decoded</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_wif" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_wif</span><span class="p">(</span><span class="n">wif</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_wif" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse a WIF (Wallet Import Format) encoded key.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_wif</span><span class="p">(</span><span class="n">wif</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivateKey</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a WIF (Wallet Import Format) encoded key.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58decode</span><span class="p">(</span><span class="n">wif</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid WIF encoding&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">decoded</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="mi">38</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid WIF length&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">33</span><span class="p">]</span>
    <span class="n">compressed</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">decoded</span><span class="p">)</span> <span class="o">==</span> <span class="mi">38</span>
    <span class="k">return</span> <span class="n">PrivateKey</span><span class="p">(</span><span class="n">key</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">compressed</span> <span class="k">else</span> <span class="n">key</span><span class="p">[:</span><span class="mi">32</span><span class="p">],</span> <span class="s2">&quot;BTC&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_with_checksum" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_with_checksum</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_with_checksum" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse an address with a binary prefix and checksum.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_with_checksum</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an address with a binary prefix and checksum.&quot;&quot;&quot;</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58decode</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">decoded</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">+</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid length&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">decoded</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid prefix&quot;</span><span class="p">)</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">verify_checksum</span><span class="p">(</span><span class="n">decoded</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="n">checksum</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.parse_with_prefix" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse_with_prefix</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.parse_with_prefix" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parse an address with a specific prefix and length.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_with_prefix</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an address with a specific prefix and length.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid prefix for </span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58decode</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">):])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">decoded</span><span class="p">)</span> <span class="o">!=</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid length for </span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2"> address&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">verify_checksum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">checksum</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.address_parse.verify_checksum" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_checksum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">checksum</span><span class="p">)</span></code>

<a href="#accumulate.utils.address_parse.verify_checksum" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Verify a double SHA-256 checksum.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\address_parse.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">verify_checksum</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">checksum</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify a double SHA-256 checksum.&quot;&quot;&quot;</span>
    <span class="n">calculated</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()[:</span><span class="mi">4</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">calculated</span> <span class="o">!=</span> <span class="n">checksum</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Invalid checksum&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.config" class="doc doc-heading">
            <code>config</code>


<a href="#accumulate.utils.config" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.config.Config" class="doc doc-heading">
            <code>Config</code>


<a href="#accumulate.utils.config.Config" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Configuration utility for managing environment-specific settings.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\config.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration utility for managing environment-specific settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_testnet</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically get the testnet status based on the environment variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ACCUMULATE_IS_TESTNET&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">initial_acme_oracle</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically get the initial ACME oracle value based on the network type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">5000</span> <span class="k">if</span> <span class="n">Config</span><span class="o">.</span><span class="n">is_testnet</span><span class="p">()</span> <span class="k">else</span> <span class="mf">0.50</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_network_type</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the current network type.</span>
<span class="sd">        :return: &#39;testnet&#39; or &#39;mainnet&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;testnet&quot;</span> <span class="k">if</span> <span class="n">Config</span><span class="o">.</span><span class="n">is_testnet</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;mainnet&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_initial_oracle_value</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the initial ACME oracle value for the configured network.</span>
<span class="sd">        :return: The oracle value as a float.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Config</span><span class="o">.</span><span class="n">initial_acme_oracle</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.config.Config.get_initial_oracle_value" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_initial_oracle_value</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.utils.config.Config.get_initial_oracle_value" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the initial ACME oracle value for the configured network.
:return: The oracle value as a float.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_initial_oracle_value</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the initial ACME oracle value for the configured network.</span>
<span class="sd">    :return: The oracle value as a float.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Config</span><span class="o">.</span><span class="n">initial_acme_oracle</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.config.Config.get_network_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_network_type</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.utils.config.Config.get_network_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the current network type.
:return: 'testnet' or 'mainnet'</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_network_type</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the current network type.</span>
<span class="sd">    :return: &#39;testnet&#39; or &#39;mainnet&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;testnet&quot;</span> <span class="k">if</span> <span class="n">Config</span><span class="o">.</span><span class="n">is_testnet</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;mainnet&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.config.Config.initial_acme_oracle" class="doc doc-heading">
            <code class=" language-python"><span class="n">initial_acme_oracle</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.utils.config.Config.initial_acme_oracle" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Dynamically get the initial ACME oracle value based on the network type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">initial_acme_oracle</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically get the initial ACME oracle value based on the network type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">5000</span> <span class="k">if</span> <span class="n">Config</span><span class="o">.</span><span class="n">is_testnet</span><span class="p">()</span> <span class="k">else</span> <span class="mf">0.50</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.config.Config.is_testnet" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_testnet</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.utils.config.Config.is_testnet" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Dynamically get the testnet status based on the environment variable.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\config.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">is_testnet</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically get the testnet status based on the environment variable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ACCUMULATE_IS_TESTNET&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.eip712" class="doc doc-heading">
            <code>eip712</code>


<a href="#accumulate.utils.eip712" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.eip712.eth_chain_id" class="doc doc-heading">
            <code class=" language-python"><span class="n">eth_chain_id</span><span class="p">(</span><span class="n">network_name</span><span class="p">)</span></code>

<a href="#accumulate.utils.eip712.eth_chain_id" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns the Ethereum chain ID for an Accumulate network name</p>
<p>:param network_name: The name of the network (e.g., "mainnet")
:return: The Ethereum chain ID</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\eip712.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">eth_chain_id</span><span class="p">(</span><span class="n">network_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the Ethereum chain ID for an Accumulate network name</span>

<span class="sd">    :param network_name: The name of the network (e.g., &quot;mainnet&quot;)</span>
<span class="sd">    :return: The Ethereum chain ID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">network_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;mainnet&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">281</span>  <span class="c1"># 0x119</span>

    <span class="n">network_name</span> <span class="o">=</span> <span class="n">network_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">network_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">network_name</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">network_id</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">network_hash</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:],</span> <span class="s2">&quot;big&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">281</span> <span class="o">|</span> <span class="p">(</span><span class="n">network_id</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.eip712.hash_eip712" class="doc doc-heading">
            <code class=" language-python"><span class="n">hash_eip712</span><span class="p">(</span><span class="n">transaction</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

<a href="#accumulate.utils.eip712.hash_eip712" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Hashes an EIP-712 transaction and signature</p>
<p>:param transaction: The transaction object
:param signature: The signature object
:return: SHA-256 hash of the EIP-712 message</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\eip712.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash_eip712</span><span class="p">(</span><span class="n">transaction</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hashes an EIP-712 transaction and signature</span>

<span class="sd">    :param transaction: The transaction object</span>
<span class="sd">    :param signature: The signature object</span>
<span class="sd">    :return: SHA-256 hash of the EIP-712 message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">eip712_message</span> <span class="o">=</span> <span class="n">marshal_eip712</span><span class="p">(</span><span class="n">transaction</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">eip712_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">eip712_message</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">eip712_json</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.eip712.marshal_eip712" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal_eip712</span><span class="p">(</span><span class="n">transaction</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

<a href="#accumulate.utils.eip712.marshal_eip712" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Creates the EIP-712 JSON message for a transaction and signature</p>
<p>:param transaction: The transaction object
:param signature: The signature object
:return: Serialized EIP-712 JSON message</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\eip712.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal_eip712</span><span class="p">(</span><span class="n">transaction</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates the EIP-712 JSON message for a transaction and signature</span>

<span class="sd">    :param transaction: The transaction object</span>
<span class="sd">    :param signature: The signature object</span>
<span class="sd">    :return: Serialized EIP-712 JSON message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serialized_tx</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="n">transaction</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;header&quot;</span><span class="p">,</span> <span class="p">{}),</span>
        <span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="n">signature</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="p">{}),</span>
    <span class="p">}</span>

    <span class="n">body</span> <span class="o">=</span> <span class="n">transaction</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">body_type</span> <span class="o">=</span> <span class="n">transaction</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">body</span> <span class="ow">and</span> <span class="n">body_type</span><span class="p">:</span>
        <span class="n">serialized_tx</span><span class="p">[</span><span class="n">body_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">body</span>

    <span class="k">return</span> <span class="n">serialized_tx</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.fields" class="doc doc-heading">
            <code>fields</code>


<a href="#accumulate.utils.fields" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.BoolField" class="doc doc-heading">
            <code>BoolField</code>


<a href="#accumulate.utils.fields.BoolField" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.fields.Field" href="#accumulate.utils.fields.Field">Field</a></code></p>


        <p>Field for boolean values</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BoolField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field for boolean values&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.DateTimeField" class="doc doc-heading">
            <code>DateTimeField</code>


<a href="#accumulate.utils.fields.DateTimeField" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.fields.Field" href="#accumulate.utils.fields.Field">Field</a></code></p>


        <p>Field for datetime values</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DateTimeField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field for datetime values&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">datetime</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]))</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid datetime format for field </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.DurationField" class="doc doc-heading">
            <code>DurationField</code>


<a href="#accumulate.utils.fields.DurationField" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.fields.Field" href="#accumulate.utils.fields.Field">Field</a></code></p>


        <p>Field for timedelta (duration) values.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DurationField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field for timedelta (duration) values.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a timedelta to a JSON-compatible dictionary&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">seconds</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">seconds</span> <span class="o">+</span> <span class="n">value</span><span class="o">.</span><span class="n">days</span> <span class="o">*</span> <span class="mi">86400</span>  <span class="c1"># Total seconds including days</span>
        <span class="n">nanoseconds</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">microseconds</span> <span class="o">*</span> <span class="mi">1000</span>  <span class="c1"># Convert microseconds to nanoseconds</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="n">seconds</span><span class="p">,</span> <span class="s2">&quot;nanoseconds&quot;</span><span class="p">:</span> <span class="n">nanoseconds</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a JSON-compatible dictionary back to a timedelta&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">seconds</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;seconds&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">nanoseconds</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nanoseconds&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="nb">setattr</span><span class="p">(</span>
                <span class="n">instance</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">seconds</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="n">nanoseconds</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the timedelta is empty (default value)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">==</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.DurationField.from_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.DurationField.from_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert a JSON-compatible dictionary back to a timedelta</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a JSON-compatible dictionary back to a timedelta&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">seconds</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;seconds&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">nanoseconds</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;nanoseconds&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="n">instance</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">seconds</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="n">nanoseconds</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.DurationField.is_empty" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_empty</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.DurationField.is_empty" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the timedelta is empty (default value)</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the timedelta is empty (default value)&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">==</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.DurationField.to_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_json</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.DurationField.to_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert a timedelta to a JSON-compatible dictionary</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a timedelta to a JSON-compatible dictionary&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">seconds</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">seconds</span> <span class="o">+</span> <span class="n">value</span><span class="o">.</span><span class="n">days</span> <span class="o">*</span> <span class="mi">86400</span>  <span class="c1"># Total seconds including days</span>
    <span class="n">nanoseconds</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">microseconds</span> <span class="o">*</span> <span class="mi">1000</span>  <span class="c1"># Convert microseconds to nanoseconds</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="n">seconds</span><span class="p">,</span> <span class="s2">&quot;nanoseconds&quot;</span><span class="p">:</span> <span class="n">nanoseconds</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.Field" class="doc doc-heading">
            <code>Field</code>


<a href="#accumulate.utils.fields.Field" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Base class for field access and validation</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Field</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for field access and validation&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">omit_empty</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="n">required</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="o">=</span> <span class="n">omit_empty</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if a field value is empty&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the field to JSON&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize the field from JSON&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.Field.from_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.Field.from_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize the field from JSON</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize the field from JSON&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.Field.is_empty" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_empty</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.Field.is_empty" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if a field value is empty</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if a field value is empty&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.Field.to_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_json</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.Field.to_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the field to JSON</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize the field to JSON&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.FloatField" class="doc doc-heading">
            <code>FloatField</code>


<a href="#accumulate.utils.fields.FloatField" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.fields.Field" href="#accumulate.utils.fields.Field">Field</a></code></p>


        <p>Field for float values</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FloatField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field for float values&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.IntField" class="doc doc-heading">
            <code>IntField</code>


<a href="#accumulate.utils.fields.IntField" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.fields.Field" href="#accumulate.utils.fields.Field">Field</a></code></p>


        <p>Field for integer values</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">IntField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field for integer values&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.ReadOnlyAccessor" class="doc doc-heading">
            <code>ReadOnlyAccessor</code>


<a href="#accumulate.utils.fields.ReadOnlyAccessor" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Read-only accessor for managing field serialization and equality checks</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReadOnlyAccessor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read-only accessor for managing field serialization and equality checks&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">accessor</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize with a callable that provides access to the field value</span>
<span class="sd">        :param accessor: A callable that takes a parent object and returns the field value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span> <span class="o">=</span> <span class="n">accessor</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the field is empty&quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj1</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">obj2</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if two objects have equal field values&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the field value to a JSON-compatible format&quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;to_dict&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;__dict__&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="vm">__dict__</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot serialize value of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the field value into binary</span>
<span class="sd">        For demonstration, this simply converts the value to bytes if possible</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot write value of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> to binary&quot;</span><span class="p">)</span>

    <span class="c1"># Prevent modifications</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">copy_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dst</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">src</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read-only accessor does not support copying&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ReadOnlyAccessor does not support copying values&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">read_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read-only accessor does not support deserialization&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ReadOnlyAccessor does not support deserialization&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read-only accessor does not support deserialization from JSON&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ReadOnlyAccessor does not support deserialization from JSON&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.__init__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">accessor</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initialize with a callable that provides access to the field value
:param accessor: A callable that takes a parent object and returns the field value</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">accessor</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize with a callable that provides access to the field value</span>
<span class="sd">    :param accessor: A callable that takes a parent object and returns the field value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span> <span class="o">=</span> <span class="n">accessor</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.copy_to" class="doc doc-heading">
            <code class=" language-python"><span class="n">copy_to</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.copy_to" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Read-only accessor does not support copying</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">copy_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dst</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">src</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read-only accessor does not support copying&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ReadOnlyAccessor does not support copying values&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.equal" class="doc doc-heading">
            <code class=" language-python"><span class="n">equal</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.equal" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if two objects have equal field values</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj1</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">obj2</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if two objects have equal field values&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.from_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.from_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Read-only accessor does not support deserialization from JSON</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read-only accessor does not support deserialization from JSON&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ReadOnlyAccessor does not support deserialization from JSON&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.is_empty" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_empty</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.is_empty" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the field is empty</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the field is empty&quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.read_from" class="doc doc-heading">
            <code class=" language-python"><span class="n">read_from</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.read_from" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Read-only accessor does not support deserialization</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read-only accessor does not support deserialization&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;ReadOnlyAccessor does not support deserialization&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.to_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_json</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.to_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the field value to a JSON-compatible format</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the field value to a JSON-compatible format&quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;to_dict&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;__dict__&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="vm">__dict__</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot serialize value of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.ReadOnlyAccessor.write_to" class="doc doc-heading">
            <code class=" language-python"><span class="n">write_to</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.ReadOnlyAccessor.write_to" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize the field value into binary
For demonstration, this simply converts the value to bytes if possible</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize the field value into binary</span>
<span class="sd">    For demonstration, this simply converts the value to bytes if possible</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot write value of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> to binary&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.StringField" class="doc doc-heading">
            <code>StringField</code>


<a href="#accumulate.utils.fields.StringField" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.fields.Field" href="#accumulate.utils.fields.Field">Field</a></code></p>


        <p>Field for string values</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StringField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field for string values&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">omit_empty</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.fields.TimeAccessor" class="doc doc-heading">
            <code>TimeAccessor</code>


<a href="#accumulate.utils.fields.TimeAccessor" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.fields.ReadOnlyAccessor" href="#accumulate.utils.fields.ReadOnlyAccessor">ReadOnlyAccessor</a></code></p>


        <p>Accessor for managing datetime fields</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TimeAccessor</span><span class="p">(</span><span class="n">ReadOnlyAccessor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Accessor for managing datetime fields&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">accessor</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">datetime</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">accessor</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a datetime field to JSON-compatible ISO format&quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">value</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.fields.TimeAccessor.to_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">to_json</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

<a href="#accumulate.utils.fields.TimeAccessor.to_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert a datetime field to JSON-compatible ISO format</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\fields.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a datetime field to JSON-compatible ISO format&quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">value</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.formatting" class="doc doc-heading">
            <code>formatting</code>


<a href="#accumulate.utils.formatting" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting._calculate_checksum" class="doc doc-heading">
            <code class=" language-python"><span class="n">_calculate_checksum</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting._calculate_checksum" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Calculates a double SHA-256 checksum</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_calculate_checksum</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates a double SHA-256 checksum&quot;&quot;&quot;</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">checksum</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()[:</span><span class="mi">4</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting._format_with_checksum" class="doc doc-heading">
            <code class=" language-python"><span class="n">_format_with_checksum</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting._format_with_checksum" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats the address with a checksum</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_format_with_checksum</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats the address with a checksum&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">hash_bytes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Hash bytes cannot be empty&quot;</span><span class="p">)</span> <span class="c1">#</span>

    <span class="n">address</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">hash_bytes</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">_calculate_checksum</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">+=</span> <span class="n">checksum</span>
    <span class="k">return</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58encode</span><span class="p">(</span><span class="n">address</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting._format_with_prefix" class="doc doc-heading">
            <code class=" language-python"><span class="n">_format_with_prefix</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting._format_with_prefix" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats the address with a prefix and checksum</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_format_with_prefix</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats the address with a prefix and checksum&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">hash_bytes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Hash bytes cannot be empty&quot;</span><span class="p">)</span> <span class="c1">#</span>

    <span class="n">address</span> <span class="o">=</span> <span class="n">prefix</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="n">hash_bytes</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">_calculate_checksum</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">+=</span> <span class="n">checksum</span>
    <span class="k">return</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58encode</span><span class="p">(</span><span class="n">address</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">):])</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting._hash_with_algorithm" class="doc doc-heading">
            <code class=" language-python"><span class="n">_hash_with_algorithm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">algorithm</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting._hash_with_algorithm" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Hashes data using the specified algorithm</p>
<p>:param data: Data to hash
:param algorithm: Hashing algorithm (e.g., 'sha256', 'sha512').
:return: Hashed bytes</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_hash_with_algorithm</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">algorithm</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hashes data using the specified algorithm</span>

<span class="sd">    :param data: Data to hash</span>
<span class="sd">    :param algorithm: Hashing algorithm (e.g., &#39;sha256&#39;, &#39;sha512&#39;).</span>
<span class="sd">    :return: Hashed bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">algorithms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;sha256&quot;</span><span class="p">:</span> <span class="n">hashes</span><span class="o">.</span><span class="n">SHA256</span><span class="p">,</span>
        <span class="s2">&quot;sha512&quot;</span><span class="p">:</span> <span class="n">hashes</span><span class="o">.</span><span class="n">SHA512</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">algorithm</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">algorithms</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported hash algorithm: </span><span class="si">{</span><span class="n">algorithm</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">digest</span> <span class="o">=</span> <span class="n">hashes</span><span class="o">.</span><span class="n">Hash</span><span class="p">(</span><span class="n">algorithms</span><span class="p">[</span><span class="n">algorithm</span><span class="p">](),</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">())</span>
    <span class="n">digest</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">digest</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_ac1" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_ac1</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_ac1" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats an Accumulate AC1 (ed25519) public key hash</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_ac1</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats an Accumulate AC1 (ed25519) public key hash&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_prefix</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="s2">&quot;AC1&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_ac2" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_ac2</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_ac2" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats an Accumulate AC2 (ecdsa) public key hash</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_ac2</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats an Accumulate AC2 (ecdsa) public key hash&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_prefix</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="s2">&quot;AC2&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_ac3" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_ac3</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_ac3" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats an Accumulate AC3 (rsa) public key hash</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_ac3</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats an Accumulate AC3 (rsa) public key hash&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_prefix</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="s2">&quot;AC3&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_as1" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_as1</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_as1" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats an Accumulate AS1 (ed25519) private key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_as1</span><span class="p">(</span><span class="n">seed</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats an Accumulate AS1 (ed25519) private key&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_prefix</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="s2">&quot;AS1&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_as2" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_as2</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_as2" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats an Accumulate AS2 (ecdsa) private key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_as2</span><span class="p">(</span><span class="n">seed</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats an Accumulate AS2 (ecdsa) private key&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_prefix</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="s2">&quot;AS2&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_as3" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_as3</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_as3" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats an Accumulate AS3 (rsa) private key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_as3</span><span class="p">(</span><span class="n">seed</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats an Accumulate AS3 (rsa) private key&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_prefix</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="s2">&quot;AS3&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_btc" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_btc</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_btc" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats a Bitcoin P2PKH address prefixed with 'BT'</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_btc</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats a Bitcoin P2PKH address prefixed with &#39;BT&#39;&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;BT&quot;</span> <span class="o">+</span> <span class="n">_format_with_checksum</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_eth" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_eth</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_eth" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats an Ethereum address</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_eth</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats an Ethereum address&quot;&quot;&quot;</span>
    <span class="c1"># Ensure the hash is exactly 20 bytes long by truncating or padding with zeros</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">hash_bytes</span> <span class="o">=</span> <span class="n">hash_bytes</span><span class="p">[</span><span class="o">-</span><span class="mi">20</span><span class="p">:]</span>  <span class="c1"># Take the last 20 bytes #</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">hash_bytes</span> <span class="o">=</span> <span class="n">hash_bytes</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Pad with leading zeros</span>

    <span class="c1"># Convert to hex and prepend the &#39;0x&#39; prefix</span>
    <span class="k">return</span> <span class="s2">&quot;0x&quot;</span> <span class="o">+</span> <span class="n">hash_bytes</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_fa" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_fa</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_fa" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats a Factom FA public key hash</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_fa</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats a Factom FA public key hash&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_checksum</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x5f\xb1</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_fs" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_fs</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_fs" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats a Factom Fs private key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_fs</span><span class="p">(</span><span class="n">seed</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats a Factom Fs private key&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_format_with_checksum</span><span class="p">(</span><span class="n">seed</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x64\x78</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.formatting.format_mh" class="doc doc-heading">
            <code class=" language-python"><span class="n">format_mh</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;sha256&#39;</span><span class="p">)</span></code>

<a href="#accumulate.utils.formatting.format_mh" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Formats a hash using a specified hashing algorithm and appends a checksum</p>
<p>:param hash_bytes: Input data to be hashed
:param code: Hashing algorithm (e.g., 'sha256', 'sha512')
:return: Multihash-formatted string</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\formatting.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_mh</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;sha256&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Formats a hash using a specified hashing algorithm and appends a checksum</span>

<span class="sd">    :param hash_bytes: Input data to be hashed</span>
<span class="sd">    :param code: Hashing algorithm (e.g., &#39;sha256&#39;, &#39;sha512&#39;)</span>
<span class="sd">    :return: Multihash-formatted string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">hash_bytes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Hash bytes cannot be empty&quot;</span><span class="p">)</span>

    <span class="c1"># Hash the input using the specified algorithm</span>
    <span class="n">hashed_data</span> <span class="o">=</span> <span class="n">_hash_with_algorithm</span><span class="p">(</span><span class="n">hash_bytes</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>

    <span class="c1"># Add checksum</span>
    <span class="n">checksum</span> <span class="o">=</span> <span class="n">_calculate_checksum</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;MH&quot;</span> <span class="o">+</span> <span class="n">hashed_data</span><span class="p">)</span>
    <span class="n">hashed_data</span> <span class="o">+=</span> <span class="n">checksum</span>

    <span class="c1"># Encode with base58 and add &#39;MH&#39; prefix</span>
    <span class="k">return</span> <span class="s2">&quot;MH&quot;</span> <span class="o">+</span> <span class="n">base58</span><span class="o">.</span><span class="n">b58encode</span><span class="p">(</span><span class="n">hashed_data</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.import_helpers" class="doc doc-heading">
            <code>import_helpers</code>


<a href="#accumulate.utils.import_helpers" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.import_helpers.get_signer" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_signer</span><span class="p">()</span></code>

<a href="#accumulate.utils.import_helpers.get_signer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Dynamically import <code>Signer</code> to prevent circular imports.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\import_helpers.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_signer</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dynamically import `Signer` to prevent circular imports.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.signing.signer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Signer</span>
    <span class="k">return</span> <span class="n">Signer</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.import_helpers.is_lite_account_lazy" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_lite_account_lazy</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.utils.import_helpers.is_lite_account_lazy" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Lazy-load <code>is_lite_account()</code> to prevent circular imports.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\import_helpers.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_lite_account_lazy</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lazy-load `is_lite_account()` to prevent circular imports.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.validation</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_lite_account</span>
    <span class="k">return</span> <span class="n">is_lite_account</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.import_helpers.query_signer_version" class="doc doc-heading">
            <code class=" language-python"><span class="n">query_signer_version</span><span class="p">(</span><span class="n">account_url</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.utils.import_helpers.query_signer_version" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Fetch the signer version from the network API using AccumulateClient.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\import_helpers.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_signer_version</span><span class="p">(</span><span class="n">account_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;AccumulateClient&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetch the signer version from the network API using AccumulateClient.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.api.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">AccumulateClient</span>  
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_accumulate_rpc_url</span>  
        <span class="n">client</span> <span class="o">=</span> <span class="n">AccumulateClient</span><span class="p">(</span><span class="n">get_accumulate_rpc_url</span><span class="p">())</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Querying signer version for </span><span class="si">{</span><span class="n">account_url</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

        <span class="n">query_type</span> <span class="o">=</span> <span class="s2">&quot;liteIdentity&quot;</span> <span class="k">if</span> <span class="n">is_lite_account_lazy</span><span class="p">(</span><span class="n">account_url</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;default&quot;</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">account_url</span><span class="p">),</span> <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;queryType&quot;</span><span class="p">:</span> <span class="n">query_type</span><span class="p">}}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">json_rpc_request</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

        <span class="n">signer_version</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;account&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signerVersion&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Signer version for </span><span class="si">{</span><span class="n">account_url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">signer_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">signer_version</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Failed to fetch signer version for </span><span class="si">{</span><span class="n">account_url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Return None instead of 1 to indicate an error</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.protocols" class="doc doc-heading">
            <code>protocols</code>


<a href="#accumulate.utils.protocols" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.protocols.BinaryValue" class="doc doc-heading">
            <code>BinaryValue</code>


<a href="#accumulate.utils.protocols.BinaryValue" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>


        <p>Protocol for objects supporting binary serialization and deserialization.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\protocols.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@runtime_checkable</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BinaryValue</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Protocol for objects supporting binary serialization and deserialization.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize to binary format.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;marshal_binary must be implemented&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize from binary format.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;unmarshal_binary must be implemented&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">copy_as_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a copy of the instance.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;copy_as_interface must be implemented&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_binary_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reader</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unmarshal binary data from a stream.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;unmarshal_binary_from must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.protocols.BinaryValue.copy_as_interface" class="doc doc-heading">
            <code class=" language-python"><span class="n">copy_as_interface</span><span class="p">()</span></code>

<a href="#accumulate.utils.protocols.BinaryValue.copy_as_interface" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a copy of the instance.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\protocols.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">copy_as_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a copy of the instance.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;copy_as_interface must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.protocols.BinaryValue.marshal_binary" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal_binary</span><span class="p">()</span></code>

<a href="#accumulate.utils.protocols.BinaryValue.marshal_binary" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Serialize to binary format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\protocols.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize to binary format.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;marshal_binary must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.protocols.BinaryValue.unmarshal_binary" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal_binary</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.utils.protocols.BinaryValue.unmarshal_binary" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deserialize from binary format.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\protocols.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deserialize from binary format.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;unmarshal_binary must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.protocols.BinaryValue.unmarshal_binary_from" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal_binary_from</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span></code>

<a href="#accumulate.utils.protocols.BinaryValue.unmarshal_binary_from" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Unmarshal binary data from a stream.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\protocols.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_binary_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reader</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Unmarshal binary data from a stream.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;unmarshal_binary_from must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.protocols.UnionValue" class="doc doc-heading">
            <code>UnionValue</code>


<a href="#accumulate.utils.protocols.UnionValue" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.protocols.BinaryValue" href="#accumulate.utils.protocols.BinaryValue">BinaryValue</a></code>, <code><span title="typing.Protocol">Protocol</span></code></p>


        <p>Protocol for objects supporting field unmarshaling.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\protocols.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@runtime_checkable</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UnionValue</span><span class="p">(</span><span class="n">BinaryValue</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Protocol for objects supporting field unmarshaling.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_fields_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reader</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unmarshal fields from a binary stream.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;unmarshal_fields_from must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.protocols.UnionValue.unmarshal_fields_from" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal_fields_from</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span></code>

<a href="#accumulate.utils.protocols.UnionValue.unmarshal_fields_from" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Unmarshal fields from a binary stream.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\protocols.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_fields_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reader</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Unmarshal fields from a binary stream.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;unmarshal_fields_from must be implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.rational" class="doc doc-heading">
            <code>rational</code>


<a href="#accumulate.utils.rational" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.rational.Rational" class="doc doc-heading">
            <code>Rational</code>


<a href="#accumulate.utils.rational.Rational" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\utils\rational.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Rational</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">denominator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">denominator</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Denominator cannot be zero&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">=</span> <span class="n">numerator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="n">denominator</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">denominator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the numerator and denominator of the rational value&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">denominator</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Denominator cannot be zero&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">=</span> <span class="n">numerator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="n">denominator</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the threshold based on the ratio and key count</span>
<span class="sd">        Equivalent to keyCount * numerator / denominator, rounded up</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key_count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Key count cannot be negative&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">key_count</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Rational(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">numerator</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">denominator</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.rational.Rational.set" class="doc doc-heading">
            <code class=" language-python"><span class="nb">set</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span></code>

<a href="#accumulate.utils.rational.Rational.set" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the numerator and denominator of the rational value</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\rational.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">denominator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the numerator and denominator of the rational value&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">denominator</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Denominator cannot be zero&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">=</span> <span class="n">numerator</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="n">denominator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.rational.Rational.threshold" class="doc doc-heading">
            <code class=" language-python"><span class="n">threshold</span><span class="p">(</span><span class="n">key_count</span><span class="p">)</span></code>

<a href="#accumulate.utils.rational.Rational.threshold" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculate the threshold based on the ratio and key count
Equivalent to keyCount * numerator / denominator, rounded up</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\rational.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the threshold based on the ratio and key count</span>
<span class="sd">    Equivalent to keyCount * numerator / denominator, rounded up</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">key_count</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Key count cannot be negative&quot;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">key_count</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.union" class="doc doc-heading">
            <code>union</code>


<a href="#accumulate.utils.union" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.union.UnionValue" class="doc doc-heading">
            <code>UnionValue</code>


<a href="#accumulate.utils.union.UnionValue" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>A Pythonic implementation for managing values with multiple representations,
inspired by Go's UnionValue interface</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\union.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UnionValue</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Pythonic implementation for managing values with multiple representations,</span>
<span class="sd">    inspired by Go&#39;s UnionValue interface</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the value to its binary representation&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot marshal value to binary&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the value from its binary representation&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">marshal_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the value to its JSON representation&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Value cannot be converted to JSON&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the value from its JSON representation&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid JSON representation&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UnionValue&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a copy of the current UnionValue&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnionValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check equality between two UnionValue instances&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">UnionValue</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow the UnionValue to be used in hashable collections&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Human-readable representation&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;UnionValue(value=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.__eq__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#accumulate.utils.union.UnionValue.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check equality between two UnionValue instances</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check equality between two UnionValue instances&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">UnionValue</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.__hash__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__hash__</span><span class="p">()</span></code>

<a href="#accumulate.utils.union.UnionValue.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Allow the UnionValue to be used in hashable collections</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Allow the UnionValue to be used in hashable collections&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.__repr__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

<a href="#accumulate.utils.union.UnionValue.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Human-readable representation</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Human-readable representation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;UnionValue(value=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.copy" class="doc doc-heading">
            <code class=" language-python"><span class="n">copy</span><span class="p">()</span></code>

<a href="#accumulate.utils.union.UnionValue.copy" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a copy of the current UnionValue</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UnionValue&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a copy of the current UnionValue&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">UnionValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.marshal_binary" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal_binary</span><span class="p">()</span></code>

<a href="#accumulate.utils.union.UnionValue.marshal_binary" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the value to its binary representation</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the value to its binary representation&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot marshal value to binary&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.marshal_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">marshal_json</span><span class="p">()</span></code>

<a href="#accumulate.utils.union.UnionValue.marshal_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the value to its JSON representation</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">marshal_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the value to its JSON representation&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Value cannot be converted to JSON&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.unmarshal_binary" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal_binary</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.utils.union.UnionValue.unmarshal_binary" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the value from its binary representation</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the value from its binary representation&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.union.UnionValue.unmarshal_json" class="doc doc-heading">
            <code class=" language-python"><span class="n">unmarshal_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#accumulate.utils.union.UnionValue.unmarshal_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Set the value from its JSON representation</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\union.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unmarshal_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the value from its JSON representation&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid JSON representation&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.url" class="doc doc-heading">
            <code>url</code>


<a href="#accumulate.utils.url" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.url.InvalidHashError" class="doc doc-heading">
            <code>InvalidHashError</code>


<a href="#accumulate.utils.url.InvalidHashError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.url.URLParseError" href="#accumulate.utils.url.URLParseError">URLParseError</a></code></p>


        <p>Raised when a transaction ID includes an invalid hash</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\url.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">InvalidHashError</span><span class="p">(</span><span class="n">URLParseError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when a transaction ID includes an invalid hash&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.url.MissingHashError" class="doc doc-heading">
            <code>MissingHashError</code>


<a href="#accumulate.utils.url.MissingHashError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.url.URLParseError" href="#accumulate.utils.url.URLParseError">URLParseError</a></code></p>


        <p>Raised when a transaction ID does not include a hash</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\url.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MissingHashError</span><span class="p">(</span><span class="n">URLParseError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when a transaction ID does not include a hash&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.url.MissingHostError" class="doc doc-heading">
            <code>MissingHostError</code>


<a href="#accumulate.utils.url.MissingHostError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.url.URLParseError" href="#accumulate.utils.url.URLParseError">URLParseError</a></code></p>


        <p>Raised when a URL does not include a hostname</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\url.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MissingHostError</span><span class="p">(</span><span class="n">URLParseError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when a URL does not include a hostname&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.url.URL" class="doc doc-heading">
            <code>URL</code>


<a href="#accumulate.utils.url.URL" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\utils\url.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">URL</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">fragment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_info</span> <span class="o">=</span> <span class="n">user_info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authority</span> <span class="o">=</span> <span class="n">authority</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_path</span><span class="p">(</span><span class="n">path</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fragment</span> <span class="o">=</span> <span class="n">fragment</span>

        <span class="c1"># Memoized values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_account_id_cache</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_identity_id_cache</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_normalize_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Normalize a path to ensure it is clean and starts with a &#39;/&#39;.&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">path</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>



    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse a string into an Accumulate URL&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Starting parse method with URL string: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Validate input</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url_str</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Received empty URL string&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;URL string cannot be empty&quot;</span><span class="p">)</span>

        <span class="c1"># Ensure correct scheme</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid scheme detected. URL must start with &#39;acc://&#39;, got: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">wrong_scheme</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

        <span class="c1"># Normalize URL by removing redundant prefixes</span>
        <span class="n">original_url_str</span> <span class="o">=</span> <span class="n">url_str</span>
        <span class="k">while</span> <span class="n">url_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://acc://&quot;</span><span class="p">):</span>
            <span class="n">url_str</span> <span class="o">=</span> <span class="n">url_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;acc://acc://&quot;</span><span class="p">,</span> <span class="s2">&quot;acc://&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url_str</span> <span class="o">!=</span> <span class="n">original_url_str</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Normalized URL by removing redundant prefixes. Before: </span><span class="si">{</span><span class="n">original_url_str</span><span class="si">}</span><span class="s2">, After: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: No redundant prefixes detected in URL string: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Prevent URLs from ending with &#39;@&#39;</span>
        <span class="k">if</span> <span class="n">url_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WARNING: URL ends with &#39;@&#39;. Cleaning it up: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">url_str</span> <span class="o">=</span> <span class="n">url_str</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>

        <span class="c1"># Parse components using urllib</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsing URL components using urllib.parse: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed URL result: </span><span class="si">{</span><span class="n">parsed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Verify scheme consistency</span>
        <span class="k">if</span> <span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span> <span class="o">!=</span> <span class="s2">&quot;acc&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">wrong_scheme</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

        <span class="c1"># Ensure a valid netloc (authority)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Parsed URL missing authority component. URL: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">, netloc: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid URL: Authority cannot be empty&quot;</span><span class="p">)</span>

        <span class="c1"># Validate and handle user_info and authority</span>
        <span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Initial netloc value: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: &#39;@&#39; character found in netloc. Splitting into user_info and authority.&quot;</span><span class="p">)</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid &#39;@&#39; usage in netloc. Netloc: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid URL: &#39;@&#39; must separate valid user info and authority.&quot;</span><span class="p">)</span>
            <span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span> <span class="o">=</span> <span class="n">parts</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Extracted user_info: </span><span class="si">{</span><span class="n">user_info</span><span class="si">}</span><span class="s2">, authority: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: No user_info detected in netloc. Authority: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Ensure the authority is not empty</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">authority</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid URL: Authority cannot be empty.&quot;</span><span class="p">)</span>

        <span class="c1"># Reject .com domains in the authority</span>
        <span class="k">if</span> <span class="n">authority</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.com&quot;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Authority ends with &#39;.com&#39;, which is not allowed: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid authority domain: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">. Domains ending with &#39;.com&#39; are not allowed.&quot;</span><span class="p">)</span>

        <span class="c1">#  Carefully ensure the authority **ALWAYS** starts with `acc://` but **DO NOT** duplicate it</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
            <span class="n">authority</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Finalized components - user_info: </span><span class="si">{</span><span class="n">user_info</span><span class="si">}</span><span class="s2">, authority: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">, path: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">, query: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s2">, fragment: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">fragment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span>
            <span class="n">user_info</span><span class="o">=</span><span class="n">user_info</span><span class="p">,</span>
            <span class="n">authority</span><span class="o">=</span><span class="n">authority</span><span class="p">,</span>  <span class="c1">#  Always ensures &quot;acc://&quot; is part of authority</span>
            <span class="n">path</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
            <span class="n">query</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
            <span class="n">fragment</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">fragment</span><span class="p">,</span>
        <span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">marshal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;@&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Marshaling URL to string: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url_str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unmarshal</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Unmarshaling URL from string: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">components</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1">#  Preserve user_info if present</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="p">:</span>
                <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span> <span class="o">+</span> <span class="s2">&quot;@&quot;</span><span class="p">)</span>

            <span class="c1">#  Ensure authority **always** starts with &quot;acc://&quot;, but avoid duplication</span>
            <span class="n">authority</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
                <span class="n">authority</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span>

            <span class="c1">#  Append path if present</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
                <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

            <span class="c1">#  Append query if present</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">:</span>
                <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;?</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1">#  Append fragment if present</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">:</span>
                <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1">#  Construct final URL string and cache it</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str_cache</span>



    <span class="k">def</span><span class="w"> </span><span class="nf">is_key_page_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the URL represents a valid key page.&quot;&quot;&quot;</span>
        <span class="n">path_parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="c1">#</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">path_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span> <span class="c1">#</span>
            <span class="k">return</span> <span class="kc">True</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="kc">False</span> <span class="c1">#</span>


    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Equality operator for URLs (case-insensitive).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">URL</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Comparison operator for URLs.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_user_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_info</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new URL with modified user info.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">user_info</span><span class="o">=</span><span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new URL with modified path.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">user_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new URL with modified query.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">user_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strip_extras</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a URL with only the authority and path.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">root_identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the root identity (authority only).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">)</span> <span class="c1">#</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the Accumulate Digital Identity (ADI), which is the root authority.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Original path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># The ADI is just the authority, no path.</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Returning identity URL: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">authority</span><span class="si">}</span><span class="s2"> with path: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">account_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate the Account ID hash.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account_id_cache</span><span class="p">:</span>
            <span class="n">normalized</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_account_id_cache</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">normalized</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account_id_cache</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">identity_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate the Identity ID hash.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identity_id_cache</span><span class="p">:</span>
            <span class="n">normalized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_identity_id_cache</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">normalized</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identity_id_cache</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a hash of the entire URL.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span><span class="p">:</span>
            <span class="n">account_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_id</span><span class="p">()</span>
            <span class="n">query_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
            <span class="n">fragment_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fragment</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">account_hash</span> <span class="o">+</span> <span class="n">query_hash</span> <span class="o">+</span> <span class="n">fragment_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">valid_utf8</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that all components are UTF-8.&quot;&quot;&quot;</span>
        <span class="n">components</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">comp</span><span class="p">:</span>
                    <span class="n">comp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">UnicodeEncodeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.__eq__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#accumulate.utils.url.URL.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Equality operator for URLs (case-insensitive).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Equality operator for URLs (case-insensitive).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">URL</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.__lt__" class="doc doc-heading">
            <code class=" language-python"><span class="fm">__lt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#accumulate.utils.url.URL.__lt__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Comparison operator for URLs.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Comparison operator for URLs.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL._normalize_path" class="doc doc-heading">
            <code class=" language-python"><span class="n">_normalize_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.utils.url.URL._normalize_path" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Normalize a path to ensure it is clean and starts with a '/'.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_normalize_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Normalize a path to ensure it is clean and starts with a &#39;/&#39;.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">path</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.account_id" class="doc doc-heading">
            <code class=" language-python"><span class="n">account_id</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.account_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate the Account ID hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">account_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate the Account ID hash.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account_id_cache</span><span class="p">:</span>
        <span class="n">normalized</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_account_id_cache</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">normalized</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_account_id_cache</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.hash" class="doc doc-heading">
            <code class=" language-python"><span class="nb">hash</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate a hash of the entire URL.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a hash of the entire URL.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span><span class="p">:</span>
        <span class="n">account_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_id</span><span class="p">()</span>
        <span class="n">query_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="n">fragment_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fragment</span> <span class="k">else</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">account_hash</span> <span class="o">+</span> <span class="n">query_hash</span> <span class="o">+</span> <span class="n">fragment_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.identity" class="doc doc-heading">
            <code class=" language-python"><span class="n">identity</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.identity" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the Accumulate Digital Identity (ADI), which is the root authority.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the Accumulate Digital Identity (ADI), which is the root authority.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Original path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># The ADI is just the authority, no path.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Returning identity URL: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">authority</span><span class="si">}</span><span class="s2"> with path: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.identity_id" class="doc doc-heading">
            <code class=" language-python"><span class="n">identity_id</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.identity_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate the Identity ID hash.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">identity_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate the Identity ID hash.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identity_id_cache</span><span class="p">:</span>
        <span class="n">normalized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_identity_id_cache</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">normalized</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identity_id_cache</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.is_key_page_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_key_page_url</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.is_key_page_url" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the URL represents a valid key page.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_key_page_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the URL represents a valid key page.&quot;&quot;&quot;</span>
    <span class="n">path_parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="c1">#</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">path_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span> <span class="c1">#</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="c1">#</span>
    <span class="k">return</span> <span class="kc">False</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.parse" class="doc doc-heading">
            <code class=" language-python"><span class="n">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.utils.url.URL.parse" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Parse a string into an Accumulate URL</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="n">url_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a string into an Accumulate URL&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Starting parse method with URL string: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Validate input</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url_str</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Received empty URL string&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;URL string cannot be empty&quot;</span><span class="p">)</span>

    <span class="c1"># Ensure correct scheme</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid scheme detected. URL must start with &#39;acc://&#39;, got: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">wrong_scheme</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

    <span class="c1"># Normalize URL by removing redundant prefixes</span>
    <span class="n">original_url_str</span> <span class="o">=</span> <span class="n">url_str</span>
    <span class="k">while</span> <span class="n">url_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://acc://&quot;</span><span class="p">):</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="n">url_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;acc://acc://&quot;</span><span class="p">,</span> <span class="s2">&quot;acc://&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">url_str</span> <span class="o">!=</span> <span class="n">original_url_str</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Normalized URL by removing redundant prefixes. Before: </span><span class="si">{</span><span class="n">original_url_str</span><span class="si">}</span><span class="s2">, After: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: No redundant prefixes detected in URL string: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Prevent URLs from ending with &#39;@&#39;</span>
    <span class="k">if</span> <span class="n">url_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WARNING: URL ends with &#39;@&#39;. Cleaning it up: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">url_str</span> <span class="o">=</span> <span class="n">url_str</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>

    <span class="c1"># Parse components using urllib</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsing URL components using urllib.parse: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">parsed</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Parsed URL result: </span><span class="si">{</span><span class="n">parsed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Verify scheme consistency</span>
    <span class="k">if</span> <span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span> <span class="o">!=</span> <span class="s2">&quot;acc&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">wrong_scheme</span><span class="p">(</span><span class="n">url_str</span><span class="p">)</span>

    <span class="c1"># Ensure a valid netloc (authority)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Parsed URL missing authority component. URL: </span><span class="si">{</span><span class="n">url_str</span><span class="si">}</span><span class="s2">, netloc: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid URL: Authority cannot be empty&quot;</span><span class="p">)</span>

    <span class="c1"># Validate and handle user_info and authority</span>
    <span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Initial netloc value: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: &#39;@&#39; character found in netloc. Splitting into user_info and authority.&quot;</span><span class="p">)</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Invalid &#39;@&#39; usage in netloc. Netloc: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid URL: &#39;@&#39; must separate valid user info and authority.&quot;</span><span class="p">)</span>
        <span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span> <span class="o">=</span> <span class="n">parts</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Extracted user_info: </span><span class="si">{</span><span class="n">user_info</span><span class="si">}</span><span class="s2">, authority: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: No user_info detected in netloc. Authority: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Ensure the authority is not empty</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">authority</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid URL: Authority cannot be empty.&quot;</span><span class="p">)</span>

    <span class="c1"># Reject .com domains in the authority</span>
    <span class="k">if</span> <span class="n">authority</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.com&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Authority ends with &#39;.com&#39;, which is not allowed: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid authority domain: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">. Domains ending with &#39;.com&#39; are not allowed.&quot;</span><span class="p">)</span>

    <span class="c1">#  Carefully ensure the authority **ALWAYS** starts with `acc://` but **DO NOT** duplicate it</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
        <span class="n">authority</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DEBUG: Finalized components - user_info: </span><span class="si">{</span><span class="n">user_info</span><span class="si">}</span><span class="s2">, authority: </span><span class="si">{</span><span class="n">authority</span><span class="si">}</span><span class="s2">, path: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">, query: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s2">, fragment: </span><span class="si">{</span><span class="n">parsed</span><span class="o">.</span><span class="n">fragment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span>
        <span class="n">user_info</span><span class="o">=</span><span class="n">user_info</span><span class="p">,</span>
        <span class="n">authority</span><span class="o">=</span><span class="n">authority</span><span class="p">,</span>  <span class="c1">#  Always ensures &quot;acc://&quot; is part of authority</span>
        <span class="n">path</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
        <span class="n">query</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
        <span class="n">fragment</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">fragment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.root_identity" class="doc doc-heading">
            <code class=" language-python"><span class="n">root_identity</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.root_identity" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the root identity (authority only).</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">root_identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the root identity (authority only).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">)</span> <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.strip_extras" class="doc doc-heading">
            <code class=" language-python"><span class="n">strip_extras</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.strip_extras" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return a URL with only the authority and path.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">strip_extras</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a URL with only the authority and path.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.valid_utf8" class="doc doc-heading">
            <code class=" language-python"><span class="n">valid_utf8</span><span class="p">()</span></code>

<a href="#accumulate.utils.url.URL.valid_utf8" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate that all components are UTF-8.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">valid_utf8</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate that all components are UTF-8.&quot;&quot;&quot;</span>
    <span class="n">components</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">comp</span><span class="p">:</span>
                <span class="n">comp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">UnicodeEncodeError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.with_path" class="doc doc-heading">
            <code class=" language-python"><span class="n">with_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

<a href="#accumulate.utils.url.URL.with_path" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return a new URL with modified path.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new URL with modified path.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">user_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.with_query" class="doc doc-heading">
            <code class=" language-python"><span class="n">with_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

<a href="#accumulate.utils.url.URL.with_query" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return a new URL with modified query.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new URL with modified query.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">user_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.utils.url.URL.with_user_info" class="doc doc-heading">
            <code class=" language-python"><span class="n">with_user_info</span><span class="p">(</span><span class="n">user_info</span><span class="p">)</span></code>

<a href="#accumulate.utils.url.URL.with_user_info" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return a new URL with modified user info.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\url.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_user_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_info</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;URL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new URL with modified user info.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">user_info</span><span class="o">=</span><span class="n">user_info</span><span class="p">,</span> <span class="n">authority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">authority</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fragment</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.url.URLParseError" class="doc doc-heading">
            <code>URLParseError</code>


<a href="#accumulate.utils.url.URLParseError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Base class for URL parsing errors</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\url.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">URLParseError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for URL parsing errors&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.utils.url.WrongSchemeError" class="doc doc-heading">
            <code>WrongSchemeError</code>


<a href="#accumulate.utils.url.WrongSchemeError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.utils.url.URLParseError" href="#accumulate.utils.url.URLParseError">URLParseError</a></code></p>


        <p>Raised when a URL includes an invalid scheme</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\utils\url.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WrongSchemeError</span><span class="p">(</span><span class="n">URLParseError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when a URL includes an invalid scheme&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.utils.validation" class="doc doc-heading">
            <code>validation</code>


<a href="#accumulate.utils.validation" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.validation.is_lite_account" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_lite_account</span><span class="p">(</span><span class="n">account_type</span><span class="p">)</span></code>

<a href="#accumulate.utils.validation.is_lite_account" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Returns True if the account type is a Lite Account.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\validation.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_lite_account</span><span class="p">(</span><span class="n">account_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns True if the account type is a Lite Account.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">account_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;liteidentity&quot;</span><span class="p">,</span> <span class="s2">&quot;litetokenaccount&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.validation.is_reserved_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_reserved_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.utils.validation.is_reserved_url" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Checks if a URL object or string is reserved.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\validation.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_reserved_url</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a URL object or string is reserved.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
                <span class="n">authority</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="n">authority</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">authority</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Strip the scheme prefix if present</span>
    <span class="k">if</span> <span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
        <span class="n">authority</span> <span class="o">=</span> <span class="n">authority</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):]</span>

    <span class="n">reserved_keywords</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;dn&quot;</span><span class="p">,</span> <span class="s2">&quot;bvn-&quot;</span><span class="p">}</span>
    <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">authority</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">reserved_keywords</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.validation.is_valid_adi_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">is_valid_adi_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">allow_reserved</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#accumulate.utils.validation.is_valid_adi_url" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Validates an ADI URL according to protocol rules.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\validation.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid_adi_url</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">allow_reserved</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates an ADI URL according to protocol rules.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">500</span><span class="p">:</span>  <span class="c1"># Max length</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Check reserved URLs</span>
    <span class="k">if</span> <span class="n">is_reserved_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">allow_reserved</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Ensure it ends with &#39;.acme&#39;</span>
    <span class="n">tld</span> <span class="o">=</span> <span class="s2">&quot;.acme&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">tld</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">authority</span> <span class="o">=</span> <span class="n">url</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">tld</span><span class="p">)]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">authority</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">authority</span><span class="p">):</span>
        <span class="c1"># Must not be empty or all digits</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span> <span class="o">==</span> <span class="mi">48</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[a-fA-F0-9]</span><span class="si">{48}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">authority</span><span class="p">):</span>
        <span class="c1"># Must not be exactly 48 hexadecimal characters</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">authority</span><span class="p">:</span>
        <span class="c1"># Subdomains are not allowed</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Must contain only valid characters</span>
    <span class="n">valid_chars</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s2">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">valid_chars</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.validation.process_signer_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">process_signer_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.utils.validation.process_signer_url" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Determines if a signer is a Lite Identity, Key Page, or ADI and fetches signer version</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>{
"url": str (Processed signer URL),
"signer_type": str ("liteIdentity", "keyPage", "adi"),
"signer_version": int (1 for Lite, actual version for Key Page)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>}</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\validation.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_signer_url</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;AccumulateClient&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines if a signer is a Lite Identity, Key Page, or ADI and fetches signer version</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: {</span>
<span class="sd">            &quot;url&quot;: str (Processed signer URL),</span>
<span class="sd">            &quot;signer_type&quot;: str (&quot;liteIdentity&quot;, &quot;keyPage&quot;, &quot;adi&quot;),</span>
<span class="sd">            &quot;signer_version&quot;: int (1 for Lite, actual version for Key Page)</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.api.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">AccumulateClient</span>  
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_accumulate_rpc_url</span>  
        <span class="n">client</span> <span class="o">=</span> <span class="n">AccumulateClient</span><span class="p">(</span><span class="n">get_accumulate_rpc_url</span><span class="p">())</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Querying Accumulate API for signer account type and version: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1">#  Query the Accumulate API</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">query_type</span><span class="o">=</span><span class="n">QueryType</span><span class="o">.</span><span class="n">DEFAULT</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="n">query</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">AccountRecord</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;account&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unexpected response format for </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;signer_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;signer_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

        <span class="c1">#  Extract account type from response</span>
        <span class="n">account_type</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Retrieved Account Type: </span><span class="si">{</span><span class="n">account_type</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1">#  Handle Lite Identity (Always version 1)</span>
        <span class="k">if</span> <span class="n">account_type</span> <span class="o">==</span> <span class="s2">&quot;liteidentity&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;signer_type&quot;</span><span class="p">:</span> <span class="s2">&quot;liteIdentity&quot;</span><span class="p">,</span> <span class="s2">&quot;signer_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

        <span class="c1">#  Handle Lite Token Accounts (Also version 1)</span>
        <span class="k">elif</span> <span class="n">account_type</span> <span class="o">==</span> <span class="s2">&quot;litetokenaccount&quot;</span><span class="p">:</span>
            <span class="n">processed_url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/ACME&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">processed_url</span><span class="p">,</span> <span class="s2">&quot;signer_type&quot;</span><span class="p">:</span> <span class="s2">&quot;liteTokenAccount&quot;</span><span class="p">,</span> <span class="s2">&quot;signer_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

        <span class="c1">#  Handle Key Pages (Extract version from response)</span>
        <span class="k">elif</span> <span class="n">account_type</span> <span class="o">==</span> <span class="s2">&quot;keypage&quot;</span><span class="p">:</span>
            <span class="n">signer_version</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">#  Extract signer version</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Using Key Page signer. Version: </span><span class="si">{</span><span class="n">signer_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;signer_type&quot;</span><span class="p">:</span> <span class="s2">&quot;keyPage&quot;</span><span class="p">,</span> <span class="s2">&quot;signer_version&quot;</span><span class="p">:</span> <span class="n">signer_version</span><span class="p">}</span>

        <span class="c1">#  Handle ADI (Assume version 1)</span>
        <span class="k">elif</span> <span class="n">account_type</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.acme&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;signer_type&quot;</span><span class="p">:</span> <span class="s2">&quot;adi&quot;</span><span class="p">,</span> <span class="s2">&quot;signer_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Unknown signer type for </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">account_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;signer_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;signer_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Error processing signer URL for </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;signer_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;signer_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="accumulate.utils.validation.validate_accumulate_url" class="doc doc-heading">
            <code class=" language-python"><span class="n">validate_accumulate_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>

<a href="#accumulate.utils.validation.validate_accumulate_url" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Validate if a URL object or string is a valid Accumulate URL.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\utils\validation.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_accumulate_url</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate if a URL object or string is a valid Accumulate URL.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;acc://&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># Reject URLs that don&#39;t start with &#39;acc://&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="c1"># Validate the URL object</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">authority</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="signing">Signing<a class="headerlink" href="#signing" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="accumulate.signing.builder" class="doc doc-heading">
            <code>builder</code>


<a href="#accumulate.signing.builder" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.signing.builder.Builder" class="doc doc-heading">
            <code>Builder</code>


<a href="#accumulate.signing.builder.Builder" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\signing\builder.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Builder</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">InitHashMode</span><span class="o">.</span><span class="n">INIT_WITH_SIMPLE_HASH</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">:</span> <span class="n">SignatureType</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">UNKNOWN</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Set signer version to 1 by default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp_generator</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_64_byte</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">signature_type</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_rpc_format</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_reserved_url</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Reserved URL cannot be used as a signer URL&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_accumulate_url</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid Accumulate URL&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the signer and assigns it to the builder.&quot;&quot;&quot;</span>
        <span class="n">Signer</span> <span class="o">=</span> <span class="n">get_signer</span><span class="p">()</span>  <span class="c1"># Dynamically import Signer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signer</span><span class="p">,</span> <span class="n">Signer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected an instance of Signer&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">signer</span> <span class="o">=</span> <span class="n">signer</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_timestamp_to_now</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp_generator</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  <span class="c1"># Ensure consistent timestamping</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_memo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memo</span> <span class="o">=</span> <span class="n">memo</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_delegator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delegator</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">validate_accumulate_url</span><span class="p">(</span><span class="n">delegator</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid delegator URL&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">delegator</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_signature_requirements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing signer URL&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing signer&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">init</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing version&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">init</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing timestamp&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Signature</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a signature object based on the specified type.&quot;&quot;&quot;</span>
        <span class="n">signature_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span> <span class="n">ED25519Signature</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">LEGACY_ED25519</span><span class="p">:</span> <span class="n">LegacyED25519Signature</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">RCD1</span><span class="p">:</span> <span class="n">RCD1Signature</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">:</span> <span class="n">BTCSignature</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span> <span class="n">ETHSignature</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span> <span class="n">RSASignature</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span> <span class="n">ECDSA_SHA256Signature</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">sig_class</span> <span class="o">=</span> <span class="n">signature_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sig_class</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">signature</span> <span class="o">=</span> <span class="n">sig_class</span><span class="p">(</span>
            <span class="n">signer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
            <span class="n">publicKey</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> 
            <span class="n">signature</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># Placeholder; set after signing</span>
            <span class="n">transaction_data</span><span class="o">=</span><span class="n">transaction_data</span>
        <span class="p">)</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">memo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>  <span class="c1"># Ensure lowercase</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">signerVersion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>
        <span class="k">return</span> <span class="n">signature</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Signature</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare a signature ensuring transaction data is included.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_signature_requirements</span><span class="p">(</span><span class="n">init</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_signature</span><span class="p">(</span><span class="n">transaction_data</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sign the provided message and return a dictionary.&quot;&quot;&quot;</span>
        <span class="n">transaction_data</span> <span class="o">=</span> <span class="n">message</span>  <span class="c1"># Use the message as transaction data</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">transaction_data</span><span class="o">=</span><span class="n">transaction_data</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">delegator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegators</span><span class="p">:</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">DelegatedSignature</span><span class="p">(</span>
                <span class="n">delegator</span><span class="o">=</span><span class="n">delegator</span><span class="p">,</span>
                <span class="n">metadata_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Use consistent camelCase for the field name</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">transactionHash</span> <span class="o">=</span> <span class="n">hash_data</span><span class="p">(</span><span class="n">transaction_data</span><span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
        <span class="n">signature_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">],</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Debug: Signature Created - </span><span class="si">{</span><span class="n">signature_data</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">signature_data</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initiate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txn</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Signature</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initiate a transaction and prepare the signature.&quot;&quot;&quot;</span>
        <span class="n">txn_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">get_hash</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction Hash from txn.get_hash(): </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Prepare the signature using the txn_hash as the signing data</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transaction_data</span><span class="o">=</span><span class="n">txn_hash</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">delegator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegators</span><span class="p">:</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">DelegatedSignature</span><span class="p">(</span>
                <span class="n">delegator</span><span class="o">=</span><span class="n">delegator</span><span class="p">,</span>
                <span class="n">metadata_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_mode</span> <span class="o">==</span> <span class="n">InitHashMode</span><span class="o">.</span><span class="n">INIT_WITH_SIMPLE_HASH</span><span class="p">:</span>
            <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span> <span class="o">=</span> <span class="n">txn_hash</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_merkle_hash</span><span class="p">(</span><span class="n">txn_hash</span><span class="p">)</span>

        <span class="n">signature</span><span class="o">.</span><span class="n">transactionHash</span> <span class="o">=</span> <span class="n">txn_hash</span>

        <span class="c1"># Log the value of txn_hash being passed to the signer</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Passing Transaction Hash to signer.sign_transaction(): </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">signature_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">txn_hash</span><span class="p">)</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">]</span>
        <span class="n">signature</span><span class="o">.</span><span class="n">signerVersion</span> <span class="o">=</span> <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signerVersion&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">signature</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.builder.Builder._create_signature" class="doc doc-heading">
            <code class=" language-python"><span class="n">_create_signature</span><span class="p">(</span><span class="n">transaction_data</span><span class="p">)</span></code>

<a href="#accumulate.signing.builder.Builder._create_signature" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a signature object based on the specified type.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\builder.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_create_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Signature</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a signature object based on the specified type.&quot;&quot;&quot;</span>
    <span class="n">signature_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span> <span class="n">ED25519Signature</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">LEGACY_ED25519</span><span class="p">:</span> <span class="n">LegacyED25519Signature</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">RCD1</span><span class="p">:</span> <span class="n">RCD1Signature</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">:</span> <span class="n">BTCSignature</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span> <span class="n">ETHSignature</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span> <span class="n">RSASignature</span><span class="p">,</span>
        <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span> <span class="n">ECDSA_SHA256Signature</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">sig_class</span> <span class="o">=</span> <span class="n">signature_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sig_class</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="n">sig_class</span><span class="p">(</span>
        <span class="n">signer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
        <span class="n">publicKey</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> 
        <span class="n">signature</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># Placeholder; set after signing</span>
        <span class="n">transaction_data</span><span class="o">=</span><span class="n">transaction_data</span>
    <span class="p">)</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">memo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">memo</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>  <span class="c1"># Ensure lowercase</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">signerVersion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>
    <span class="k">return</span> <span class="n">signature</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.builder.Builder.initiate" class="doc doc-heading">
            <code class=" language-python"><span class="n">initiate</span><span class="p">(</span><span class="n">txn</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.signing.builder.Builder.initiate" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initiate a transaction and prepare the signature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\builder.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initiate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txn</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Signature</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initiate a transaction and prepare the signature.&quot;&quot;&quot;</span>
    <span class="n">txn_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">get_hash</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction Hash from txn.get_hash(): </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Prepare the signature using the txn_hash as the signing data</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transaction_data</span><span class="o">=</span><span class="n">txn_hash</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">delegator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegators</span><span class="p">:</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">DelegatedSignature</span><span class="p">(</span>
            <span class="n">delegator</span><span class="o">=</span><span class="n">delegator</span><span class="p">,</span>
            <span class="n">metadata_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_mode</span> <span class="o">==</span> <span class="n">InitHashMode</span><span class="o">.</span><span class="n">INIT_WITH_SIMPLE_HASH</span><span class="p">:</span>
        <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span> <span class="o">=</span> <span class="n">txn_hash</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">initiator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_merkle_hash</span><span class="p">(</span><span class="n">txn_hash</span><span class="p">)</span>

    <span class="n">signature</span><span class="o">.</span><span class="n">transactionHash</span> <span class="o">=</span> <span class="n">txn_hash</span>

    <span class="c1"># Log the value of txn_hash being passed to the signer</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Passing Transaction Hash to signer.sign_transaction(): </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">signature_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">txn_hash</span><span class="p">)</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">]</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">signerVersion</span> <span class="o">=</span> <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signerVersion&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">signature</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.builder.Builder.prepare" class="doc doc-heading">
            <code class=" language-python"><span class="n">prepare</span><span class="p">(</span><span class="n">init</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">)</span></code>

<a href="#accumulate.signing.builder.Builder.prepare" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Prepare a signature ensuring transaction data is included.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\builder.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Signature</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prepare a signature ensuring transaction data is included.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_signature_requirements</span><span class="p">(</span><span class="n">init</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_signature</span><span class="p">(</span><span class="n">transaction_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.builder.Builder.set_signer" class="doc doc-heading">
            <code class=" language-python"><span class="n">set_signer</span><span class="p">(</span><span class="n">signer</span><span class="p">)</span></code>

<a href="#accumulate.signing.builder.Builder.set_signer" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sets the signer and assigns it to the builder.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\builder.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_signer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Builder&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the signer and assigns it to the builder.&quot;&quot;&quot;</span>
    <span class="n">Signer</span> <span class="o">=</span> <span class="n">get_signer</span><span class="p">()</span>  <span class="c1"># Dynamically import Signer</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signer</span><span class="p">,</span> <span class="n">Signer</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Expected an instance of Signer&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">signer</span> <span class="o">=</span> <span class="n">signer</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.builder.Builder.sign" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.signing.builder.Builder.sign" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign the provided message and return a dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\builder.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sign the provided message and return a dictionary.&quot;&quot;&quot;</span>
    <span class="n">transaction_data</span> <span class="o">=</span> <span class="n">message</span>  <span class="c1"># Use the message as transaction data</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">transaction_data</span><span class="o">=</span><span class="n">transaction_data</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">delegator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">delegators</span><span class="p">:</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">DelegatedSignature</span><span class="p">(</span>
            <span class="n">delegator</span><span class="o">=</span><span class="n">delegator</span><span class="p">,</span>
            <span class="n">metadata_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Use consistent camelCase for the field name</span>
    <span class="n">signature</span><span class="o">.</span><span class="n">transactionHash</span> <span class="o">=</span> <span class="n">hash_data</span><span class="p">(</span><span class="n">transaction_data</span><span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
    <span class="n">signature_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">transaction_data</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">],</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature_data</span><span class="p">[</span><span class="s2">&quot;signature&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Debug: Signature Created - </span><span class="si">{</span><span class="n">signature_data</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">signature_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.signing.signature_handler" class="doc doc-heading">
            <code>signature_handler</code>


<a href="#accumulate.signing.signature_handler" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.signing.signature_handler.SignatureHandler" class="doc doc-heading">
            <code>SignatureHandler</code>


<a href="#accumulate.signing.signature_handler.SignatureHandler" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SignatureHandler</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate a BTC address from a public key&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate an ETH address from a public key&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_merkle_hash</span><span class="p">(</span><span class="n">metadata_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">txn_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Signature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify if a Merkle hash is valid.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">calculated_merkle_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">metadata_hash</span> <span class="o">+</span> <span class="n">txn_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">calculated_merkle_hash</span> <span class="o">==</span> <span class="n">signature</span><span class="o">.</span><span class="n">transactionHash</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_authority_signature</span><span class="p">(</span><span class="n">origin</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">vote</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">txid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a signature for an authority.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">vote</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">+=</span> <span class="n">vote</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">txid</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">+=</span> <span class="n">txid</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_authority_signature</span><span class="p">(</span><span class="n">authority_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">origin</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">vote</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">txid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify an authority signature.&quot;&quot;&quot;</span>
        <span class="n">expected_hash</span> <span class="o">=</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">create_authority_signature</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">authority</span><span class="p">,</span> <span class="n">vote</span><span class="p">,</span> <span class="n">txid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expected_hash</span> <span class="o">==</span> <span class="n">authority_signature</span>

    <span class="c1"># ========== ED25519 ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sign_ed25519</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sign a message using ED25519.&quot;&quot;&quot;</span>
        <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">from_private_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_ed25519</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify an ED25519 signature.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vk</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PublicKey</span><span class="o">.</span><span class="n">from_public_bytes</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
            <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># ========== BTC (ECDSA SECP256k1) ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sign_btc</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sign a message using Bitcoin ECDSA SECP256k1&quot;&quot;&quot;</span>
        <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_btc</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify a BTC (ECDSA SECP256k1) signature&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vk</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">EllipticCurvePublicKey</span><span class="o">.</span><span class="n">from_encoded_point</span><span class="p">(</span><span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">(),</span> <span class="n">public_key</span><span class="p">)</span>
            <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># ========== ETH (EIP-712) ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sign_eth</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sign an Ethereum message&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PrivateKey</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">sign_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Failed to sign Ethereum message&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_eth</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify an Ethereum (EIP-712) signature&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PublicKey</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
            <span class="n">eth_signature</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">Signature</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">verify_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">,</span> <span class="n">eth_signature</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ValidationError</span><span class="p">,</span> <span class="n">BadSignature</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># ========== RSA SHA256 ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sign_rsa_sha256</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sign a message with RSA SHA-256&quot;&quot;&quot;</span>
        <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span>
            <span class="n">private_key</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span>
            <span class="n">message</span><span class="p">,</span>
            <span class="n">PKCS1v15</span><span class="p">(),</span>
            <span class="n">SHA256</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_rsa_sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify an RSA SHA-256 signature&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">public_key_obj</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_public_key</span><span class="p">(</span>
                <span class="n">public_key</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">public_key_obj</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span>
                <span class="n">signature</span><span class="p">,</span>
                <span class="n">message</span><span class="p">,</span>
                <span class="n">PKCS1v15</span><span class="p">(),</span>
                <span class="n">SHA256</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># ========== ECDSA SHA256 ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sign_ecdsa_sha256</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sign a message using ECDSA SHA256&quot;&quot;&quot;</span>
        <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_ecdsa_sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify an ECDSA SHA256 signature&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">public_key_obj</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">EllipticCurvePublicKey</span><span class="o">.</span><span class="n">from_encoded_point</span><span class="p">(</span><span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">(),</span> <span class="n">public_key</span><span class="p">)</span>
            <span class="n">public_key_obj</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># ========== TypedData (EIP-712 Compliant) ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sign_typed_data</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sign an Ethereum message using EIP-712 Typed Data&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">sign_eth</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">)</span>

    <span class="c1"># ========== Delegated Signature ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sign_delegated_signature</span><span class="p">(</span><span class="n">inner_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">delegator</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a delegated signature&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">inner_signature</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">delegator</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_delegated_signature</span><span class="p">(</span><span class="n">delegated_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">inner_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">delegator</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Verify a delegated signature.&quot;&quot;&quot;</span>
        <span class="n">expected_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">inner_signature</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">delegator</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">expected_hash</span> <span class="o">==</span> <span class="n">delegated_signature</span>

    <span class="c1"># ========== General Signature Verification ==========</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_signature_with_timestamp</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">sig_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">verification_methods</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">verify_ed25519</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">verify_ecdsa_sha256</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">:</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">verify_btc</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">verify_eth</span><span class="p">,</span>
            <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">verify_rsa_sha256</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">verify_func</span> <span class="o">=</span> <span class="n">verification_methods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sig_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verify_func</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">verify_func</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">signature</span><span class="o">.</span><span class="n">signature</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type: </span><span class="si">{</span><span class="n">sig_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.btc_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.btc_address" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate a BTC address from a public key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a BTC address from a public key&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.create_authority_signature" class="doc doc-heading">
            <code class=" language-python"><span class="n">create_authority_signature</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">authority</span><span class="p">,</span> <span class="n">vote</span><span class="p">,</span> <span class="n">txid</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.create_authority_signature" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a signature for an authority.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_authority_signature</span><span class="p">(</span><span class="n">origin</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">vote</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">txid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a signature for an authority.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">authority</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">vote</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">+=</span> <span class="n">vote</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">txid</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">+=</span> <span class="n">txid</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.eth_address" class="doc doc-heading">
            <code class=" language-python"><span class="n">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.eth_address" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Generate an ETH address from a public key</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate an ETH address from a public key&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.sign_btc" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_btc</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.sign_btc" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign a message using Bitcoin ECDSA SECP256k1</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sign_btc</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sign a message using Bitcoin ECDSA SECP256k1&quot;&quot;&quot;</span>
    <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.sign_delegated_signature" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_delegated_signature</span><span class="p">(</span><span class="n">inner_signature</span><span class="p">,</span> <span class="n">delegator</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.sign_delegated_signature" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a delegated signature</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sign_delegated_signature</span><span class="p">(</span><span class="n">inner_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">delegator</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a delegated signature&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">inner_signature</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">delegator</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.sign_ecdsa_sha256" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_ecdsa_sha256</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.sign_ecdsa_sha256" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign a message using ECDSA SHA256</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sign_ecdsa_sha256</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sign a message using ECDSA SHA256&quot;&quot;&quot;</span>
    <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.sign_ed25519" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_ed25519</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.sign_ed25519" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign a message using ED25519.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sign_ed25519</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sign a message using ED25519.&quot;&quot;&quot;</span>
    <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">from_private_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.sign_eth" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_eth</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.sign_eth" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign an Ethereum message</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sign_eth</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sign an Ethereum message&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PrivateKey</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">sign_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Failed to sign Ethereum message&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.sign_rsa_sha256" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_rsa_sha256</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.sign_rsa_sha256" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign a message with RSA SHA-256</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sign_rsa_sha256</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sign a message with RSA SHA-256&quot;&quot;&quot;</span>
    <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span>
        <span class="n">private_key</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span>
        <span class="n">message</span><span class="p">,</span>
        <span class="n">PKCS1v15</span><span class="p">(),</span>
        <span class="n">SHA256</span><span class="p">(),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.sign_typed_data" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_typed_data</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.sign_typed_data" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sign an Ethereum message using EIP-712 Typed Data</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sign_typed_data</span><span class="p">(</span><span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sign an Ethereum message using EIP-712 Typed Data&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">sign_eth</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_authority_signature" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_authority_signature</span><span class="p">(</span><span class="n">authority_signature</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">authority</span><span class="p">,</span> <span class="n">vote</span><span class="p">,</span> <span class="n">txid</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_authority_signature" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify an authority signature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_authority_signature</span><span class="p">(</span><span class="n">authority_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">origin</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">authority</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">vote</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">txid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify an authority signature.&quot;&quot;&quot;</span>
    <span class="n">expected_hash</span> <span class="o">=</span> <span class="n">SignatureHandler</span><span class="o">.</span><span class="n">create_authority_signature</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">authority</span><span class="p">,</span> <span class="n">vote</span><span class="p">,</span> <span class="n">txid</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">expected_hash</span> <span class="o">==</span> <span class="n">authority_signature</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_btc" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_btc</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_btc" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify a BTC (ECDSA SECP256k1) signature</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_btc</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify a BTC (ECDSA SECP256k1) signature&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">vk</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">EllipticCurvePublicKey</span><span class="o">.</span><span class="n">from_encoded_point</span><span class="p">(</span><span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">(),</span> <span class="n">public_key</span><span class="p">)</span>
        <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_delegated_signature" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_delegated_signature</span><span class="p">(</span><span class="n">delegated_signature</span><span class="p">,</span> <span class="n">inner_signature</span><span class="p">,</span> <span class="n">delegator</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_delegated_signature" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify a delegated signature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_delegated_signature</span><span class="p">(</span><span class="n">delegated_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">inner_signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">delegator</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify a delegated signature.&quot;&quot;&quot;</span>
    <span class="n">expected_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">inner_signature</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">delegator</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">expected_hash</span> <span class="o">==</span> <span class="n">delegated_signature</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_ecdsa_sha256" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_ecdsa_sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_ecdsa_sha256" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify an ECDSA SHA256 signature</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_ecdsa_sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify an ECDSA SHA256 signature&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">public_key_obj</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">EllipticCurvePublicKey</span><span class="o">.</span><span class="n">from_encoded_point</span><span class="p">(</span><span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">(),</span> <span class="n">public_key</span><span class="p">)</span>
        <span class="n">public_key_obj</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">SHA256</span><span class="p">()))</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_ed25519" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_ed25519</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_ed25519" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify an ED25519 signature.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_ed25519</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify an ED25519 signature.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">vk</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PublicKey</span><span class="o">.</span><span class="n">from_public_bytes</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
        <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_eth" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_eth</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_eth" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify an Ethereum (EIP-712) signature</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_eth</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify an Ethereum (EIP-712) signature&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PublicKey</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
        <span class="n">eth_signature</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">Signature</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">verify_msg_hash</span><span class="p">(</span><span class="n">message_hash</span><span class="p">,</span> <span class="n">eth_signature</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">ValidationError</span><span class="p">,</span> <span class="n">BadSignature</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_merkle_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_merkle_hash</span><span class="p">(</span><span class="n">metadata_hash</span><span class="p">,</span> <span class="n">txn_hash</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_merkle_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify if a Merkle hash is valid.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_merkle_hash</span><span class="p">(</span><span class="n">metadata_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">txn_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Signature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify if a Merkle hash is valid.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">calculated_merkle_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">metadata_hash</span> <span class="o">+</span> <span class="n">txn_hash</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">calculated_merkle_hash</span> <span class="o">==</span> <span class="n">signature</span><span class="o">.</span><span class="n">transactionHash</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signature_handler.SignatureHandler.verify_rsa_sha256" class="doc doc-heading">
            <code class=" language-python"><span class="n">verify_rsa_sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signature_handler.SignatureHandler.verify_rsa_sha256" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Verify an RSA SHA-256 signature</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signature_handler.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">verify_rsa_sha256</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify an RSA SHA-256 signature&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">public_key_obj</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_public_key</span><span class="p">(</span>
            <span class="n">public_key</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">public_key_obj</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span>
            <span class="n">signature</span><span class="p">,</span>
            <span class="n">message</span><span class="p">,</span>
            <span class="n">PKCS1v15</span><span class="p">(),</span>
            <span class="n">SHA256</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.signing.signer" class="doc doc-heading">
            <code>signer</code>


<a href="#accumulate.signing.signer" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.signing.signer.Signer" class="doc doc-heading">
            <code>Signer</code>


<a href="#accumulate.signing.signer.Signer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>accumulate\signing\signer.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Signer</span><span class="p">:</span>
    <span class="n">_signer_version</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">_signature_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SignatureType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1">#  Store signature type</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">URL</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">signer_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SignatureType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_signer_version</span> <span class="o">=</span> <span class="n">signer_version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span> <span class="o">=</span> <span class="n">signature_type</span>

    <span class="nd">@staticmethod</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">select_signer</span><span class="p">(</span><span class="n">account_url</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;AccumulateClient&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Signer&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.api.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">AccumulateClient</span>  
            <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_accumulate_rpc_url</span>  
            <span class="n">client</span> <span class="o">=</span> <span class="n">AccumulateClient</span><span class="p">(</span><span class="n">get_accumulate_rpc_url</span><span class="p">())</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.validation</span><span class="w"> </span><span class="kn">import</span> <span class="n">process_signer_url</span>  
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking signer type and version for </span><span class="si">{</span><span class="n">account_url</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

        <span class="n">signer_info</span> <span class="o">=</span> <span class="k">await</span> <span class="n">process_signer_url</span><span class="p">(</span><span class="n">account_url</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>

        <span class="n">processed_url</span> <span class="o">=</span> <span class="n">signer_info</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
        <span class="n">signer_version</span> <span class="o">=</span> <span class="n">signer_info</span><span class="p">[</span><span class="s2">&quot;signer_version&quot;</span><span class="p">]</span>
        <span class="n">signer_type</span> <span class="o">=</span> <span class="n">signer_info</span><span class="p">[</span><span class="s2">&quot;signer_type&quot;</span><span class="p">]</span>

        <span class="c1">#  Convert the fetched signer_type string to a SignatureType Enum</span>
        <span class="n">signature_type_enum</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="p">[</span><span class="n">signer_type</span><span class="p">]</span> <span class="k">if</span> <span class="n">signer_type</span> <span class="ow">in</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">__members__</span> <span class="k">else</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using </span><span class="si">{</span><span class="n">processed_url</span><span class="si">}</span><span class="s2"> as signer (</span><span class="si">{</span><span class="n">signer_type</span><span class="si">}</span><span class="s2">), Version: </span><span class="si">{</span><span class="n">signer_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">signer</span> <span class="o">=</span> <span class="n">Signer</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">processed_url</span><span class="p">),</span> <span class="n">signer_version</span><span class="p">,</span> <span class="n">signature_type_enum</span><span class="p">)</span>
        <span class="n">signer</span><span class="o">.</span><span class="n">set_keys</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">signer</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_signature_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SignatureType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch the appropriate signature type dynamically.</span>

<span class="sd">        - If already cached, return it.</span>
<span class="sd">        - Otherwise, determine it dynamically.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span>  <span class="c1">#  Use cached signature type if available</span>

        <span class="c1">#  Implement logic to fetch the actual signature type from signer metadata</span>
        <span class="c1"># Currently defaulting to ED25519, but should be dynamically set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span>  <span class="c1"># Replace with dynamic lookup if needed</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Determined Signature Type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span>
            <span class="n">private_scalar</span> <span class="o">=</span> <span class="n">private_key</span><span class="p">[:</span><span class="mi">32</span><span class="p">]</span>
            <span class="n">derived_public_key</span> <span class="o">=</span> <span class="n">private_key</span><span class="p">[</span><span class="mi">32</span><span class="p">:]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">32</span><span class="p">:</span>
            <span class="n">private_scalar</span> <span class="o">=</span> <span class="n">private_key</span>
            <span class="n">derived_public_key</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">from_private_bytes</span><span class="p">(</span><span class="n">private_scalar</span><span class="p">)</span>
        <span class="n">computed_public_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
            <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">Raw</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">derived_public_key</span> <span class="ow">and</span> <span class="n">computed_public_key</span> <span class="o">!=</span> <span class="n">derived_public_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Derived public key does not match computed public key!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span> <span class="o">=</span> <span class="n">computed_public_key</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Public Key Correctly Set: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Public key missing. Regenerating from private key.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
                    <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
                    <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">Raw</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Public key has not been set. Call set_keys() first.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_private_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Private key has not been set. Call set_keys() first.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="o">.</span><span class="n">private_bytes</span><span class="p">(</span>
            <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PrivateFormat</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
            <span class="n">encryption_algorithm</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">NoEncryption</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_signer_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Signer URL is missing, cannot determine version.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signer_version</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_signer_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_signer_version</span> <span class="o">=</span> <span class="n">version</span>


<span class="c1">#    async def sign_transaction(self, signature_type: SignatureType, message: bytes, signer_version: Optional[int] = None) -&gt; dict:</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sign_transaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> 
        <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">,</span> 
        <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> 
        <span class="n">txn_header</span><span class="p">:</span> <span class="n">TransactionHeader</span><span class="p">,</span>  <span class="c1"># Use the TransactionHeader object to access timestamp</span>
        <span class="n">signer_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Signs the transaction using the timestamp from the TransactionHeader.</span>

<span class="sd">        :param signature_type: The signature type (e.g., ED25519, BTC, etc.).</span>
<span class="sd">        :param message: The transaction hash to sign.</span>
<span class="sd">        :param txn_header: The TransactionHeader instance, containing the timestamp.</span>
<span class="sd">        :param signer_version: The signer&#39;s version (if None, uses the default).</span>
<span class="sd">        :return: A signed transaction dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Private key not set. Call set_keys() first.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Public key not set. Call set_keys() properly.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">signer_version</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">signer_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signer_version</span>

        <span class="c1">#  Use timestamp from the TransactionHeader</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">txn_header</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="k">if</span> <span class="n">timestamp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction header does not have a timestamp!&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Signer Using TransactionHeader Timestamp: </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Compute metadata (initiator) hash using uvarint encoding.</span>
        <span class="n">metadata_hash</span> <span class="o">=</span> <span class="n">Signer</span><span class="o">.</span><span class="n">calculate_metadata_hash</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">(),</span> <span class="n">timestamp</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="n">signer_version</span><span class="p">,</span> <span class="n">signature_type</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (Public key) Hash: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (timestamp) Hash: </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (signer) Hash: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (signer_version) Hash: </span><span class="si">{</span><span class="n">signer_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (signature_type.vale) Hash: </span><span class="si">{</span><span class="n">signature_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (initiator) Hash: </span><span class="si">{</span><span class="n">metadata_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Here, &#39;message&#39; is expected to be the final transaction hash as computed in your transaction marshalling</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message passed for signing (transaction hash): </span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Compute the final signing hash as sha256(metadata_hash + message)</span>
        <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">metadata_hash</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final Hash for Signing (sha256(metadata_hash + message)): </span><span class="si">{</span><span class="n">final_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Sign using the appropriate algorithm.</span>
        <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">final_hash</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">:</span>
            <span class="n">priv_key</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">(),</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">priv_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">final_hash</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">hashes</span><span class="o">.</span><span class="n">SHA256</span><span class="p">()))</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span>
            <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PrivateKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">())</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">sign_msg_hash</span><span class="p">(</span><span class="n">final_hash</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span>
            <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">(),</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">private_key_obj</span><span class="p">,</span> <span class="n">rsa</span><span class="o">.</span><span class="n">RSAPrivateKey</span><span class="p">):</span>
                <span class="n">signature</span> <span class="o">=</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span>
                    <span class="n">final_hash</span><span class="p">,</span>
                    <span class="n">PKCS1v15</span><span class="p">(),</span>
                    <span class="n">hashes</span><span class="o">.</span><span class="n">SHA256</span><span class="p">(),</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid RSA private key&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span>
            <span class="n">priv_key</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">(),</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">priv_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">final_hash</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">hashes</span><span class="o">.</span><span class="n">SHA256</span><span class="p">()))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type: </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;sign_transaction() called successfully!&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signature Generated: </span><span class="si">{</span><span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">signed_transaction</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">signature_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
            <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
            <span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
            <span class="s2">&quot;signer&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
            <span class="s2">&quot;signerVersion&quot;</span><span class="p">:</span> <span class="n">signer_version</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
            <span class="s2">&quot;transactionHash&quot;</span><span class="p">:</span> <span class="n">message</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>  <span class="c1"># The original transaction hash passed in</span>
        <span class="p">}</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signed Transaction Data - </span><span class="si">{</span><span class="n">signed_transaction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">signed_transaction</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">opts</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">signature_type</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signatureType&quot;</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">)</span>
        <span class="n">signer_version</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signerVersion&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signer_version</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">signer_version</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">for_lite</span><span class="p">(</span><span class="n">signer</span><span class="p">:</span> <span class="s2">&quot;Signer&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Signer&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">signer</span><span class="o">.</span><span class="n">_public_key</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">signer</span><span class="o">.</span><span class="n">_private_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Signer must have keys set before calling for_lite().&quot;</span><span class="p">)</span>

        <span class="n">key_str</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">signer</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">())</span><span class="o">.</span><span class="n">digest</span><span class="p">()[:</span><span class="mi">20</span><span class="p">]</span>
        <span class="n">check_sum</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">key_str</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">lite_url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;acc://</span><span class="si">{</span><span class="n">key_str</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}{</span><span class="n">check_sum</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created Lite Signer: </span><span class="si">{</span><span class="n">lite_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">lite_signer</span> <span class="o">=</span> <span class="n">Signer</span><span class="p">(</span><span class="n">lite_url</span><span class="p">,</span> <span class="n">signer_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">lite_signer</span><span class="o">.</span><span class="n">_public_key</span> <span class="o">=</span> <span class="n">signer</span><span class="o">.</span><span class="n">_public_key</span>
        <span class="n">lite_signer</span><span class="o">.</span><span class="n">_private_key</span> <span class="o">=</span> <span class="n">signer</span><span class="o">.</span><span class="n">_private_key</span>

        <span class="k">return</span> <span class="n">lite_signer</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_public_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">signature_type</span> <span class="o">=</span> <span class="n">signature</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">LEGACY_ED25519</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">,</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">RCD1</span><span class="p">]:</span>
            <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">from_private_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span> <span class="o">=</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
                <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">Raw</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">Raw</span>
            <span class="p">)</span>  
            <span class="n">signature</span><span class="p">[</span><span class="s2">&quot;publicKey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">]:</span>
            <span class="n">priv_key</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
            <span class="n">public_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
                <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">X962</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">CompressedPoint</span>
            <span class="p">)</span>
            <span class="n">signature</span><span class="p">[</span><span class="s2">&quot;publicKey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
            <span class="n">signature</span><span class="p">[</span><span class="s2">&quot;btc_address&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">btc_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span>
            <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PrivateKey</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
            <span class="n">public_key</span> <span class="o">=</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">public_key</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">()</span>
            <span class="n">signature</span><span class="p">[</span><span class="s2">&quot;eth_address&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">eth_address</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span>
            <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">private_key_obj</span><span class="p">,</span> <span class="n">rsa</span><span class="o">.</span><span class="n">RSAPrivateKey</span><span class="p">):</span>
                <span class="n">signature</span><span class="p">[</span><span class="s2">&quot;publicKey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
                    <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
                    <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>
                <span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span>
            <span class="n">priv_key</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
            <span class="n">signature</span><span class="p">[</span><span class="s2">&quot;publicKey&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">priv_key</span><span class="o">.</span><span class="n">public_key</span><span class="p">()</span><span class="o">.</span><span class="n">public_bytes</span><span class="p">(</span>
                <span class="n">encoding</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">Encoding</span><span class="o">.</span><span class="n">PEM</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="n">serialization</span><span class="o">.</span><span class="n">PublicFormat</span><span class="o">.</span><span class="n">SubjectPublicKeyInfo</span>
            <span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set the public key for </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sign_rcd1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PrivateKey</span><span class="o">.</span><span class="n">from_private_bytes</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
        <span class="n">hashed_message</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">hashed_message</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">()}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify_rcd1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">signature</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vk</span> <span class="o">=</span> <span class="n">ed25519</span><span class="o">.</span><span class="n">Ed25519PublicKey</span><span class="o">.</span><span class="n">from_public_bytes</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
            <span class="n">hashed_message</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
            <span class="n">vk</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">hashed_message</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sha256_concat</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">encode_varint</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Varint encoding requires a non-negative integer.&quot;</span><span class="p">)</span>
        <span class="n">encoded_bytes</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mh">0x80</span><span class="p">:</span>
            <span class="n">encoded_bytes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">value</span> <span class="o">&amp;</span> <span class="mh">0x7F</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0x80</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">&gt;&gt;=</span> <span class="mi">7</span>
        <span class="n">encoded_bytes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">encoded_bytes</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_metadata_hash</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute Accumulate&#39;s signature metadata (initiator) hash using uvarint encoding for all fields.</span>
<span class="sd">        This exactly mirrors the Dart implementation.</span>

<span class="sd">        Fields:</span>
<span class="sd">        - Field 1: Signature type (varint-encoded)</span>
<span class="sd">        - Field 2: Public key (varint-encoded length + raw bytes)</span>
<span class="sd">        - Field 4: Signer URL (UTF-8 encoded, with varint length prefix)</span>
<span class="sd">        - Field 5: Signer version (varint-encoded)</span>
<span class="sd">        - Field 6: Timestamp (varint-encoded)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.encoding</span><span class="w"> </span><span class="kn">import</span> <span class="n">encode_uvarint</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">signer</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Encode the signer URL into bytes.</span>
        <span class="n">signer_bytes</span> <span class="o">=</span> <span class="n">signer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

        <span class="c1"># Build the metadata binary by concatenating each field in order.</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
            <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">signature_type</span><span class="p">),</span>                   <span class="c1"># Field 1: Signature type</span>
            <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x02</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">public_key</span><span class="p">))</span> <span class="o">+</span> <span class="n">public_key</span><span class="p">,</span>         <span class="c1"># Field 2: Public key</span>
            <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x04</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">signer_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">signer_bytes</span><span class="p">,</span>       <span class="c1"># Field 4: Signer URL</span>
            <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x05</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">version</span><span class="p">),</span>                              <span class="c1"># Field 5: Signer version</span>
            <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x06</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>                             <span class="c1"># Field 6: Timestamp</span>
        <span class="p">])</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Final Metadata Encoding (hex): </span><span class="si">{</span><span class="n">metadata</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Compute the SHA-256 hash of the concatenated metadata.</span>
        <span class="n">metadata_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Metadata Hash (SHA-256, hex): </span><span class="si">{</span><span class="n">metadata_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">metadata_hash</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_signature_hash</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">signature</span><span class="o">.</span><span class="n">marshal_binary</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Signer</span><span class="o">.</span><span class="n">sha256_concat</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_parent_of</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="n">URL</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="n">URL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">child</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">parent</span><span class="p">))</span>


    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sign_and_submit_transaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="s2">&quot;AccumulateClient&quot;</span><span class="p">,</span> <span class="n">txn</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Signs the transaction, constructs the envelope, and submits it.</span>

<span class="sd">        :param client: AccumulateClient instance</span>
<span class="sd">        :param txn: Transaction object</span>
<span class="sd">        :param signature_type: Type of signature (e.g., ED25519)</span>
<span class="sd">        :param debug: If True, print the exact JSON request without sending it.</span>
<span class="sd">        :return: Response from the Accumulate network or printed JSON in debug mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Step 1: Check if this is a Remote Transaction</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; RemoteTransaction detected, checking multisignature conditions...&quot;</span><span class="p">)</span>

            <span class="c1">#  If it does NOT support multisignature, prevent signing</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">allows_multisig</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot sign a RemoteTransaction that does not allow multisignatures.&quot;</span><span class="p">)</span>

            <span class="c1">#  Otherwise, allow signing but ensure it&#39;s an additional signature</span>
            <span class="n">existing_signatures</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">get_existing_signatures</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span> <span class="ow">in</span> <span class="n">existing_signatures</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This signer has already signed this RemoteTransaction.&quot;</span><span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Proceeding with multisignature signing for RemoteTransaction.&quot;</span><span class="p">)</span>

        <span class="c1">#  Step 2: Check if the signer has keys set</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Signer keys not set. Call set_keys() first.&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; Computing transaction hash...&quot;</span><span class="p">)</span>
        <span class="n">txn_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">get_hash</span><span class="p">()</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Signing transaction (hash: </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">)...&quot;</span><span class="p">)</span>
        <span class="n">signature_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">txn_hash</span><span class="p">,</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Constructing envelope...&quot;</span><span class="p">)</span>
        <span class="n">envelope</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;signatures&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">signature_data</span><span class="p">],</span>
            <span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">txn</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()]</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">formatted_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; RPC Request (Not Sent):</span><span class="se">\n</span><span class="si">{</span><span class="n">formatted_json</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">envelope</span>  <span class="c1"># Return the request without sending</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Submitting transaction to the Accumulate network...&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">json_envelope</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">envelope</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_envelope</span><span class="p">))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Transaction Submitted Successfully! Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Transaction Submission Failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signer.Signer.calculate_metadata_hash" class="doc doc-heading">
            <code class=" language-python"><span class="n">calculate_metadata_hash</span><span class="p">(</span><span class="n">public_key</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signer</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#accumulate.signing.signer.Signer.calculate_metadata_hash" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Compute Accumulate's signature metadata (initiator) hash using uvarint encoding for all fields.
This exactly mirrors the Dart implementation.</p>
<p>Fields:
- Field 1: Signature type (varint-encoded)
- Field 2: Public key (varint-encoded length + raw bytes)
- Field 4: Signer URL (UTF-8 encoded, with varint length prefix)
- Field 5: Signer version (varint-encoded)
- Field 6: Timestamp (varint-encoded)</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_metadata_hash</span><span class="p">(</span><span class="n">public_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">signer</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute Accumulate&#39;s signature metadata (initiator) hash using uvarint encoding for all fields.</span>
<span class="sd">    This exactly mirrors the Dart implementation.</span>

<span class="sd">    Fields:</span>
<span class="sd">    - Field 1: Signature type (varint-encoded)</span>
<span class="sd">    - Field 2: Public key (varint-encoded length + raw bytes)</span>
<span class="sd">    - Field 4: Signer URL (UTF-8 encoded, with varint length prefix)</span>
<span class="sd">    - Field 5: Signer version (varint-encoded)</span>
<span class="sd">    - Field 6: Timestamp (varint-encoded)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">accumulate.utils.encoding</span><span class="w"> </span><span class="kn">import</span> <span class="n">encode_uvarint</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">public_key</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">signer</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; calculate_metadata_hash: </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Encode the signer URL into bytes.</span>
    <span class="n">signer_bytes</span> <span class="o">=</span> <span class="n">signer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

    <span class="c1"># Build the metadata binary by concatenating each field in order.</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
        <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x01</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">signature_type</span><span class="p">),</span>                   <span class="c1"># Field 1: Signature type</span>
        <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x02</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">public_key</span><span class="p">))</span> <span class="o">+</span> <span class="n">public_key</span><span class="p">,</span>         <span class="c1"># Field 2: Public key</span>
        <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x04</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">signer_bytes</span><span class="p">))</span> <span class="o">+</span> <span class="n">signer_bytes</span><span class="p">,</span>       <span class="c1"># Field 4: Signer URL</span>
        <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x05</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">version</span><span class="p">),</span>                              <span class="c1"># Field 5: Signer version</span>
        <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x06</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">encode_uvarint</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>                             <span class="c1"># Field 6: Timestamp</span>
    <span class="p">])</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Final Metadata Encoding (hex): </span><span class="si">{</span><span class="n">metadata</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Compute the SHA-256 hash of the concatenated metadata.</span>
    <span class="n">metadata_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Metadata Hash (SHA-256, hex): </span><span class="si">{</span><span class="n">metadata_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">metadata_hash</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signer.Signer.get_signature_type" class="doc doc-heading">
            <code class=" language-python"><span class="n">get_signature_type</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.signing.signer.Signer.get_signature_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Fetch the appropriate signature type dynamically.</p>
<ul>
<li>If already cached, return it.</li>
<li>Otherwise, determine it dynamically.</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_signature_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SignatureType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch the appropriate signature type dynamically.</span>

<span class="sd">    - If already cached, return it.</span>
<span class="sd">    - Otherwise, determine it dynamically.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span>  <span class="c1">#  Use cached signature type if available</span>

    <span class="c1">#  Implement logic to fetch the actual signature type from signer metadata</span>
    <span class="c1"># Currently defaulting to ED25519, but should be dynamically set</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span> <span class="o">=</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span>  <span class="c1"># Replace with dynamic lookup if needed</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Determined Signature Type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signature_type</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signer.Signer.sign_and_submit_transaction" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_and_submit_transaction</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">txn</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.signing.signer.Signer.sign_and_submit_transaction" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Signs the transaction, constructs the envelope, and submits it.</p>
<p>:param client: AccumulateClient instance
:param txn: Transaction object
:param signature_type: Type of signature (e.g., ED25519)
:param debug: If True, print the exact JSON request without sending it.
:return: Response from the Accumulate network or printed JSON in debug mode.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sign_and_submit_transaction</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="s2">&quot;AccumulateClient&quot;</span><span class="p">,</span> <span class="n">txn</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">,</span> <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Signs the transaction, constructs the envelope, and submits it.</span>

<span class="sd">    :param client: AccumulateClient instance</span>
<span class="sd">    :param txn: Transaction object</span>
<span class="sd">    :param signature_type: Type of signature (e.g., ED25519)</span>
<span class="sd">    :param debug: If True, print the exact JSON request without sending it.</span>
<span class="sd">    :return: Response from the Accumulate network or printed JSON in debug mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#  Step 1: Check if this is a Remote Transaction</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">RemoteTransaction</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; RemoteTransaction detected, checking multisignature conditions...&quot;</span><span class="p">)</span>

        <span class="c1">#  If it does NOT support multisignature, prevent signing</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">allows_multisig</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot sign a RemoteTransaction that does not allow multisignatures.&quot;</span><span class="p">)</span>

        <span class="c1">#  Otherwise, allow signing but ensure it&#39;s an additional signature</span>
        <span class="n">existing_signatures</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">get_existing_signatures</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span> <span class="ow">in</span> <span class="n">existing_signatures</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This signer has already signed this RemoteTransaction.&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Proceeding with multisignature signing for RemoteTransaction.&quot;</span><span class="p">)</span>

    <span class="c1">#  Step 2: Check if the signer has keys set</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Signer keys not set. Call set_keys() first.&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; Computing transaction hash...&quot;</span><span class="p">)</span>
    <span class="n">txn_hash</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">get_hash</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Signing transaction (hash: </span><span class="si">{</span><span class="n">txn_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">)...&quot;</span><span class="p">)</span>
    <span class="n">signature_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">txn_hash</span><span class="p">,</span> <span class="n">txn</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Constructing envelope...&quot;</span><span class="p">)</span>
    <span class="n">envelope</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;signatures&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">signature_data</span><span class="p">],</span>
        <span class="s2">&quot;transaction&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">txn</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()]</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="n">formatted_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; RPC Request (Not Sent):</span><span class="se">\n</span><span class="si">{</span><span class="n">formatted_json</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">envelope</span>  <span class="c1"># Return the request without sending</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Submitting transaction to the Accumulate network...&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">json_envelope</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">envelope</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_envelope</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Transaction Submitted Successfully! Response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Transaction Submission Failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.signer.Signer.sign_transaction" class="doc doc-heading">
            <code class=" language-python"><span class="n">sign_transaction</span><span class="p">(</span><span class="n">signature_type</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">txn_header</span><span class="p">,</span> <span class="n">signer_version</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#accumulate.signing.signer.Signer.sign_transaction" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Signs the transaction using the timestamp from the TransactionHeader.</p>
<p>:param signature_type: The signature type (e.g., ED25519, BTC, etc.).
:param message: The transaction hash to sign.
:param txn_header: The TransactionHeader instance, containing the timestamp.
:param signer_version: The signer's version (if None, uses the default).
:return: A signed transaction dictionary.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\signer.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sign_transaction</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> 
    <span class="n">signature_type</span><span class="p">:</span> <span class="n">SignatureType</span><span class="p">,</span> 
    <span class="n">message</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> 
    <span class="n">txn_header</span><span class="p">:</span> <span class="n">TransactionHeader</span><span class="p">,</span>  <span class="c1"># Use the TransactionHeader object to access timestamp</span>
    <span class="n">signer_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Signs the transaction using the timestamp from the TransactionHeader.</span>

<span class="sd">    :param signature_type: The signature type (e.g., ED25519, BTC, etc.).</span>
<span class="sd">    :param message: The transaction hash to sign.</span>
<span class="sd">    :param txn_header: The TransactionHeader instance, containing the timestamp.</span>
<span class="sd">    :param signer_version: The signer&#39;s version (if None, uses the default).</span>
<span class="sd">    :return: A signed transaction dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Private key not set. Call set_keys() first.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_public_key</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Public key not set. Call set_keys() properly.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">signer_version</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">signer_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signer_version</span>

    <span class="c1">#  Use timestamp from the TransactionHeader</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">txn_header</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="k">if</span> <span class="n">timestamp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Transaction header does not have a timestamp!&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Signer Using TransactionHeader Timestamp: </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Compute metadata (initiator) hash using uvarint encoding.</span>
    <span class="n">metadata_hash</span> <span class="o">=</span> <span class="n">Signer</span><span class="o">.</span><span class="n">calculate_metadata_hash</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">(),</span> <span class="n">timestamp</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span> <span class="n">signer_version</span><span class="p">,</span> <span class="n">signature_type</span><span class="o">.</span><span class="n">value</span>
    <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (Public key) Hash: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (timestamp) Hash: </span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (signer) Hash: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (signer_version) Hash: </span><span class="si">{</span><span class="n">signer_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (signature_type.vale) Hash: </span><span class="si">{</span><span class="n">signature_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; FROM SIGNER - Metadata (initiator) Hash: </span><span class="si">{</span><span class="n">metadata_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Here, &#39;message&#39; is expected to be the final transaction hash as computed in your transaction marshalling</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message passed for signing (transaction hash): </span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Compute the final signing hash as sha256(metadata_hash + message)</span>
    <span class="n">final_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">metadata_hash</span> <span class="o">+</span> <span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final Hash for Signing (sha256(metadata_hash + message)): </span><span class="si">{</span><span class="n">final_hash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Sign using the appropriate algorithm.</span>
    <span class="k">if</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ED25519</span><span class="p">:</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_private_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">final_hash</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">BTC</span><span class="p">:</span>
        <span class="n">priv_key</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">(),</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">priv_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">final_hash</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">hashes</span><span class="o">.</span><span class="n">SHA256</span><span class="p">()))</span>
    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ETH</span><span class="p">:</span>
        <span class="n">eth_key</span> <span class="o">=</span> <span class="n">eth_keys</span><span class="o">.</span><span class="n">PrivateKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">())</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">eth_key</span><span class="o">.</span><span class="n">sign_msg_hash</span><span class="p">(</span><span class="n">final_hash</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">RSA_SHA256</span><span class="p">:</span>
        <span class="n">private_key_obj</span> <span class="o">=</span> <span class="n">serialization</span><span class="o">.</span><span class="n">load_pem_private_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">(),</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">default_backend</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">private_key_obj</span><span class="p">,</span> <span class="n">rsa</span><span class="o">.</span><span class="n">RSAPrivateKey</span><span class="p">):</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">private_key_obj</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span>
                <span class="n">final_hash</span><span class="p">,</span>
                <span class="n">PKCS1v15</span><span class="p">(),</span>
                <span class="n">hashes</span><span class="o">.</span><span class="n">SHA256</span><span class="p">(),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid RSA private key&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">signature_type</span> <span class="o">==</span> <span class="n">SignatureType</span><span class="o">.</span><span class="n">ECDSA_SHA256</span><span class="p">:</span>
        <span class="n">priv_key</span> <span class="o">=</span> <span class="n">ec</span><span class="o">.</span><span class="n">derive_private_key</span><span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_private_key</span><span class="p">(),</span> <span class="s2">&quot;big&quot;</span><span class="p">),</span> <span class="n">ec</span><span class="o">.</span><span class="n">SECP256K1</span><span class="p">())</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">priv_key</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">final_hash</span><span class="p">,</span> <span class="n">ec</span><span class="o">.</span><span class="n">ECDSA</span><span class="p">(</span><span class="n">hashes</span><span class="o">.</span><span class="n">SHA256</span><span class="p">()))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported signature type: </span><span class="si">{</span><span class="n">signature_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;sign_transaction() called successfully!&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signature Generated: </span><span class="si">{</span><span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">signed_transaction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">signature_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="s2">&quot;publicKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_public_key</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
        <span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="n">signature</span><span class="o">.</span><span class="n">hex</span><span class="p">(),</span>
        <span class="s2">&quot;signer&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="s2">&quot;signerVersion&quot;</span><span class="p">:</span> <span class="n">signer_version</span><span class="p">,</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
        <span class="s2">&quot;transactionHash&quot;</span><span class="p">:</span> <span class="n">message</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>  <span class="c1"># The original transaction hash passed in</span>
    <span class="p">}</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signed Transaction Data - </span><span class="si">{</span><span class="n">signed_transaction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">signed_transaction</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="accumulate.signing.timestamp" class="doc doc-heading">
            <code>timestamp</code>


<a href="#accumulate.signing.timestamp" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="accumulate.signing.timestamp.Timestamp" class="doc doc-heading">
            <code>Timestamp</code>


<a href="#accumulate.signing.timestamp.Timestamp" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for timestamp implementations.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\signing\timestamp.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Timestamp</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract base class for timestamp implementations.&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the current timestamp value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The current timestamp value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.timestamp.Timestamp.get" class="doc doc-heading">
            <code class=" language-python"><span class="n">get</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#accumulate.signing.timestamp.Timestamp.get" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve the current timestamp value.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current timestamp value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\timestamp.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the current timestamp value.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The current timestamp value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.signing.timestamp.TimestampFromValue" class="doc doc-heading">
            <code>TimestampFromValue</code>


<a href="#accumulate.signing.timestamp.TimestampFromValue" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.signing.timestamp.Timestamp" href="#accumulate.signing.timestamp.Timestamp">Timestamp</a></code></p>


        <p>Static timestamp that always returns a predefined value.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\signing\timestamp.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TimestampFromValue</span><span class="p">(</span><span class="n">Timestamp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Static timestamp that always returns a predefined value.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Timestamp value must be non-negative&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the static timestamp value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The predefined timestamp value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.timestamp.TimestampFromValue.get" class="doc doc-heading">
            <code class=" language-python"><span class="n">get</span><span class="p">()</span></code>

<a href="#accumulate.signing.timestamp.TimestampFromValue.get" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve the static timestamp value.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The predefined timestamp value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\timestamp.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the static timestamp value.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The predefined timestamp value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="accumulate.signing.timestamp.TimestampFromVariable" class="doc doc-heading">
            <code>TimestampFromVariable</code>


<a href="#accumulate.signing.timestamp.TimestampFromVariable" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="accumulate.signing.timestamp.Timestamp" href="#accumulate.signing.timestamp.Timestamp">Timestamp</a></code></p>


        <p>Dynamic timestamp that starts with real time (in milliseconds) and increments.</p>






              <details class="quote">
                <summary>Source code in <code>accumulate\signing\timestamp.py</code></summary>
                <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TimestampFromVariable</span><span class="p">(</span><span class="n">Timestamp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dynamic timestamp that starts with real time (in milliseconds) and increments.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initial_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">initial_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">initial_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e3</span><span class="p">)</span>  <span class="c1"># ⬅️ Now using milliseconds</span>
        <span class="k">if</span> <span class="n">initial_value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Initial timestamp value must be non-negative&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">initial_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Atomically increment and retrieve the timestamp value.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># ⬅️ Increment by 1 millisecond</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the timestamp to a specified value (primarily for testing).</span>

<span class="sd">        Args:</span>
<span class="sd">            value (int): The value to reset the timestamp to. Must be non-negative.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the provided value is negative.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Reset value must be non-negative&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.timestamp.TimestampFromVariable.get" class="doc doc-heading">
            <code class=" language-python"><span class="n">get</span><span class="p">()</span></code>

<a href="#accumulate.signing.timestamp.TimestampFromVariable.get" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Atomically increment and retrieve the timestamp value.</p>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\timestamp.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Atomically increment and retrieve the timestamp value.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># ⬅️ Increment by 1 millisecond</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="accumulate.signing.timestamp.TimestampFromVariable.reset" class="doc doc-heading">
            <code class=" language-python"><span class="n">reset</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#accumulate.signing.timestamp.TimestampFromVariable.reset" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Reset the timestamp to a specified value (primarily for testing).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to reset the timestamp to. Must be non-negative.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the provided value is negative.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>accumulate\signing\timestamp.py</code></summary>
              <div class="codehilite"><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset the timestamp to a specified value (primarily for testing).</span>

<span class="sd">    Args:</span>
<span class="sd">        value (int): The value to reset the timestamp to. Must be non-negative.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the provided value is negative.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Reset value must be non-negative&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>